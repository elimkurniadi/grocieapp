!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{mR1q:function(n,r,o){"use strict";o.r(r),o.d(r,"EditProfilePageModule",function(){return I});var i=o("ofXK"),c=o("3Pt+"),l=o("TEn/"),a=o("tyNb"),s=o("mrSG"),u=o("XKlN"),f=o("H98O"),b=o("ZF+8"),g=o("LF58"),m=o("a/9d"),h=o("FAH8"),p=o("fXoL"),d=o("1rxE");function v(e,t){if(1&e&&(p.Ub(0,"small"),p.Dc(1),p.Tb()),2&e){var n=p.ec(2);p.Cb(1),p.Ec(null==n.fg.controls.full_name.errors||null==n.fg.controls.full_name.errors.required?null:n.fg.controls.full_name.errors.required.message)}}function T(e,t){if(1&e&&(p.Ub(0,"small"),p.Dc(1),p.Tb()),2&e){var n=p.ec(2);p.Cb(1),p.Gc("",null==n.fg.controls.email.errors||null==n.fg.controls.email.errors.required?null:n.fg.controls.email.errors.required.message," ",null==n.fg.controls.email.errors||null==n.fg.controls.email.errors.email?null:n.fg.controls.email.errors.email.message,"")}}function y(e,t){if(1&e&&(p.Ub(0,"small"),p.Dc(1),p.Tb()),2&e){var n=p.ec(2);p.Cb(1),p.Ic("",null==n.fg.controls.phone.errors||null==n.fg.controls.phone.errors.required?null:n.fg.controls.phone.errors.required.message," ",null==n.fg.controls.phone.errors||null==n.fg.controls.phone.errors.numeric?null:n.fg.controls.phone.errors.numeric.message," ",null==n.fg.controls.phone.errors||null==n.fg.controls.phone.errors.minLength?null:n.fg.controls.phone.errors.minLength.message," ",null==n.fg.controls.phone.errors||null==n.fg.controls.phone.errors.maxLength?null:n.fg.controls.phone.errors.maxLength.message,"")}}function P(e,t){if(1&e){var n=p.Vb();p.Ub(0,"form",13),p.Ub(1,"ion-row",14),p.Ub(2,"ion-col",15),p.Pb(3,"img",16),p.Tb(),p.Ub(4,"ion-col",17),p.Ub(5,"ion-row"),p.Ub(6,"ion-col",6),p.Ub(7,"ion-text",18),p.Dc(8),p.fc(9,"translate"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(10,"ion-col",19),p.cc("click",function(){return p.vc(n),p.ec().showActionSheet()}),p.Ub(11,"ion-text",9),p.Ub(12,"b"),p.Dc(13),p.fc(14,"translate"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(15,"ion-item",20),p.Ub(16,"ion-label",21),p.Dc(17),p.fc(18,"translate"),p.Tb(),p.Pb(19,"ion-input",22),p.fc(20,"translate"),p.Bc(21,v,2,1,"small",23),p.Tb(),p.Ub(22,"ion-item",20),p.Ub(23,"ion-label",21),p.Dc(24),p.fc(25,"translate"),p.Tb(),p.Pb(26,"ion-input",24),p.fc(27,"translate"),p.Bc(28,T,2,2,"small",23),p.Tb(),p.Ub(29,"ion-item",20),p.Ub(30,"ion-label",21),p.Dc(31),p.fc(32,"translate"),p.Tb(),p.Pb(33,"ion-input",25),p.fc(34,"translate"),p.Bc(35,y,2,4,"small",23),p.Tb(),p.Tb()}if(2&e){var r=p.ec();p.mc("formGroup",r.fg),p.Cb(3),p.mc("src",r.selectedImage,p.xc),p.Cb(5),p.Ec(p.gc(9,13,"PROFILE_PICTURE")),p.Cb(5),p.Ec(p.gc(14,15,"CHANGE")),p.Cb(4),p.Ec(p.gc(18,17,"NAME")),p.Cb(2),p.nc("placeholder",p.gc(20,19,"NAME_PLACEHOLDER")),p.Cb(2),p.mc("ngIf",r.fg.controls.full_name.dirty),p.Cb(3),p.Ec(p.gc(25,21,"EMAIL_ADDRESS")),p.Cb(2),p.nc("placeholder",p.gc(27,23,"YOUR_EMAIL_ADDRESS")),p.Cb(2),p.mc("ngIf",r.fg.controls.email.dirty),p.Cb(3),p.Ec(p.gc(32,25,"PHONE_NUMBER")),p.Cb(2),p.nc("placeholder",p.gc(34,27,"PHONE_NUMBER")),p.Cb(2),p.mc("ngIf",r.fg.controls.phone.dirty)}}var U,C,E,O=function(){return["/change-password"]},_=[{path:"",component:(U=function(){function n(t,r,o,i,c,l,a,s,u,f){var b=this;e(this,n),this.validatorSrv=t,this.fb=r,this.router=o,this.gs=i,this.translateSrv=c,this.userSrv=l,this.camera=a,this.file=s,this.actionSheetCtrl=u,this.toastSrv=f,this.imagePickerOptions={maximumImagesCount:1,quality:50},this.selectedImage=null,this.userSrv.getProfile().then(function(e){b.currDate=new Date,b.initProfileForm(e)})}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){}},{key:"initProfileForm",value:function(e){this.selectedImage=(null==e?void 0:e.profile_picture)?(null==e?void 0:e.profile_picture)+"?".concat(this.currDate.toString()):"https://via.placeholder.com/35.png?text=LOGO+Placeholder",this.validatorSrv.validatorErrorMessage(),this.fg=this.fb.group({profile_picture:[(null==e?void 0:e.profile_picture)?(null==e?void 0:e.profile_picture)+"?".concat(this.currDate.toString()):null],full_name:[null==e?void 0:e.full_name,[u.c.required()]],email:[null==e?void 0:e.email,[u.c.required(),u.c.email()]],phone:[null==e?void 0:e.phone,[u.c.required(),u.c.numeric(),u.c.minLength({value:7,message:"".concat(this.translateSrv.get("VALIDATOR_MIN")," 7")}),u.c.maxLength({value:15,message:"".concat(this.translateSrv.get("VALIDATOR_MAX")," 15")})]]})}},{key:"updateProfile",value:function(){var e=this;if(this.fg.valid){delete this.fg.value.profile_picture;var t=this.getDirtyValues();this.userSrv.updateProfile(t).then(function(){e.router.navigate(["/tabs/profile"])})}}},{key:"updateProfilePicture",value:function(e){var t=this;this.userSrv.updateProfilePicture({image:e}).then(function(e){t.toastSrv.show("Photo updated successfully")}).catch(function(e){t.toastSrv.show(e.error.error.message)})}},{key:"getDirtyValues",value:function(){return this.gs.getChangedFormProperties(this.fg)}},{key:"showActionSheet",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetCtrl.create({header:"".concat(this.translateSrv.get("SELECT_IMAGE_SOURCE")),buttons:[{text:"".concat(this.translateSrv.get("CHOOSE_FROM_GALLERY")),handler:function(){n.pickImage(n.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"".concat(this.translateSrv.get("TAKE_A_PHOTO")),handler:function(){n.pickImage(n.camera.PictureSourceType.CAMERA)}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"pickImage",value:function(e){var t=this;this.camera.getPicture({quality:100,sourceType:e,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0}).then(function(e){var n="data:image/jpeg;base64,".concat(e);t.setImageToForm(n),t.getBlobFile(n).then(function(e){t.updateProfilePicture(e)})})}},{key:"getBlobFile",value:function(e){return new Promise(function(t,n){fetch(e).then(function(e){return e.blob()}).then(function(e){var n=new Blob([e],{type:"image/jpeg"});t(n)},function(e){n(e)})})}},{key:"setImageToForm",value:function(e){this.selectedImage=e,this.fg.controls.profile_picture.patchValue(e),this.fg.controls.profile_picture.markAsDirty()}}])&&t(r.prototype,o),i&&t(r,i),n}(),U.\u0275fac=function(e){return new(e||U)(p.Ob(b.d),p.Ob(c.d),p.Ob(a.g),p.Ob(b.c),p.Ob(f.a),p.Ob(g.m),p.Ob(m.a),p.Ob(h.a),p.Ob(l.a),p.Ob(b.e))},U.\u0275cmp=p.Ib({type:U,selectors:[["app-edit-profile"]],decls:25,vars:13,consts:[[1,"ion-no-border"],["mode","ios"],["slot","start","mode","md"],["icon","chevron-back"],[1,"ion-padding","h-100"],[1,"ion-justify-content-between"],["size","12",1,"ion-no-padding"],[3,"formGroup",4,"ngIf"],["size","12",1,"ion-no-padding",2,"margin-top","12px",3,"routerLink"],[1,"section-see-all",2,"line-height","16px"],[1,"ion-no-border","ion-padding-horizontal"],["size","12"],["expand","block","shape","round","color","success",3,"disabled","click"],[3,"formGroup"],[1,"ion-align-items-center","bg-white"],["size","2",1,"ion-no-padding"],["width","80%",1,"rounded","profile-img",3,"src"],["size","7"],["color","dark"],["size","3",1,"ion-text-right",3,"click"],["lines","none",1,"form-group"],["position","stacked"],["type","text","formControlName","full_name",1,"default-theme",3,"placeholder"],[4,"ngIf"],["type","email","formControlName","email","disabled","",1,"default-theme",3,"placeholder"],["type","tel","formControlName","phone","disabled","",1,"default-theme",3,"placeholder"]],template:function(e,t){1&e&&(p.Ub(0,"ion-header",0),p.Ub(1,"ion-toolbar",1),p.Ub(2,"ion-buttons",2),p.Pb(3,"ion-back-button",3),p.Tb(),p.Ub(4,"ion-title"),p.Dc(5),p.fc(6,"translate"),p.Tb(),p.Tb(),p.Tb(),p.Ub(7,"ion-content"),p.Ub(8,"ion-grid",4),p.Ub(9,"ion-row",5),p.Ub(10,"ion-col",6),p.Bc(11,P,36,29,"form",7),p.Tb(),p.Tb(),p.Ub(12,"ion-row"),p.Ub(13,"ion-col",8),p.Ub(14,"ion-text",9),p.Ub(15,"b"),p.Dc(16),p.fc(17,"translate"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(18,"ion-footer",10),p.Ub(19,"ion-grid"),p.Ub(20,"ion-row"),p.Ub(21,"ion-col",11),p.Ub(22,"ion-button",12),p.cc("click",function(){return t.updateProfile()}),p.Dc(23),p.fc(24,"translate"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&e&&(p.Cb(5),p.Ec(p.gc(6,6,"EDIT_PROFILE")),p.Cb(6),p.mc("ngIf",t.fg),p.Cb(2),p.mc("routerLink",p.qc(12,O)),p.Cb(3),p.Ec(p.gc(17,8,"CHANGE_PASSWORD")),p.Cb(6),p.mc("disabled",null==t.fg?null:t.fg.pristine),p.Cb(1),p.Fc(" ",p.gc(24,10,"UPDATE")," "))},directives:[l.t,l.bb,l.i,l.e,l.f,l.ab,l.p,l.s,l.K,l.o,i.n,l.kb,a.h,l.X,l.r,l.h,c.y,c.q,c.i,l.y,l.C,l.x,l.mb,c.p,c.g],pipes:[d.a],styles:[".btn-edit-profile[_ngcontent-%COMP%]{font-size:8px;font-weight:600;line-height:1.25;letter-spacing:normal;color:#9c3}ion-item[_ngcontent-%COMP%]{--padding-start:0px}"]}),U)}],S=((C=function t(){e(this,t)}).\u0275mod=p.Mb({type:C}),C.\u0275inj=p.Lb({factory:function(e){return new(e||C)},imports:[[a.j.forChild(_)],a.j]}),C),w=o("PCNd"),I=((E=function t(){e(this,t)}).\u0275mod=p.Mb({type:E}),E.\u0275inj=p.Lb({factory:function(e){return new(e||E)},imports:[[i.b,c.j,l.cb,S,c.j,c.v,w.a]]}),E)}}])}();