(window.webpackJsonp=window.webpackJsonp||[]).push([[16,37,38,39],{Cmua:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n("mrSG"),i=n("fXoL"),r=n("TEn/");let s=(()=>{class t{constructor(t){this.alertController=t}presentAlert(t){return Object(o.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create(t);yield e.present()})}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(r.b))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},PCNd:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=n("ofXK"),i=n("fXoL");let r=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[o.b]]}),t})()},aPai:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n("mrSG"),i=n("gcOT"),r=n("fXoL");const{Browser:s}=i.a;let c=(()=>{class t{constructor(){}openBrowser(t){return Object(o.a)(this,void 0,void 0,function*(){yield s.open(t)})}listenOnBrowserFinished(){s.addListener("browserFinished",t=>t)}listenOnBrowserPageLoad(){s.addListener("browserPageLoaded",t=>t)}removeAllListeners(){s.removeAllListeners()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},mDHw:function(t,e,n){"use strict";n.r(e),n.d(e,"PaymentPageModule",function(){return L});var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),s=n("tyNb"),c=n("XKlN"),a=n("ZF+8"),b=n("LF58"),l=n("fXoL"),h=n("1rxE");function d(t,e){if(1&t&&(l.Ub(0,"small"),l.Dc(1),l.Tb()),2&t){const t=l.ec();l.Cb(1),l.Ec(null==t.fg.controls.amount.errors||null==t.fg.controls.amount.errors.required?null:t.fg.controls.amount.errors.required.message)}}function u(t,e){1&t&&l.Pb(0,"ion-spinner",22)}const m=function(){return{standalone:!0}};let p=(()=>{class t{constructor(t,e,n,o,i,r,s,c,a,b,l){this.validatorSrv=t,this.fb=e,this.router=n,this.route=o,this.checkoutSrv=i,this.transactionSrv=r,this.toastSrv=s,this.gs=c,this.cache=a,this.platform=b,this.navCtrl=l,this.previousUrl="/payment/list",this.isOnFetch=!1,this.route.queryParams.subscribe(t=>{this.isNow="true"===t.is_now,this.addressId=t.address_id,this.notes=t.notes,this.voucherCode=t.voucher_code,this.paymentId=t.payment_id,this.shippingDate=t.date,this.shippingTime=t.time;const e=new URLSearchParams;for(const n in t)t.hasOwnProperty(n)&&e.set(n,t[n]);this.previousUrl+=`?${e.toString()}`})}ngOnInit(){this.buildCodForm(),this.getPriceSummary()}ionViewDidEnter(){this.observeFetchState(),this.backButton=this.platform.backButton.subscribeWithPriority(20,()=>{this.goBack()})}ionViewDidLeave(){this.backButton.unsubscribe()}goBack(){this.navCtrl.navigateBack(this.previousUrl)}observeFetchState(){this.gs.observeOnFetch().subscribe(t=>{this.isOnFetch=t})}buildCodForm(){this.validatorSrv.validatorErrorMessage(),this.fg=this.fb.group({amount:[null,[c.c.required()]],cod_payment_amount:[null,[c.c.required()]]})}getPriceSummary(){const t={is_now:this.isNow,address_id:this.addressId};""===this.voucherCode&&null===this.voucherCode||(t.voucher_code=this.voucherCode),this.isNow||(t.delivery_date=this.shippingDate),this.checkoutSrv.calculatePrice(t).then(t=>{this.paymentSummary=t.response})}amountChanged(t){const e=t.replace(/,/g,""),n=this.gs.numberWithCommas(e);this.amountCod=n,this.fg.patchValue({cod_payment_amount:e,amount:n})}pay(){if(this.fg.valid){const t=this.prepareBodyTransaction();this.transactionSrv.add(t).then(t=>{this.removeVoucher(),this.navCtrl.navigateBack("my-order")}).catch(t=>{this.toastSrv.show(t.error.error.message)})}else this.gs.markDirtyForm(this.fg)}prepareBodyTransaction(){const t={is_now:this.isNow,address_id:this.addressId,shipping_id:1,payment_method_id:this.paymentId,cod_payment_amount:this.fg.value.cod_payment_amount};return null!==this.notes&&""!==this.notes&&void 0!==this.notes&&(t.notes=this.notes),this.isNow||(t.shipping_date=this.shippingDate,t.shipping_time=this.shippingTime),null!==this.voucherCode&&""!==this.voucherCode&&void 0!==this.voucherCode&&(t.voucher_code=this.voucherCode),t}removeVoucher(){this.cache.removeVoucher()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(a.d),l.Ob(i.d),l.Ob(s.g),l.Ob(s.a),l.Ob(b.h),l.Ob(b.l),l.Ob(a.e),l.Ob(a.c),l.Ob(a.b),l.Ob(r.hb),l.Ob(r.fb))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-payment-cod"]],decls:43,vars:28,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["defaultHref","/payment","icon","chevron-back-outline",3,"click"],[3,"fullscreen"],[1,"ion-padding-horizontal"],["size","12"],[1,"text-label"],[1,"text-price"],[1,"divider"],[1,"ion-padding-horizontal","ion-padding-top"],[1,"text-cod"],[1,"text-cod-message"],[3,"formGroup","ngSubmit"],["codForm","ngForm"],[1,"form-group"],["lines","none"],["placeholder","000.000","maxlength","16","inputmode","numeric",1,"default-theme","text-amount",3,"ngModel","ngModelOptions","ngModelChange"],[4,"ngIf"],[1,"ion-padding"],["color","success","expand","block","shape","round",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],["name","dots","color","dark"]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"ion-header",0),l.Ub(1,"ion-toolbar",1),l.Ub(2,"ion-buttons",2),l.Ub(3,"ion-back-button",3),l.cc("click",function(){return e.goBack()}),l.Tb(),l.Tb(),l.Ub(4,"ion-title"),l.Dc(5),l.fc(6,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Ub(7,"ion-content",4),l.Ub(8,"ion-row",5),l.Ub(9,"ion-col",6),l.Ub(10,"ion-text",7),l.Dc(11),l.fc(12,"translate"),l.Tb(),l.Tb(),l.Ub(13,"ion-col",6),l.Ub(14,"ion-text",8),l.Dc(15),l.fc(16,"number"),l.Tb(),l.Tb(),l.Tb(),l.Pb(17,"div",9),l.Ub(18,"ion-row",10),l.Ub(19,"ion-col",6),l.Ub(20,"ion-text",11),l.Dc(21),l.fc(22,"translate"),l.Tb(),l.Tb(),l.Ub(23,"ion-col",6),l.Ub(24,"ion-text",12),l.Dc(25),l.fc(26,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Ub(27,"ion-row",5),l.Ub(28,"ion-col",6),l.Ub(29,"form",13,14),l.cc("ngSubmit",function(){return e.pay()}),l.Ub(31,"div",15),l.Ub(32,"ion-item",16),l.Ub(33,"ion-input",17),l.cc("ngModelChange",function(t){return e.amountChanged(t)}),l.Tb(),l.Pb(34,"br"),l.Tb(),l.Bc(35,d,2,1,"small",18),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(36,"ion-footer",0),l.Ub(37,"ion-row",19),l.Ub(38,"ion-col"),l.Ub(39,"ion-button",20),l.cc("click",function(){return l.vc(t),l.uc(30).ngSubmit.emit()}),l.Dc(40),l.fc(41,"translate"),l.Bc(42,u,1,0,"ion-spinner",21),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Cb(5),l.Ec(l.gc(6,13,"COD")),l.Cb(2),l.mc("fullscreen",!0),l.Cb(4),l.Fc(" ",l.gc(12,15,"TOTAL_PAYMENT")," "),l.Cb(4),l.Fc(" Rp. ",l.ic(16,17,null==e.paymentSummary?null:e.paymentSummary.final_price,"1.0-0","id"),""),l.Cb(6),l.Fc(" ",l.gc(22,21,"CASH_ON_DELIVERY")," "),l.Cb(4),l.Fc(" ",l.gc(26,23,"COD_MESSAGE")," "),l.Cb(4),l.mc("formGroup",e.fg),l.Cb(4),l.mc("ngModel",e.amountCod)("ngModelOptions",l.qc(27,m)),l.Cb(2),l.mc("ngIf",e.fg.controls.amount.dirty),l.Cb(4),l.mc("disabled",e.isOnFetch),l.Cb(1),l.Fc(" ",l.gc(41,25,"PAY")," "),l.Cb(2),l.mc("ngIf",e.isOnFetch))},directives:[r.t,r.bb,r.i,r.e,r.f,r.ab,r.p,r.K,r.o,r.X,i.y,i.q,i.i,r.y,r.x,r.mb,i.k,i.p,i.s,o.n,r.r,r.h,r.T],pipes:[h.a,o.f],styles:[".text-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.2;letter-spacing:normal;color:#353535}.text-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;line-height:1.22;color:#353535}.text-cod[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.text-cod-message[_ngcontent-%COMP%]{font-size:10px;font-weight:400}.text-amount[_ngcontent-%COMP%]{font-weight:600}.divider[_ngcontent-%COMP%]{height:8px;margin-top:0!important;margin-bottom:0!important;background-color:#f5f5f5}"]}),t})();var g=n("H98O"),f=n("Cmua");function T(t,e){1&t&&l.Pb(0,"ion-spinner",26)}let v=(()=>{class t{constructor(t,e,n,o,i,r,s,c,a,b,l){this.router=t,this.route=e,this.checkoutSrv=n,this.transactionSrv=o,this.toastSrv=i,this.cache=r,this.gs=s,this.translate=c,this.alertSrv=a,this.navCtrl=b,this.platform=l,this.previousUrl="/payment/list",this.isOnFetch=!1,this.route.queryParams.subscribe(t=>{this.isNow="true"===t.is_now,this.addressId=t.address_id,this.notes=t.notes,this.voucherCode=t.voucher_code,this.paymentId=t.payment_id,this.shippingDate=t.date,this.shippingTime=t.time;const e=new URLSearchParams;for(const n in t)t.hasOwnProperty(n)&&e.set(n,t[n]);this.previousUrl+=`?${e.toString()}`})}ngOnInit(){this.getPriceSummary()}ionViewDidEnter(){this.observeFetchState(),this.backButton=this.platform.backButton.subscribeWithPriority(20,()=>{this.goBack()})}ionViewDidLeave(){this.backButton.unsubscribe()}goBack(){this.navCtrl.navigateBack(this.previousUrl)}observeFetchState(){this.gs.observeOnFetch().subscribe(t=>{this.isOnFetch=t})}getPriceSummary(){const t={is_now:this.isNow,address_id:this.addressId};""===this.voucherCode&&null===this.voucherCode||(t.voucher_code=this.voucherCode),this.isNow||(t.delivery_date=this.shippingDate),this.checkoutSrv.calculatePrice(t).then(t=>{this.paymentSummary=t.response})}pay(){const t=this.prepareBodyTransaction();this.transactionSrv.add(t).then(t=>{this.removeVoucher(),this.router.navigate(["/payment",t.response,"proof"])}).catch(t=>{this.toastSrv.show(t.error.error.message)})}prepareBodyTransaction(){const t={is_now:this.isNow,address_id:this.addressId,shipping_id:1,payment_method_id:this.paymentId};return null!==this.notes&&""!==this.notes&&void 0!==this.notes&&(t.notes=this.notes),this.isNow||(t.shipping_date=this.shippingDate,t.shipping_time=this.shippingTime),null!==this.voucherCode&&""!==this.voucherCode&&void 0!==this.voucherCode&&(t.voucher_code=this.voucherCode),t}removeVoucher(){this.cache.removeVoucher()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.g),l.Ob(s.a),l.Ob(b.h),l.Ob(b.l),l.Ob(a.e),l.Ob(a.b),l.Ob(a.c),l.Ob(g.a),l.Ob(f.a),l.Ob(r.fb),l.Ob(r.hb))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-payment-instruction"]],decls:96,vars:41,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back-outline",3,"defaultHref","click"],[3,"fullscreen"],[1,"ion-padding-horizontal"],["size","12"],[1,"text-label"],[1,"text-price"],[1,"divider"],[1,"ion-padding-horizontal","ion-padding-top"],[1,"text-title"],["size","12",1,"ion-padding-vertical"],[1,"text-subtitle"],[1,"text-content"],["size","1"],[3,"innerHTML"],[1,"ion-padding-vertical"],[1,"ion-no-padding"],["size","1",1,"ion-no-padding"],[1,"text-content",3,"innerHTML"],["color","light",1,"ion-no-border",3,"translucent","mode"],[1,"ion-no-padding",2,"background","white"],[1,"ion-padding"],["color","success","expand","block","shape","round",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],["name","dots","color","dark"]],template:function(t,e){1&t&&(l.Ub(0,"ion-header",0),l.Ub(1,"ion-toolbar",1),l.Ub(2,"ion-buttons",2),l.Ub(3,"ion-back-button",3),l.cc("click",function(){return e.goBack()}),l.Tb(),l.Tb(),l.Ub(4,"ion-title"),l.Dc(5),l.fc(6,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Ub(7,"ion-content",4),l.Ub(8,"ion-row",5),l.Ub(9,"ion-col",6),l.Ub(10,"ion-text",7),l.Dc(11),l.fc(12,"translate"),l.Tb(),l.Tb(),l.Ub(13,"ion-col",6),l.Ub(14,"ion-text",8),l.Dc(15),l.fc(16,"number"),l.Tb(),l.Tb(),l.Tb(),l.Pb(17,"div",9),l.Ub(18,"ion-row",10),l.Ub(19,"ion-col",6),l.Ub(20,"ion-text",11),l.Dc(21),l.fc(22,"translate"),l.Tb(),l.Tb(),l.Ub(23,"ion-col",12),l.Ub(24,"ion-text",13),l.Dc(25),l.fc(26,"translate"),l.Tb(),l.Tb(),l.Ub(27,"ion-col",6),l.Ub(28,"ion-text",14),l.Ub(29,"ion-row"),l.Ub(30,"ion-col",15),l.Dc(31," 1 "),l.Tb(),l.Ub(32,"ion-col"),l.Dc(33),l.fc(34,"translate"),l.Tb(),l.Tb(),l.Ub(35,"ion-row"),l.Ub(36,"ion-col",15),l.Dc(37," 2"),l.Tb(),l.Ub(38,"ion-col"),l.Pb(39,"span",16),l.fc(40,"translate"),l.Pb(41,"br"),l.Ub(42,"ion-grid",17),l.Ub(43,"ion-row",18),l.Ub(44,"ion-col",18),l.Ub(45,"strong"),l.Dc(46,"Nama Bank"),l.Tb(),l.Tb(),l.Ub(47,"ion-col",19),l.Dc(48," : "),l.Tb(),l.Ub(49,"ion-col",18),l.Ub(50,"strong"),l.Dc(51,"Bank Central Asia"),l.Tb(),l.Tb(),l.Tb(),l.Ub(52,"ion-row",18),l.Ub(53,"ion-col",18),l.Ub(54,"strong"),l.Dc(55,"Nomor Rekening"),l.Tb(),l.Tb(),l.Ub(56,"ion-col",19),l.Dc(57," : "),l.Tb(),l.Ub(58,"ion-col",18),l.Ub(59,"strong"),l.Dc(60,"040 899 5577"),l.Tb(),l.Tb(),l.Tb(),l.Ub(61,"ion-row",18),l.Ub(62,"ion-col",18),l.Ub(63,"strong"),l.Dc(64,"Pemilik Rekening"),l.Tb(),l.Tb(),l.Ub(65,"ion-col",19),l.Dc(66," : "),l.Tb(),l.Ub(67,"ion-col",18),l.Ub(68,"strong"),l.Dc(69,"PT Mitra Kreasi Santosa"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(70,"table"),l.Ub(71,"tr"),l.Pb(72,"td"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(73,"ion-row"),l.Ub(74,"ion-col",15),l.Dc(75," 3 "),l.Tb(),l.Pb(76,"ion-col",20),l.fc(77,"translate"),l.Tb(),l.Ub(78,"ion-row"),l.Ub(79,"ion-col",15),l.Dc(80," 4 "),l.Tb(),l.Pb(81,"ion-col",20),l.fc(82,"translate"),l.Tb(),l.Ub(83,"ion-row"),l.Ub(84,"ion-col",15),l.Dc(85," 5 "),l.Tb(),l.Pb(86,"ion-col",20),l.fc(87,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(88,"ion-footer",21),l.Ub(89,"ion-grid",22),l.Ub(90,"ion-row",23),l.Ub(91,"ion-col"),l.Ub(92,"ion-button",24),l.cc("click",function(){return e.pay()}),l.Dc(93),l.fc(94,"translate"),l.Bc(95,T,1,0,"ion-spinner",25),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.mc("defaultHref",e.previousUrl),l.Cb(2),l.Ec(l.gc(6,17,"MANUAL_BANK_TRANSFER")),l.Cb(2),l.mc("fullscreen",!0),l.Cb(4),l.Fc(" ",l.gc(12,19,"TOTAL_PAYMENT")," "),l.Cb(4),l.Fc(" Rp. ",l.ic(16,21,null==e.paymentSummary?null:e.paymentSummary.final_price,"1.0-0","id"),""),l.Cb(6),l.Fc(" ",l.gc(22,25,"HOW_TO_PAY")," "),l.Cb(4),l.Fc(" ",l.gc(26,27,"MANUAL_BANK_TRANSFER")," "),l.Cb(8),l.Fc(" ",l.gc(34,29,"MANUAL_PAYMENT_STEP1")," "),l.Cb(6),l.oc("innerHTML","",l.gc(40,31,"MANUAL_PAYMENT_STEP2")," ",l.wc),l.Cb(37),l.nc("innerHTML",l.gc(77,33,"MANUAL_PAYMENT_STEP3"),l.wc),l.Cb(5),l.nc("innerHTML",l.gc(82,35,"MANUAL_PAYMENT_STEP4"),l.wc),l.Cb(5),l.nc("innerHTML",l.gc(87,37,"MANUAL_PAYMENT_STEP5"),l.wc),l.Cb(2),l.mc("translucent",!1)("mode","md"),l.Cb(4),l.mc("disabled",e.isOnFetch),l.Cb(1),l.Fc(" ",l.gc(94,39,"PAY")," "),l.Cb(2),l.mc("ngIf",e.isOnFetch))},directives:[r.t,r.bb,r.i,r.e,r.f,r.ab,r.p,r.K,r.o,r.X,r.s,r.r,r.h,o.n,r.T],pipes:[h.a,o.f],styles:[".text-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#353535}.text-subtitle[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#353535}.text-content[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#353535}.text-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;font-stretch:normal;font-style:normal;letter-spacing:normal;color:#353535}.text-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#353535}.divider[_ngcontent-%COMP%]{height:8px;margin-top:0!important;margin-bottom:0!important;background-color:#f5f5f5}"]}),t})();var U=n("aPai");function y(t,e){if(1&t&&(l.Ub(0,"span"),l.Pb(1,"img",20),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.mc("src",t,l.xc)}}function C(t,e){if(1&t&&(l.Ub(0,"ion-row",19),l.Ub(1,"ion-col"),l.Bc(2,y,2,1,"span",11),l.Tb(),l.Tb()),2&t){const t=l.ec().$implicit;l.Cb(2),l.mc("ngForOf",null==t?null:t.image)}}function O(t,e){if(1&t&&(l.Ub(0,"div"),l.Ub(1,"ion-item",15),l.Pb(2,"ion-radio",16),l.Ub(3,"ion-label",17),l.Dc(4),l.Tb(),l.Tb(),l.Bc(5,C,3,1,"ion-row",18),l.Tb()),2&t){const t=e.$implicit;l.Cb(2),l.mc("value",t.payment_method_id),l.Cb(2),l.Fc(" ",t.name," "),l.Cb(1),l.mc("ngIf",(null==t?null:t.image)&&(null==t||null==t.image?null:t.image.length))}}function _(t,e){1&t&&l.Pb(0,"ion-spinner",21)}let P=(()=>{class t{constructor(t,e,n,o,i,r,s,c,a,b){this.router=t,this.route=e,this.transactionSrv=n,this.checkoutSrv=o,this.browserSrv=i,this.toastSrv=r,this.cache=s,this.gs=c,this.platform=a,this.navCtrl=b,this.previousUrl="/checkout",this.isOnFetch=!1,this.route.queryParams.subscribe(t=>{this.isNow="true"===t.is_now,this.addressId=t.address_id,this.notes=t.notes,this.voucherCode=t.voucher_code,this.shippingDate=t.date,this.shippingTime=t.time;const e=new URLSearchParams;for(const n in t)t.hasOwnProperty(n)&&e.set(n,t[n]);this.previousUrl+=`?${e.toString()}`})}ngOnInit(){this.getPriceSummary(),this.getPaymentMethod()}ionViewDidEnter(){this.observeFetchState(),this.backButton=this.platform.backButton.subscribeWithPriority(20,()=>{this.goBack()})}ionViewDidLeave(){this.backButton.unsubscribe()}goBack(){this.navCtrl.navigateBack(this.previousUrl)}observeFetchState(){this.gs.observeOnFetch().subscribe(t=>{this.isOnFetch=t})}next(){const t={address_id:this.addressId,is_now:this.isNow,notes:this.notes,payment_id:this.paymentMethod,date:this.shippingDate,time:this.shippingTime};""!==this.voucherCode&&null!==this.voucherCode&&(t.voucher_code=this.voucherCode),1===this.paymentMethod?this.payOrder():2===this.paymentMethod?this.router.navigate(["/payment","instruction"],{queryParams:t}):3===this.paymentMethod&&this.router.navigate(["/payment","cod"],{queryParams:t})}getPaymentMethod(){this.transactionSrv.getPaymentMethod().then(t=>{this.paymentMethods=t.response}).catch(t=>{this.toastSrv.show(t.error.error.message)})}getPriceSummary(){const t={is_now:this.isNow,address_id:this.addressId};""===this.voucherCode&&null===this.voucherCode||(t.voucher_code=this.voucherCode),this.isNow||(t.delivery_date=this.shippingDate),this.checkoutSrv.calculatePrice(t).then(t=>{this.paymentSummary=t.response})}payOrder(){const t=this.prepareBodyTransaction();this.transactionSrv.add(t).then(t=>{this.removeVoucher(),this.browserSrv.openBrowser({url:t.response}),this.navCtrl.navigateBack("my-order")}).catch(t=>{this.toastSrv.show(t.error.error.message)})}prepareBodyTransaction(){const t={is_now:this.isNow,address_id:this.addressId,shipping_id:1,payment_method_id:this.paymentMethod};return null!==this.notes&&""!==this.notes&&void 0!==this.notes&&(t.notes=this.notes),this.isNow||(t.shipping_date=this.shippingDate,t.shipping_time=this.shippingTime),null!==this.voucherCode&&""!==this.voucherCode&&void 0!==this.voucherCode&&(t.voucher_code=this.voucherCode),t}removeVoucher(){this.cache.removeVoucher()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.g),l.Ob(s.a),l.Ob(b.l),l.Ob(b.h),l.Ob(U.a),l.Ob(a.e),l.Ob(a.b),l.Ob(a.c),l.Ob(r.hb),l.Ob(r.fb))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-payment-list"]],decls:32,vars:23,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back-outline",3,"defaultHref","click"],[3,"fullscreen"],[1,"ion-padding-horizontal"],["size","12"],[1,"text-label"],[1,"text-price"],[1,"divider"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"ion-padding"],["color","success","expand","block","shape","round",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],["lines","none"],["slot","start","color","success",3,"value"],[1,"text-label","ion-text-wrap"],["class","padding-payment-icon",4,"ngIf"],[1,"padding-payment-icon"],["onerror","this.onerror=null;this.src='assets/images/placeholder-product.svg'",1,"payment-icon",3,"src"],["name","dots","color","dark"]],template:function(t,e){1&t&&(l.Ub(0,"ion-header",0),l.Ub(1,"ion-toolbar",1),l.Ub(2,"ion-buttons",2),l.Ub(3,"ion-back-button",3),l.cc("click",function(){return e.goBack()}),l.Tb(),l.Tb(),l.Ub(4,"ion-title"),l.Dc(5),l.fc(6,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Ub(7,"ion-content",4),l.Ub(8,"ion-row",5),l.Ub(9,"ion-col",6),l.Ub(10,"ion-text",7),l.Dc(11),l.fc(12,"translate"),l.Tb(),l.Tb(),l.Ub(13,"ion-col",6),l.Ub(14,"ion-text",8),l.Dc(15),l.fc(16,"number"),l.Tb(),l.Tb(),l.Tb(),l.Pb(17,"div",9),l.Ub(18,"ion-list"),l.Ub(19,"ion-radio-group",10),l.cc("ngModelChange",function(t){return e.paymentMethod=t}),l.Ub(20,"ion-list-header"),l.Ub(21,"ion-label",7),l.Dc(22),l.fc(23,"translate"),l.Tb(),l.Tb(),l.Bc(24,O,6,3,"div",11),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"ion-footer",0),l.Ub(26,"ion-row",12),l.Ub(27,"ion-col"),l.Ub(28,"ion-button",13),l.cc("click",function(){return e.next()}),l.Dc(29),l.fc(30,"translate"),l.Bc(31,_,1,0,"ion-spinner",14),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(3),l.mc("defaultHref",e.previousUrl),l.Cb(2),l.Ec(l.gc(6,11,"PAYMENT")),l.Cb(2),l.mc("fullscreen",!0),l.Cb(4),l.Fc(" ",l.gc(12,13,"TOTAL_PAYMENT")," "),l.Cb(4),l.Fc(" Rp. ",l.ic(16,15,null==e.paymentSummary?null:e.paymentSummary.final_price,"1.0-0","id")," "),l.Cb(4),l.mc("ngModel",e.paymentMethod),l.Cb(3),l.Fc(" ",l.gc(23,19,"PAY_METHOD")," "),l.Cb(2),l.mc("ngForOf",e.paymentMethods),l.Cb(4),l.mc("disabled",e.isOnFetch),l.Cb(1),l.Fc(" ",l.gc(30,21,"NEXT")," "),l.Cb(2),l.mc("ngIf",e.isOnFetch))},directives:[r.t,r.bb,r.i,r.e,r.f,r.ab,r.p,r.K,r.o,r.X,r.D,r.G,r.lb,i.p,i.s,r.E,r.C,o.m,r.r,r.h,o.n,r.y,r.F,r.jb,r.T],pipes:[h.a,o.f],styles:[".text-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.2;letter-spacing:normal;color:#353535}.text-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;line-height:1.22;color:#353535}.divider[_ngcontent-%COMP%]{height:8px;margin-top:0!important;margin-bottom:0!important;background-color:#f5f5f5}.padding-payment-icon[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}.payment-icon[_ngcontent-%COMP%]{height:15px;margin-right:5px}"]}),t})();var w=n("mrSG"),k=n("a/9d");let S=(()=>{class t{constructor(t){this.modalCtrl=t}ngOnInit(){}dismiss(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(r.eb))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-payment-proof-success"]],decls:29,vars:12,consts:[[1,"ion-no-border"],["mode","ios"],["slot","end","mode","md"],[3,"click"],["name","close-outline","size","large"],[1,"ion-padding-top","ion-padding-horizontal","h-100"],[1,"ion-align-items-center","ion-justify-content-center","h-100"],["size","12",1,"ion-text-center"],["color","primary"],["color","medium"],[1,"ion-no-border","ion-padding-horizontal"],["expand","block","shape","round","color","success",3,"click"]],template:function(t,e){1&t&&(l.Ub(0,"ion-header",0),l.Ub(1,"ion-toolbar",1),l.Ub(2,"ion-buttons",2),l.Ub(3,"ion-button",3),l.cc("click",function(){return e.dismiss()}),l.Pb(4,"ion-icon",4),l.Tb(),l.Tb(),l.Ub(5,"ion-title"),l.Dc(6),l.fc(7,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"ion-content"),l.Ub(9,"ion-grid",5),l.Ub(10,"ion-row",6),l.Ub(11,"ion-col",7),l.Ub(12,"ion-text",8),l.Ub(13,"span"),l.Ub(14,"b"),l.Dc(15),l.fc(16,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Pb(17,"br"),l.Ub(18,"ion-text",9),l.Ub(19,"small"),l.Dc(20),l.fc(21,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(22,"ion-footer",10),l.Ub(23,"ion-grid"),l.Ub(24,"ion-row"),l.Ub(25,"ion-col"),l.Ub(26,"ion-button",11),l.cc("click",function(){return e.dismiss()}),l.Dc(27),l.fc(28,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(6),l.Ec(l.gc(7,4,"PAYMENT_PROOF_SENT")),l.Cb(9),l.Ec(l.gc(16,6,"PAYMENT_PROOF_TITLE")),l.Cb(5),l.Ec(l.gc(21,8,"PAYMENT_PROOF_MESSAGE")),l.Cb(7),l.Fc(" ",l.gc(28,10,"BACK_HOME")," "))},directives:[r.t,r.bb,r.i,r.h,r.u,r.ab,r.p,r.s,r.K,r.o,r.X,r.r],pipes:[h.a],styles:[""]}),t})();function x(t,e){if(1&t&&(l.Ub(0,"small"),l.Dc(1),l.Tb()),2&t){const t=l.ec();l.Cb(1),l.Ec(null==t.fg.controls.name.errors||null==t.fg.controls.name.errors.required?null:t.fg.controls.name.errors.required.message)}}function M(t,e){if(1&t&&(l.Ub(0,"small"),l.Dc(1),l.Tb()),2&t){const t=l.ec();l.Cb(1),l.Ec(null==t.fg.controls.bank_name.errors||null==t.fg.controls.bank_name.errors.required?null:t.fg.controls.bank_name.errors.required.message)}}function D(t,e){1&t&&(l.Ub(0,"div"),l.Pb(1,"ion-icon",19),l.Pb(2,"br"),l.Ub(3,"ion-text",20),l.Dc(4),l.fc(5,"translate"),l.Tb(),l.Tb()),2&t&&(l.Cb(4),l.Fc(" ",l.gc(5,1,"ADD_IMAGE")," "))}function F(t,e){if(1&t&&l.Pb(0,"img",21),2&t){const t=l.ec();l.mc("src",t.selectedImage,l.xc)}}function I(t,e){1&t&&l.Pb(0,"ion-spinner",22)}let B=(()=>{class t{constructor(t,e,n,o,i,r,s,c,a,b,l,h,d){this.validatorSrv=t,this.fb=e,this.translate=n,this.actionSheetCtrl=o,this.camera=i,this.gs=r,this.router=s,this.modalCtrl=c,this.route=a,this.transactionSrv=b,this.toastSrv=l,this.navCtrl=h,this.platform=d,this.selectedImage=null,this.isOnFetch=!1,this.route.params.subscribe(t=>{t.id&&(this.orderId=t.id,this.previousUrl=`/my-order/${t.id}/detail`)}),this.buildPaymentForm()}ngOnInit(){}ionViewDidEnter(){this.observeFetchState(),this.backButton=this.platform.backButton.subscribeWithPriority(20,()=>{this.goBack()})}ionViewDidLeave(){this.backButton.unsubscribe()}goBack(){this.navCtrl.navigateBack(this.previousUrl)}observeFetchState(){this.gs.observeOnFetch().subscribe(t=>{this.isOnFetch=t})}buildPaymentForm(){this.validatorSrv.validatorErrorMessage(),this.fg=this.fb.group({name:[null,[c.c.required()]],bank_name:[null,[c.c.required()]],payment_proof:[null,[c.c.required()]]})}showActionSheet(){return Object(w.a)(this,void 0,void 0,function*(){const t=yield this.actionSheetCtrl.create({header:`${this.translate.get("SELECT_IMAGE_SOURCE")}`,buttons:[{text:`${this.translate.get("CHOOSE_FROM_GALLERY")}`,handler:()=>{this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:`${this.translate.get("TAKE_A_PHOTO")}`,handler:()=>{this.pickImage(this.camera.PictureSourceType.CAMERA)}}]});yield t.present()})}pickImage(t){this.camera.getPicture({quality:100,sourceType:t,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(t=>{this.setImageToForm(`data:image/jpeg;base64,${t}`)})}getBlobFile(t){return new Promise((e,n)=>{fetch(t).then(t=>t.blob()).then(t=>{const n=new Blob([t],{type:"image/jpeg"});e(n)},t=>{n(t)})})}setImageToForm(t){this.selectedImage=t,this.fg.controls.payment_proof.patchValue(t),this.fg.controls.payment_proof.markAsDirty()}submit(){this.fg.valid?this.getBlobFile(this.selectedImage).then(t=>{this.transactionSrv.uploadPaymentProof(this.orderId,{image:t,payment_name:this.fg.value.name,payment_bank:this.fg.value.bank_name}).then(t=>{this.paymentSentModal()}).catch(t=>{this.toastSrv.show(t.error.error.message)})}):this.gs.markDirtyForm(this.fg)}paymentSentModal(){return Object(w.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:S});return t.onDidDismiss().then(t=>{this.router.navigate(["/tabs","home"])}),yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(a.d),l.Ob(i.d),l.Ob(g.a),l.Ob(r.a),l.Ob(k.a),l.Ob(a.c),l.Ob(s.g),l.Ob(r.eb),l.Ob(s.a),l.Ob(b.l),l.Ob(a.e),l.Ob(r.fb),l.Ob(r.hb))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-payment-proof"]],decls:34,vars:15,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back-outline",3,"defaultHref","click"],[3,"fullscreen"],[3,"formGroup","ngSubmit"],["paymentForm","ngForm"],["lines","none",1,"form-group"],["position","stacked"],["formControlName","name","placeholder","Full Name",1,"default-theme"],[4,"ngIf"],["formControlName","bank_name","placeholder","Bank Name",1,"default-theme"],[1,"padding-form","ion-padding"],["size","12",1,"form-group","ion-padding-bottom"],["size","12",1,"ion-text-center","upload-field",3,"click"],["width","80%","class","img-proof",3,"src",4,"ngIf"],[1,"ion-padding"],["color","success","expand","block","shape","round",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],["name","image-outline",1,"img-upload"],[1,"text-upload"],["width","80%",1,"img-proof",3,"src"],["name","dots","color","dark"]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"ion-header",0),l.Ub(1,"ion-toolbar",1),l.Ub(2,"ion-buttons",2),l.Ub(3,"ion-back-button",3),l.cc("click",function(){return e.goBack()}),l.Tb(),l.Tb(),l.Ub(4,"ion-title"),l.Dc(5),l.fc(6,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Ub(7,"ion-content",4),l.Ub(8,"form",5,6),l.cc("ngSubmit",function(){return e.submit()}),l.Ub(10,"ion-item",7),l.Ub(11,"ion-label",8),l.Dc(12,"Full Name"),l.Tb(),l.Pb(13,"ion-input",9),l.Bc(14,x,2,1,"small",10),l.Tb(),l.Ub(15,"ion-item",7),l.Ub(16,"ion-label",8),l.Dc(17,"Bank Name"),l.Tb(),l.Pb(18,"ion-input",11),l.Bc(19,M,2,1,"small",10),l.Tb(),l.Ub(20,"ion-row",12),l.Ub(21,"ion-col",13),l.Ub(22,"ion-label",8),l.Dc(23,"Payment Proof"),l.Tb(),l.Tb(),l.Ub(24,"ion-col",14),l.cc("click",function(){return e.showActionSheet()}),l.Bc(25,D,6,3,"div",10),l.Bc(26,F,1,1,"img",15),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(27,"ion-footer",0),l.Ub(28,"ion-row",16),l.Ub(29,"ion-col"),l.Ub(30,"ion-button",17),l.cc("click",function(){return l.vc(t),l.uc(9).ngSubmit.emit()}),l.Dc(31),l.fc(32,"translate"),l.Bc(33,I,1,0,"ion-spinner",18),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Cb(3),l.mc("defaultHref",e.previousUrl),l.Cb(2),l.Ec(l.gc(6,11,"PAYMENT")),l.Cb(2),l.mc("fullscreen",!0),l.Cb(1),l.mc("formGroup",e.fg),l.Cb(6),l.mc("ngIf",e.fg.controls.name.dirty),l.Cb(5),l.mc("ngIf",e.fg.controls.bank_name.dirty),l.Cb(6),l.mc("ngIf",!e.selectedImage),l.Cb(1),l.mc("ngIf",e.selectedImage),l.Cb(4),l.mc("disabled",e.isOnFetch),l.Cb(1),l.Fc(" ",l.gc(32,13,"NEXT")," "),l.Cb(2),l.mc("ngIf",e.isOnFetch))},directives:[r.t,r.bb,r.i,r.e,r.f,r.ab,r.p,i.y,i.q,i.i,r.y,r.C,r.x,r.mb,i.p,i.g,o.n,r.K,r.o,r.r,r.h,r.u,r.X,r.T],pipes:[h.a],styles:[".upload-field[_ngcontent-%COMP%]{color:#e2e2e2;padding:18.5px 16px 17px;border-radius:4px;border:1px solid #e7e7e7}.img-upload[_ngcontent-%COMP%]{font-size:30px}.text-upload[_ngcontent-%COMP%]{font-size:12px}"]}),t})();const E=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-payment"]],decls:1,vars:0,template:function(t,e){1&t&&l.Pb(0,"ion-router-outlet")},directives:[r.J],styles:[""]}),t})(),children:[{path:"list",component:P},{path:"cod",component:p},{path:"instruction",component:v},{path:":id/proof",component:B},{path:"",redirectTo:"list",pathMatch:"full"}]}];let A=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(E)],s.j]}),t})();var N=n("PCNd");let L=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[o.b,i.j,r.cb,A,N.a,i.v]]}),t})()}}]);