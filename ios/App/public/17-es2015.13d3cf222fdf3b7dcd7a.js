(window.webpackJsonp=window.webpackJsonp||[]).push([[17,37,38,39],{Cmua:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("mrSG"),s=i("fXoL"),r=i("TEn/");let o=(()=>{class e{constructor(e){this.alertController=e}presentAlert(e){return Object(n.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create(e);yield t.present()})}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(r.b))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},PCNd:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[n.b]]}),e})()},tJS4:function(e,t,i){"use strict";i.r(t),i.d(t,"AddressPageModule",function(){return G});var n=i("ofXK"),s=i("3Pt+"),r=i("TEn/"),o=i("tyNb"),c=i("mrSG"),l=i("XKlN"),d=i("J0a7"),a=i("H98O"),b=i("ZF+8"),u=i("Cmua"),f=i("/GFm"),h=i("fXoL"),g=i("1rxE");function m(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Fc(" ",null==e.fg.controls.receiver_name.errors||null==e.fg.controls.receiver_name.errors.required?null:e.fg.controls.receiver_name.errors.required.message," ")}}function p(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Ic("",null==e.fg.controls.phone.errors||null==e.fg.controls.phone.errors.required?null:e.fg.controls.phone.errors.required.message," ",null==e.fg.controls.phone.errors||null==e.fg.controls.phone.errors.numeric?null:e.fg.controls.phone.errors.numeric.message," ",null==e.fg.controls.phone.errors||null==e.fg.controls.phone.errors.minLength?null:e.fg.controls.phone.errors.minLength.message," ",null==e.fg.controls.phone.errors||null==e.fg.controls.phone.errors.maxLength?null:e.fg.controls.phone.errors.maxLength.message,"")}}function v(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Hc("",null==e.fg.controls.address_detail.errors||null==e.fg.controls.address_detail.errors.required?null:e.fg.controls.address_detail.errors.required.message," ",null==e.fg.controls.address_detail.errors||null==e.fg.controls.address_detail.errors.minLength?null:e.fg.controls.address_detail.errors.minLength.message," ",null==e.fg.controls.address_detail.errors||null==e.fg.controls.address_detail.errors.maxLength?null:e.fg.controls.address_detail.errors.maxLength.message,"")}}function _(e,t){if(1&e&&(h.Ub(0,"ion-select-option",34),h.Dc(1),h.fc(2,"titlecase"),h.Tb()),2&e){const e=t.$implicit;h.mc("value",null==e?null:e.province_id),h.Cb(1),h.Ec(h.gc(2,2,null==e?null:e.name))}}function C(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Ec(null==e.fg.controls.province_id.errors||null==e.fg.controls.province_id.errors.required?null:e.fg.controls.province_id.errors.required.message)}}function T(e,t){if(1&e&&(h.Ub(0,"ion-select-option",34),h.Dc(1),h.fc(2,"titlecase"),h.Tb()),2&e){const e=t.$implicit;h.mc("value",null==e?null:e.city_id),h.Cb(1),h.Ec(h.gc(2,2,null==e?null:e.name))}}function D(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Ec(null==e.fg.controls.city_id.errors||null==e.fg.controls.city_id.errors.required?null:e.fg.controls.city_id.errors.required.message)}}function U(e,t){if(1&e&&(h.Ub(0,"ion-select-option",34),h.Dc(1),h.fc(2,"titlecase"),h.Tb()),2&e){const e=t.$implicit;h.mc("value",null==e?null:e.district_id),h.Cb(1),h.Ec(h.gc(2,2,null==e?null:e.name))}}function E(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Ec(null==e.fg.controls.district_id.errors||null==e.fg.controls.district_id.errors.required?null:e.fg.controls.district_id.errors.required.message)}}function A(e,t){if(1&e&&(h.Ub(0,"ion-select-option",34),h.Dc(1),h.fc(2,"titlecase"),h.Tb()),2&e){const e=t.$implicit;h.mc("value",null==e?null:e.sub_district_id),h.Cb(1),h.Fc("",h.gc(2,2,(null==e?null:e.name)+"\n"+(null==e?null:e.postal_code))," ")}}function S(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Ec(null==e.fg.controls.sub_district_id.errors||null==e.fg.controls.sub_district_id.errors.required?null:e.fg.controls.sub_district_id.errors.required.message)}}function L(e,t){if(1&e&&(h.Ub(0,"small"),h.Dc(1),h.Tb()),2&e){const e=h.ec(2);h.Cb(1),h.Ec(null==e.fg.controls.address_name.errors||null==e.fg.controls.address_name.errors.required?null:e.fg.controls.address_name.errors.required.message)}}function I(e,t){if(1&e){const e=h.Vb();h.Ub(0,"form",13),h.Ub(1,"ion-item",14),h.Ub(2,"ion-label",15),h.Dc(3),h.fc(4,"translate"),h.Tb(),h.Pb(5,"ion-input",16),h.fc(6,"translate"),h.Bc(7,m,2,1,"small",17),h.Tb(),h.Ub(8,"ion-item",14),h.Ub(9,"ion-label",15),h.Dc(10),h.fc(11,"translate"),h.Tb(),h.Pb(12,"ion-input",18),h.fc(13,"translate"),h.Bc(14,p,2,4,"small",17),h.Tb(),h.Pb(15,"div",19),h.Ub(16,"ion-row",20),h.Ub(17,"ion-col",21),h.Ub(18,"ion-text"),h.Ub(19,"small"),h.Ub(20,"b"),h.Dc(21),h.fc(22,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(23,"ion-col",22),h.Ub(24,"ion-button",23),h.cc("click",function(){return h.vc(e),h.ec().presentModalPinLocation()}),h.Dc(25),h.fc(26,"translate"),h.Tb(),h.Tb(),h.Ub(27,"ion-col",24),h.Ub(28,"small"),h.Dc(29),h.Tb(),h.Tb(),h.Tb(),h.Ub(30,"ion-item",14),h.Ub(31,"ion-label",15),h.Dc(32),h.fc(33,"translate"),h.Tb(),h.Pb(34,"ion-textarea",25),h.fc(35,"translate"),h.Ub(36,"ion-row",26),h.Ub(37,"ion-col",21),h.Bc(38,v,2,3,"small",17),h.Tb(),h.Ub(39,"ion-col",22),h.Ub(40,"small",27),h.Dc(41),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(42,"ion-row"),h.Ub(43,"ion-col",21),h.Ub(44,"ion-item",14),h.Ub(45,"ion-label",15),h.Dc(46),h.fc(47,"translate"),h.Tb(),h.Ub(48,"ion-select",28),h.cc("ionChange",function(t){return h.vc(e),h.ec().onProvinceSelect(null==t||null==t.detail?null:t.detail.value)}),h.fc(49,"translate"),h.Bc(50,_,3,4,"ion-select-option",29),h.Tb(),h.Bc(51,C,2,1,"small",17),h.Tb(),h.Tb(),h.Ub(52,"ion-col",21),h.Ub(53,"ion-item",14),h.Ub(54,"ion-label",15),h.Dc(55),h.fc(56,"translate"),h.Tb(),h.Ub(57,"ion-select",30),h.cc("ionChange",function(t){return h.vc(e),h.ec().onCitySelect(null==t||null==t.detail?null:t.detail.value)}),h.fc(58,"translate"),h.Bc(59,T,3,4,"ion-select-option",29),h.Tb(),h.Bc(60,D,2,1,"small",17),h.Tb(),h.Tb(),h.Tb(),h.Ub(61,"ion-row"),h.Ub(62,"ion-col",21),h.Ub(63,"ion-item",14),h.Ub(64,"ion-label",15),h.Dc(65),h.fc(66,"translate"),h.Tb(),h.Ub(67,"ion-select",31),h.cc("ionChange",function(t){return h.vc(e),h.ec().onDistrictSelect(null==t||null==t.detail?null:t.detail.value)}),h.fc(68,"translate"),h.Bc(69,U,3,4,"ion-select-option",29),h.Tb(),h.Bc(70,E,2,1,"small",17),h.Tb(),h.Tb(),h.Ub(71,"ion-col",21),h.Ub(72,"ion-item",14),h.Ub(73,"ion-label",15),h.Dc(74),h.fc(75,"translate"),h.Tb(),h.Ub(76,"ion-select",32),h.fc(77,"translate"),h.Bc(78,A,3,4,"ion-select-option",29),h.Tb(),h.Bc(79,S,2,1,"small",17),h.Tb(),h.Tb(),h.Tb(),h.Ub(80,"ion-item",14),h.Ub(81,"ion-label",15),h.Dc(82),h.fc(83,"translate"),h.Tb(),h.Pb(84,"ion-input",33),h.fc(85,"translate"),h.Bc(86,L,2,1,"small",17),h.Tb(),h.Tb()}if(2&e){const e=h.ec();h.mc("formGroup",e.fg),h.Cb(3),h.Ec(h.gc(4,33,"RECEIVER_NAME")),h.Cb(2),h.nc("placeholder",h.gc(6,35,"RECEIVER_NAME_PLACEHOLDER")),h.Cb(2),h.mc("ngIf",e.fg.controls.receiver_name.dirty),h.Cb(3),h.Ec(h.gc(11,37,"PHONE_NUMBER")),h.Cb(2),h.nc("placeholder",h.gc(13,39,"PHONE_NUMBER_PLACEHOLDER")),h.Cb(2),h.mc("ngIf",e.fg.controls.phone.dirty),h.Cb(7),h.Ec(h.gc(22,41,"DELIVERY_ADDRESS")),h.Cb(4),h.Fc(" ",h.gc(26,43,"PIN_LOCATION")," "),h.Cb(4),h.Ec(e.fg.value.address),h.Cb(3),h.Ec(h.gc(33,45,"ADDRESS_DETAIL")),h.Cb(2),h.nc("placeholder",h.gc(35,47,"ADDRESS_DETAIL_PLACEHOLDER")),h.Cb(4),h.mc("ngIf",e.fg.controls.address_detail.dirty),h.Cb(3),h.Fc("",e.currentChar," / 100"),h.Cb(5),h.Ec(h.gc(47,49,"PROVINCE")),h.Cb(2),h.nc("placeholder",h.gc(49,51,"PROVINCE_PLACEHOLDER")),h.Cb(2),h.mc("ngForOf",e.provinceList),h.Cb(1),h.mc("ngIf",e.fg.controls.province_id.touched),h.Cb(4),h.Ec(h.gc(56,53,"CITY")),h.Cb(2),h.nc("placeholder",h.gc(58,55,"CITY_PLACEHOLDER")),h.Cb(2),h.mc("ngForOf",e.cityList),h.Cb(1),h.mc("ngIf",e.fg.controls.city_id.touched),h.Cb(5),h.Ec(h.gc(66,57,"DISTRICT")),h.Cb(2),h.nc("placeholder",h.gc(68,59,"DISTRICT_PLACEHOLDER")),h.Cb(2),h.mc("ngForOf",e.districtList),h.Cb(1),h.mc("ngIf",e.fg.controls.district_id.touched),h.Cb(4),h.Ec(h.gc(75,61,"SUB_DISTRICT")),h.Cb(2),h.nc("placeholder",h.gc(77,63,"SUB_DISTRICT_PLACEHOLDER")),h.Cb(2),h.mc("ngForOf",e.subDistrictList),h.Cb(1),h.mc("ngIf",e.fg.controls.sub_district_id.touched),h.Cb(3),h.Ec(h.gc(83,65,"ADDRESS_NAME")),h.Cb(2),h.nc("placeholder",h.gc(85,67,"ADDRESS_NAME_PLACEHOLDER")),h.Cb(2),h.mc("ngIf",e.fg.controls.address_name.dirty)}}function y(e,t){1&e&&h.Pb(0,"ion-spinner",35)}function O(e,t){1&e&&h.Pb(0,"ion-spinner",35)}function P(e,t){if(1&e){const e=h.Vb();h.Ub(0,"ion-col",6),h.Ub(1,"ion-button",36),h.cc("click",function(){return h.vc(e),h.ec().confirmDeleteAddress()}),h.Dc(2),h.fc(3,"translate"),h.Bc(4,O,1,0,"ion-spinner",11),h.Tb(),h.Tb()}if(2&e){const e=h.ec();h.Cb(1),h.mc("disabled",e.isOnFetch),h.Cb(1),h.Fc(" ",h.gc(3,3,"DELETE_ADDRESS")," "),h.Cb(2),h.mc("ngIf",e.isOnFetch)}}let R=(()=>{class e{constructor(e,t,i,n,s,r,o,c,l){this.activatedRoute=e,this.validatorSrv=t,this.fb=i,this.translateSrv=n,this.gs=s,this.addressSrv=r,this.navCtrl=o,this.alertSrv=c,this.modalCtrl=l,this.addressData=null,this.currentChar=0,this.provinceList=null,this.cityList=null,this.districtList=null,this.subDistrictList=null,this.addressId=null,this.isOnFetch=!1,this.observerParam(),this.fetchProvinces()}ngOnInit(){}ionViewDidEnter(){this.observeFetchState()}observeFetchState(){this.gs.observeOnFetch().subscribe(e=>{this.isOnFetch=e})}observerParam(){this.activatedRoute.params.subscribe(e=>{this.addressId=+(null==e?void 0:e.id),this.addressId?this.fetchAddressDetail(this.addressId):this.initAddressForm()})}fetchAddressDetail(e){this.addressSrv.getAddress(e).then(e=>{this.addressData=e,this.initAddressForm(this.addressData)})}initAddressForm(e=null){var t;this.validatorSrv.validatorErrorMessage(),this.fg=this.fb.group({receiver_name:[(null==e?void 0:e.receiver_name)?null==e?void 0:e.receiver_name:null,l.c.required()],phone:[(null==e?void 0:e.phone)?null==e?void 0:e.phone:null,[l.c.required(),l.c.numeric(),l.c.minLength({value:7,message:`${this.translateSrv.get("VALIDATOR_MIN")} 7`}),l.c.maxLength({value:15,message:`${this.translateSrv.get("VALIDATOR_MAX")} 15`})]],latitude:[null==e?void 0:e.latitude,[l.c.required(),l.c.latitude()]],longitude:[null==e?void 0:e.longitude,[l.c.required(),l.c.longitude()]],address:[(null==e?void 0:e.address)?null==e?void 0:e.address:"-",[l.c.required()]],address_detail:[(null==e?void 0:e.address_detail)?null==e?void 0:e.address_detail:null,[l.c.required(),l.c.minLength({value:8,message:`${this.translateSrv.get("VALIDATOR_MIN")} 8`}),l.c.maxLength({value:100,message:`${this.translateSrv.get("VALIDATOR_MAX")} 100`})]],province_id:[null===(t=null==e?void 0:e.province)||void 0===t?void 0:t.province_id,[l.c.required()]],city_id:[{value:null,disabled:!0},[l.c.required()]],district_id:[{value:null,disabled:!0},[l.c.required()]],sub_district_id:[{value:null,disabled:!0},[l.c.required()]],address_name:[null==e?void 0:e.address_name,[l.c.required()]]}),this.countCurrentChar(),e&&setTimeout(()=>{var t,i,n,s;this.initAreaList(null===(t=null==e?void 0:e.province)||void 0===t?void 0:t.province_id,null===(i=null==e?void 0:e.city)||void 0===i?void 0:i.city_id,null===(n=null==e?void 0:e.district)||void 0===n?void 0:n.district_id,null===(s=null==e?void 0:e.sub_district)||void 0===s?void 0:s.sub_district_id)},1e3)}submit(){this.fg.valid&&(this.addressId?this.updateAddress(this.fg,this.addressId):this.addAddress(this.fg.value))}addAddress(e){this.addressSrv.createAddress(e).then(()=>{this.navCtrl.back()})}updateAddress(e,t){const i=this.gs.getChangedFormProperties(e);this.addressSrv.putAddress(i,t).then(()=>{this.navCtrl.back()})}countCurrentChar(){this.fg.controls.address_detail.valueChanges.subscribe(e=>{this.currentChar=this.gs.countChar(e)})}initAreaList(e,t,i,n){const s=this.fg.controls;s.province_id.setValue(e),this.fg.updateValueAndValidity(),this.fetchCities(e).then(()=>{s.city_id.setValue(t),s.city_id.enable(),this.fg.updateValueAndValidity(),this.fetchDistricts(t).then(()=>{s.district_id.setValue(i),s.district_id.enable(),this.fg.updateValueAndValidity(),this.fetchSubDistricts(i).then(()=>{s.sub_district_id.setValue(n),s.sub_district_id.enable(),this.fg.updateValueAndValidity()})})})}fetchProvinces(){return Object(c.a)(this,void 0,void 0,function*(){yield this.addressSrv.getProvinces().then(e=>{this.provinceList=e})})}fetchCities(e){return Object(c.a)(this,void 0,void 0,function*(){yield this.addressSrv.getCities(e).then(e=>{this.cityList=e})})}fetchDistricts(e){return Object(c.a)(this,void 0,void 0,function*(){yield this.addressSrv.getDistricts(e).then(e=>{this.districtList=e})})}fetchSubDistricts(e){return Object(c.a)(this,void 0,void 0,function*(){yield this.addressSrv.getSubDistricts(e).then(e=>{this.subDistrictList=e})})}onProvinceSelect(e){const t=this.fg.controls;t.city_id.setValue(null),t.city_id.enable(),t.district_id.setValue(null),t.district_id.disable(),this.fetchCities(e)}onCitySelect(e){const t=this.fg.controls;e&&(t.district_id.setValue(null),t.district_id.enable(),this.fetchDistricts(e))}onDistrictSelect(e){const t=this.fg.controls;e&&(t.sub_district_id.setValue(null),t.sub_district_id.enable(),this.fetchSubDistricts(e))}confirmDeleteAddress(){this.alertSrv.presentAlert({message:`${this.translateSrv.get("DELETE_ADDRESS_CONFIRM")}`,buttons:[{text:"Ok",handler:()=>{this.deleteAddress()}},{text:`${this.translateSrv.get("CANCEL")}`,role:"cancel"}]})}deleteAddress(){this.addressSrv.deleteAddress(this.addressId).then(()=>{this.navCtrl.back()})}presentModalPinLocation(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:d.a,componentProps:{longitude:this.fg.value.longitude,latitude:this.fg.value.latitude}});return e.onWillDismiss().then(e=>{var t;const i=e.data;if(i){const e=this.fg.controls;e.longitude.setValue(i.coordinate.longitude),e.latitude.setValue(i.coordinate.latitude),e.address.setValue(null===(t=null==i?void 0:i.addressData)||void 0===t?void 0:t.formatted_address),e.longitude.markAsDirty(),e.latitude.markAsDirty(),e.address.markAsDirty()}}),yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(o.a),h.Ob(b.d),h.Ob(s.d),h.Ob(a.a),h.Ob(b.c),h.Ob(f.a),h.Ob(r.fb),h.Ob(u.a),h.Ob(r.eb))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-address-form"]],decls:22,vars:12,consts:[[1,"ion-no-border"],["mode","ios"],["slot","start","mode","md"],["icon","chevron-back"],[1,"ion-margin-top","ion-no-padding","h-100"],[1,"ion-justify-content-between"],["size","12"],[3,"formGroup",4,"ngIf"],[1,"ion-no-border","ion-padding-horizontal"],[2,"background","white"],["expand","block","shape","round","color","limegreen",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],["size","12",4,"ngIf"],[3,"formGroup"],["lines","none",1,"form-group"],["position","stacked"],["type","text","formControlName","receiver_name",1,"default-theme",3,"placeholder"],[4,"ngIf"],["type","tel","formControlName","phone",1,"default-theme",3,"placeholder"],[1,"divider"],[1,"ion-align-items-center","ion-padding-horizontal","ion-padding-bottom"],["size","6",1,"ion-no-padding"],["size","6",1,"ion-no-padding","ion-text-right"],["fill","outline","size","small","color","primary",3,"click"],["size","12",1,"ion-no-padding"],["formControlName","address_detail","rows","6",3,"placeholder"],[1,"ion-no-padding"],[1,"count"],["formControlName","province_id",3,"placeholder","ionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","city_id",3,"placeholder","ionChange"],["formControlName","district_id",3,"placeholder","ionChange"],["formControlName","sub_district_id",1,"custom-options",3,"placeholder"],["type","text","formControlName","address_name",1,"default-theme",3,"placeholder"],[3,"value"],["name","dots","color","dark"],["expand","block","fill","outline","color","limegreen",3,"disabled","click"]],template:function(e,t){1&e&&(h.Ub(0,"ion-header",0),h.Ub(1,"ion-toolbar",1),h.Ub(2,"ion-buttons",2),h.Pb(3,"ion-back-button",3),h.Tb(),h.Ub(4,"ion-title"),h.Dc(5),h.fc(6,"translate"),h.fc(7,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(8,"ion-content"),h.Ub(9,"ion-grid",4),h.Ub(10,"ion-row",5),h.Ub(11,"ion-col",6),h.Bc(12,I,87,69,"form",7),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(13,"ion-footer",8),h.Ub(14,"ion-grid",9),h.Ub(15,"ion-row"),h.Ub(16,"ion-col",6),h.Ub(17,"ion-button",10),h.cc("click",function(){return t.submit()}),h.Dc(18),h.fc(19,"translate"),h.Bc(20,y,1,0,"ion-spinner",11),h.Tb(),h.Tb(),h.Bc(21,P,5,5,"ion-col",12),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Cb(5),h.Ec(t.addressId?h.gc(6,6,"UPDATE_ADDRESS"):h.gc(7,8,"ADD_NEW_ADDRESS")),h.Cb(7),h.mc("ngIf",t.fg),h.Cb(5),h.mc("disabled",(null==t.fg?null:t.fg.invalid)||t.isOnFetch),h.Cb(1),h.Fc(" ",h.gc(19,10,"SAVE")," "),h.Cb(2),h.mc("ngIf",t.isOnFetch),h.Cb(1),h.mc("ngIf",t.addressId&&!(null!=t.addressData&&t.addressData.is_default)))},directives:[r.t,r.bb,r.i,r.e,r.f,r.ab,r.p,r.s,r.K,r.o,n.n,r.r,r.h,s.y,s.q,s.i,r.y,r.C,r.x,r.mb,s.p,s.g,r.X,r.Y,r.O,r.lb,n.m,r.P,r.T],pipes:[g.a,n.t],styles:[""]}),e})();var x=i("LF58");function k(e,t){if(1&e&&(h.Ub(0,"ion-col",10),h.Ub(1,"ion-text",11),h.Ub(2,"small"),h.Dc(3),h.fc(4,"translate"),h.fc(5,"translate"),h.Tb(),h.Tb(),h.Tb()),2&e){const e=h.ec(2);h.Cb(3),h.Ec(e.isSelectMode?h.gc(4,1,"SELECTED"):h.gc(5,3,"PRIMARY"))}}function M(e,t){1&e&&(h.Ub(0,"ion-col",10),h.Ub(1,"ion-text",11),h.Ub(2,"small"),h.Dc(3),h.fc(4,"translate"),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Cb(3),h.Ec(h.gc(4,1,"SELECTED")))}const F=function(e){return["/address/form",e]};function w(e,t){if(1&e&&(h.Ub(0,"ion-col",6),h.Ub(1,"ion-button",12),h.Dc(2),h.fc(3,"translate"),h.Tb(),h.Tb()),2&e){const e=h.ec().$implicit;h.Cb(1),h.mc("routerLink",h.rc(4,F,e.address_id)),h.Cb(1),h.Fc(" ",h.gc(3,2,"EDIT_ADDRESS")," ")}}function V(e,t){if(1&e){const e=h.Vb();h.Ub(0,"ion-col",6),h.Ub(1,"ion-button",13),h.cc("click",function(){h.vc(e);const t=h.ec().$implicit;return h.ec().setAsDefaultAddress(null==t?null:t.address_id)}),h.Dc(2),h.fc(3,"translate"),h.fc(4,"translate"),h.Tb(),h.Tb()}if(2&e){const e=h.ec(2);h.Cb(2),h.Fc(" ",e.isSelectMode?h.gc(3,1,"USE_ADDRESS"):h.gc(4,3,"SET_DEFAULT")," ")}}function q(e,t){if(1&e){const e=h.Vb();h.Ub(0,"ion-col",6),h.Ub(1,"ion-button",13),h.cc("click",function(){h.vc(e);const t=h.ec().$implicit;return h.ec().setAsDefaultAddress(null==t?null:t.address_id)}),h.Dc(2),h.fc(3,"translate"),h.fc(4,"translate"),h.Tb(),h.Tb()}if(2&e){const e=h.ec(2);h.Cb(2),h.Fc(" ",e.isSelectMode?h.gc(3,1,"USE_ADDRESS"):h.gc(4,3,"SET_DEFAULT")," ")}}function N(e,t){if(1&e&&(h.Sb(0),h.Ub(1,"ion-card",1),h.Ub(2,"ion-card-content"),h.Ub(3,"ion-row",2),h.Ub(4,"ion-col",3),h.Ub(5,"span",4),h.Ub(6,"b"),h.Dc(7),h.Tb(),h.Tb(),h.Tb(),h.Bc(8,k,6,5,"ion-col",5),h.Bc(9,M,5,3,"ion-col",5),h.Tb(),h.Ub(10,"ion-row"),h.Ub(11,"ion-col",6),h.Ub(12,"ion-text",7),h.Dc(13),h.Tb(),h.Tb(),h.Ub(14,"ion-col",6),h.Ub(15,"ion-text",8),h.Ub(16,"small"),h.Dc(17),h.Tb(),h.Tb(),h.Tb(),h.Ub(18,"ion-col",6),h.Ub(19,"ion-text",8),h.Ub(20,"small"),h.Dc(21),h.Tb(),h.Tb(),h.Tb(),h.Ub(22,"ion-col",6),h.Ub(23,"ion-text",8),h.Ub(24,"small"),h.Dc(25),h.fc(26,"titlecase"),h.fc(27,"lowercase"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(28,"ion-row"),h.Bc(29,w,4,6,"ion-col",9),h.Bc(30,V,5,5,"ion-col",9),h.Bc(31,q,5,5,"ion-col",9),h.Tb(),h.Tb(),h.Tb(),h.Rb()),2&e){const e=t.$implicit,i=h.ec();h.Cb(4),h.mc("size",null!=e&&e.is_default&&!i.selectedAddressId||i.selectedAddressId&&(null==e?null:e.address_id)==i.selectedAddressId?"8":"12"),h.Cb(3),h.Ec(null==e?null:e.address_name),h.Cb(1),h.mc("ngIf",(null==e?null:e.is_default)&&!i.selectedAddressId),h.Cb(1),h.mc("ngIf",i.selectedAddressId&&(null==e?null:e.address_id)==i.selectedAddressId),h.Cb(4),h.Fc(" ",null==e?null:e.receiver_name," "),h.Cb(4),h.Ec(null==e?null:e.phone),h.Cb(4),h.Ec(null==e?null:e.address_detail),h.Cb(4),h.Ec(h.gc(26,11,h.gc(27,13,null==e?null:e.formatted_address))),h.Cb(4),h.mc("ngIf",!i.isSelectMode),h.Cb(1),h.mc("ngIf",i.isSelectMode&&i.selectedAddressId&&(null==e?null:e.address_id)!=i.selectedAddressId),h.Cb(1),h.mc("ngIf",!(i.isSelectMode||null!=e&&e.is_default))}}let B=(()=>{class e{constructor(e,t,i,n,s){this.navCtrl=e,this.addressSrv=t,this.toast=i,this.router=n,this.route=s,this.addressList=null,this.isSelectMode=!0,this.action=new h.o,this.route.queryParams.subscribe(e=>{this.selectedAddressId=e.address_id?e.address_id:null})}ngOnInit(){}onUseAddress(e,t){t.stopPropagation(),e.is_default||this.setAsDefaultAddress(null==e?void 0:e.address_id)}setAsDefaultAddress(e){this.isSelectMode?this.router.navigate(["/checkout"],{queryParams:{address_id:e},replaceUrl:!0}):this.addressSrv.setDefaultAddress(e).then(e=>{this.toast.show(null==e?void 0:e.response),this.action.emit()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(r.fb),h.Ob(x.a),h.Ob(b.e),h.Ob(o.g),h.Ob(o.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-card-address"]],inputs:{addressList:"addressList",isSelectMode:"isSelectMode"},outputs:{action:"action"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"ion-border","ion-no-margin","ion-margin-bottom","card-address"],[1,"ion-align-items-center"],[1,"ion-no-padding",3,"size"],[1,"text-address-name"],["size","4","class","ion-text-right ion-no-padding",4,"ngIf"],["size","12",1,"ion-no-padding"],["color","primary","size","large",1,"text-receiver-name"],["color","medium"],["size","12","class","ion-no-padding",4,"ngIf"],["size","4",1,"ion-text-right","ion-no-padding"],["size","small",1,"text-chip"],["expand","block","fill","outline","color","primary","size","small",3,"routerLink"],["expand","block","fill","outline","color","primary","size","small",3,"click"]],template:function(e,t){1&e&&h.Bc(0,N,32,15,"ng-container",0),2&e&&h.mc("ngForOf",t.addressList)},directives:[n.m,r.j,r.k,r.K,r.o,n.n,r.X,r.h,r.kb,o.h],pipes:[n.t,n.k,g.a],styles:[".card-address[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #e7e7e7;box-shadow:none}.text-address-name[_ngcontent-%COMP%]{font-size:11px;font-weight:700;line-height:1.18;letter-spacing:normal;color:#353535}.text-receiver-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:1.21}.text-chip[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;background-color:#0f447a;color:#fff}ion-button[_ngcontent-%COMP%]{font-size:12px;font-weight:600}"]}),e})();const z=function(){return["/address/form"]},j=[{path:"",component:(()=>{class e{constructor(e,t){this.activatedRoute=e,this.addressSrv=t,this.listAddress=null,this.selectMode=!1,this.observeQueryParam()}ngOnInit(){}ionViewWillEnter(){this.fetchAddressList()}observeQueryParam(){this.activatedRoute.queryParams.subscribe(e=>{const t=null==e?void 0:e.mode;this.selectMode=!(!t||"select"!==t)})}fetchAddressList(e=null){this.addressSrv.getAddress().then(t=>{this.listAddress=t,e&&e.target.complete()}).catch(()=>{e.target.complete()})}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(o.a),h.Ob(x.a))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-address"]],decls:26,vars:14,consts:[[1,"ion-no-border"],["mode","ios"],["slot","start","mode","md"],["icon","chevron-back"],[3,"fullscreen"],["slot","fixed","pullFactor","1.2","pullMin","20","pullMax","80",3,"ionRefresh"],[1,"ion-padding-top","ion-padding-horizontal","h-100"],[1,"ion-justify-content-between","ion-align-items-center"],["size","6"],["size","6",1,"ion-text-right"],["color","primary"],[3,"routerLink"],["size","12"],[3,"addressList","isSelectMode","action"]],template:function(e,t){1&e&&(h.Ub(0,"ion-header",0),h.Ub(1,"ion-toolbar",1),h.Ub(2,"ion-buttons",2),h.Pb(3,"ion-back-button",3),h.Tb(),h.Ub(4,"ion-title"),h.Dc(5),h.fc(6,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(7,"ion-content",4),h.Ub(8,"ion-refresher",5),h.cc("ionRefresh",function(e){return t.fetchAddressList(e)}),h.Pb(9,"ion-refresher-content"),h.Tb(),h.Ub(10,"ion-grid",6),h.Ub(11,"ion-row",7),h.Ub(12,"ion-col",8),h.Ub(13,"span"),h.Ub(14,"b"),h.Dc(15),h.fc(16,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(17,"ion-col",9),h.Ub(18,"ion-text",10),h.Ub(19,"small",11),h.Ub(20,"b"),h.Dc(21),h.fc(22,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(23,"ion-row"),h.Ub(24,"ion-col",12),h.Ub(25,"app-card-address",13),h.cc("action",function(){return t.fetchAddressList()}),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Cb(5),h.Ec(h.gc(6,7,"ADDRESS_LIST")),h.Cb(2),h.mc("fullscreen",!0),h.Cb(8),h.Ec(h.gc(16,9,"ADDRESS_LIST")),h.Cb(4),h.mc("routerLink",h.qc(13,z)),h.Cb(2),h.Fc("+ ",h.gc(22,11,"ADD_NEW_ADDRESS"),""),h.Cb(4),h.mc("addressList",t.listAddress)("isSelectMode",t.selectMode))},directives:[r.t,r.bb,r.i,r.e,r.f,r.ab,r.p,r.H,r.I,r.s,r.K,r.o,r.X,r.kb,o.h,B],pipes:[g.a],styles:[""]}),e})()},{path:"form",component:R},{path:"form/:id",component:R}];let $=(()=>{class e{}return e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({factory:function(t){return new(t||e)},imports:[[o.j.forChild(j)],o.j]}),e})();var H=i("CNc/"),X=i("PCNd"),K=i("D8hA");let G=(()=>{class e{}return e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({factory:function(t){return new(t||e)},imports:[[n.b,s.j,r.cb,$,H.a,X.a,s.v,K.a]]}),e})()}}]);