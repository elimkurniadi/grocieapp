!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{fhSy:function(n,r,o){"use strict";o.r(r),o.d(r,"RegisterPageModule",function(){return ie});var i=o("ofXK"),c=o("3Pt+"),s=o("TEn/"),l=o("tyNb"),a=o("mrSG"),b=o("XKlN"),u=o("J0a7"),d=o("l9uC"),f=o("FIaY"),g=o("H98O"),m=o("ZF+8"),h=o("LF58"),p=o("/GFm"),v=o("FJ7I"),T=o("fXoL"),C=o("1rxE");function U(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Fc(" ",null==t.fg.controls.receiver_name.errors||null==t.fg.controls.receiver_name.errors.required?null:t.fg.controls.receiver_name.errors.required.message," ")}}function _(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ic("",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.required?null:t.fg.controls.phone.errors.required.message," ",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.numeric?null:t.fg.controls.phone.errors.numeric.message," ",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.minLength?null:t.fg.controls.phone.errors.minLength.message," ",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.maxLength?null:t.fg.controls.phone.errors.maxLength.message,"")}}function D(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Hc("",null==t.fg.controls.address_detail.errors||null==t.fg.controls.address_detail.errors.required?null:t.fg.controls.address_detail.errors.required.message," ",null==t.fg.controls.address_detail.errors||null==t.fg.controls.address_detail.errors.minLength?null:t.fg.controls.address_detail.errors.minLength.message," ",null==t.fg.controls.address_detail.errors||null==t.fg.controls.address_detail.errors.maxLength?null:t.fg.controls.address_detail.errors.maxLength.message,"")}}function E(e,n){if(1&e&&(T.Ub(0,"ion-select-option",43),T.Dc(1),T.fc(2,"titlecase"),T.Tb()),2&e){var t=n.$implicit;T.mc("value",null==t?null:t.province_id),T.Cb(1),T.Ec(T.gc(2,2,null==t?null:t.name))}}function y(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.province_id.errors||null==t.fg.controls.province_id.errors.required?null:t.fg.controls.province_id.errors.required.message)}}function S(e,n){if(1&e&&(T.Ub(0,"ion-select-option",43),T.Dc(1),T.fc(2,"titlecase"),T.Tb()),2&e){var t=n.$implicit;T.mc("value",null==t?null:t.city_id),T.Cb(1),T.Ec(T.gc(2,2,null==t?null:t.name))}}function O(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.city_id.errors||null==t.fg.controls.city_id.errors.required?null:t.fg.controls.city_id.errors.required.message)}}function w(e,n){if(1&e&&(T.Ub(0,"ion-select-option",43),T.Dc(1),T.fc(2,"titlecase"),T.Tb()),2&e){var t=n.$implicit;T.mc("value",null==t?null:t.district_id),T.Cb(1),T.Ec(T.gc(2,2,null==t?null:t.name))}}function I(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.district_id.errors||null==t.fg.controls.district_id.errors.required?null:t.fg.controls.district_id.errors.required.message)}}function k(e,n){if(1&e&&(T.Ub(0,"ion-select-option",43),T.Dc(1),T.fc(2,"titlecase"),T.Tb()),2&e){var t=n.$implicit;T.mc("value",null==t?null:t.sub_district_id),T.Cb(1),T.Ec(T.gc(2,2,(null==t?null:t.name)+" - "+(null==t?null:t.postal_code)))}}function L(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.sub_district_id.errors||null==t.fg.controls.sub_district_id.errors.required?null:t.fg.controls.sub_district_id.errors.required.message)}}function P(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.address_name.errors||null==t.fg.controls.address_name.errors.required?null:t.fg.controls.address_name.errors.required.message)}}function R(e,n){1&e&&T.Pb(0,"ion-spinner",44)}var A,N,q=((A=function(){function n(t,r,o,i,c,s,l,a,b,u,d,f){e(this,n),this.activatedRoute=t,this.router=r,this.fb=o,this.validatorSrv=i,this.userSrv=c,this.translateSrv=s,this.gs=l,this.modalCtrl=a,this.addressSrv=b,this.settingSrv=u,this.toastSrv=d,this.cache=f,this.prefixFormValue=null,this.currentChar=0,this.provinceList=[],this.cityList=[],this.districtList=[],this.subDistrictList=[],this.isOnFetch=!1,this.observeQueryParams(),this.initRegisterFormStepTwo()}return t(n,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.observeFetchState()}},{key:"observeFetchState",value:function(){var e=this;this.gs.observeOnFetch().subscribe(function(n){e.isOnFetch=n})}},{key:"observeQueryParams",value:function(){var e=this.activatedRoute.snapshot.queryParamMap.get("prefix");e?this.prefixFormValue=JSON.parse(e):this.router.navigate(["/registers"])}},{key:"initRegisterFormStepTwo",value:function(){var e,n,t,r;this.validatorSrv.validatorErrorMessage(),this.fg=this.fb.group({receiver_name:[null===(e=this.prefixFormValue)||void 0===e?void 0:e.full_name,b.c.required()],phone:[null===(n=this.prefixFormValue)||void 0===n?void 0:n.phone,[b.c.required(),b.c.numeric(),b.c.minLength({value:7,message:"".concat(this.translateSrv.get("VALIDATOR_MIN")," 7")}),b.c.maxLength({value:15,message:"".concat(this.translateSrv.get("VALIDATOR_MAX")," 15")})]],latitude:[null,[b.c.required(),b.c.latitude()]],longitude:[null,[b.c.required(),b.c.longitude()]],address:["-",[b.c.required()]],address_detail:[null,[b.c.required(),b.c.minLength({value:8,message:"".concat(this.translateSrv.get("VALIDATOR_MIN")," 8")}),b.c.maxLength({value:100,message:"".concat(this.translateSrv.get("VALIDATOR_MAX")," 100")})]],province_id:[null,[b.c.required()]],city_id:[{value:null,disabled:!0},[b.c.required()]],district_id:[{value:null,disabled:!0},[b.c.required()]],sub_district_id:[{value:null,disabled:!0},[b.c.required()]],address_name:[null,[b.c.required()]],tos:[!1,b.c.requiredTrue()],token:[(null===(r=null===(t=this.cache.googleUserInfo)||void 0===t?void 0:t.authentication)||void 0===r?void 0:r.idToken)||this.cache.fbToken]}),this.countCurrentChar(),this.fetchProvinces()}},{key:"register",value:function(){var e=this;if(this.fg.valid){var n=this.combineFormValues(),t=null;this.cache.googleUserInfo?t="/google":this.cache.fbToken&&(t="/facebook"),this.userSrv.register(n,t).then(function(){e.cache.clearSocialInfo(),e.router.navigate(["/tabs","home"])})}}},{key:"combineFormValues",value:function(){var e=this.fg.value;return Object.assign(Object.assign({},this.prefixFormValue),e)}},{key:"countCurrentChar",value:function(){var e=this;this.fg.controls.address_detail.valueChanges.subscribe(function(n){e.currentChar=e.gs.countChar(n)})}},{key:"showModalOtp",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:f.a});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"fetchProvinces",value:function(){var e=this;this.addressSrv.getProvinces().then(function(n){e.provinceList=n})}},{key:"fetchCities",value:function(e){var n=this;this.addressSrv.getCities(e).then(function(e){n.cityList=e})}},{key:"fetchDistricts",value:function(e){var n=this;this.addressSrv.getDistricts(e).then(function(e){n.districtList=e})}},{key:"fetchSubDistricts",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var t=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.addressSrv.getSubDistricts(e).then(function(e){t.subDistrictList=e});case 2:case"end":return n.stop()}},n,this)}))}},{key:"onProvinceSelect",value:function(e){var n=this.fg.controls;n.city_id.setValue(null),n.city_id.enable(),n.district_id.setValue(null),n.district_id.disable(),this.fetchCities(e)}},{key:"onCitySelect",value:function(e){var n=this.fg.controls;e&&(n.district_id.setValue(null),n.district_id.enable(),this.fetchDistricts(e))}},{key:"onDistrictSelect",value:function(e){var n=this.fg.controls;e&&(n.sub_district_id.setValue(null),n.sub_district_id.enable(),this.fetchSubDistricts(e))}},{key:"presentModalPinLocation",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:u.a,componentProps:{longitude:this.fg.value.longitude,latitude:this.fg.value.latitude}});case 2:return(n=e.sent).onDidDismiss().then(function(e){var n,r=e.data;if(r){var o=t.fg.controls;o.longitude.setValue(r.coordinate.longitude),o.latitude.setValue(r.coordinate.latitude),o.address.setValue(null===(n=null==r?void 0:r.addressData)||void 0===n?void 0:n.formatted_address),o.longitude.markAsDirty(),o.latitude.markAsDirty(),o.address.markAsDirty()}}),e.next=6,n.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"showTnc",value:function(){var e=this;this.settingSrv.getTnc().then(function(n){var t=n.response;t.name=e.translateSrv.get("TERMS_CONDITIONS"),e.showSettingModal(t)}).catch(function(n){e.toastSrv.show(n.error.error.message)})}},{key:"showSettingModal",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalCtrl.create({component:d.a,componentProps:{title:e.name,content:e.content}});case 2:return t=n.sent,n.next=5,t.present();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}}]),n}()).\u0275fac=function(e){return new(e||A)(T.Ob(l.a),T.Ob(l.g),T.Ob(c.d),T.Ob(m.d),T.Ob(v.a),T.Ob(g.a),T.Ob(m.c),T.Ob(s.eb),T.Ob(p.a),T.Ob(h.k),T.Ob(m.e),T.Ob(m.b))},A.\u0275cmp=T.Ib({type:A,selectors:[["app-register-step-two"]],decls:138,vars:90,consts:[[1,"ion-no-border"],["mode","ios"],["slot","start","mode","md"],["icon","chevron-back"],[1,"ion-padding-horizontal"],["size","12",1,"ion-padding"],["size","5.5",1,"ion-text-center","stepper"],["size","1"],["size","12",1,"ion-padding-horizontal"],[1,"ion-padding-top","ion-padding-horizontal","h-100"],[1,"ion-justify-content-between"],[3,"formGroup"],[1,"form-group"],["lines","none",1,"form-group"],["position","stacked"],["type","text","formControlName","receiver_name",1,"default-theme",3,"placeholder"],[4,"ngIf"],["type","tel","formControlName","phone",1,"default-theme",3,"placeholder"],[1,"ion-align-items-center","ion-padding-vertical"],["size","6",1,"ion-no-padding"],["size","small"],["size","6",1,"ion-no-padding","ion-text-right"],["fill","outline","shape","round","size","small","color","secondary",3,"click"],["size","12",1,"ion-no-padding"],["formControlName","address_detail","rows","6",3,"placeholder"],[1,"ion-no-padding"],[1,"count"],["size","6",1,"ion-padding-end","ion-no-padding"],["lines","none"],["formControlName","province_id",3,"placeholder","ionChange"],[3,"value",4,"ngFor","ngForOf"],["size","6",1,"ion-padding-start","ion-no-padding"],["formControlName","city_id",3,"placeholder","ionChange"],["formControlName","district_id",3,"placeholder","ionChange"],["formControlName","sub_district_id",3,"placeholder"],["type","text","formControlName","address_name",1,"default-theme",3,"placeholder"],[1,"form-group","ion-padding-vertical"],[1,"ion-padding-top"],["formControlName","tos",1,"ion-margin-end"],[3,"click"],[1,"ion-no-border","ion-padding-horizontal"],["expand","block","shape","round","color","success",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],[3,"value"],["name","dots","color","dark"]],template:function(e,n){1&e&&(T.Ub(0,"ion-header",0),T.Ub(1,"ion-toolbar",1),T.Ub(2,"ion-buttons",2),T.Pb(3,"ion-back-button",3),T.Tb(),T.Ub(4,"ion-title"),T.Dc(5),T.fc(6,"translate"),T.Tb(),T.Tb(),T.Ub(7,"ion-row",4),T.Ub(8,"ion-col",5),T.Ub(9,"ion-row"),T.Ub(10,"ion-col",6),T.Ub(11,"small"),T.Dc(12),T.fc(13,"translate"),T.Tb(),T.Tb(),T.Ub(14,"ion-col",7),T.Dc(15," \xa0 "),T.Tb(),T.Ub(16,"ion-col",6),T.Ub(17,"small"),T.Dc(18),T.fc(19,"translate"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(20,"ion-col",8),T.Ub(21,"span"),T.Ub(22,"b"),T.Dc(23),T.fc(24,"translate"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(25,"ion-content"),T.Ub(26,"ion-grid",9),T.Ub(27,"ion-row",10),T.Ub(28,"ion-col",8),T.Ub(29,"form",11),T.Ub(30,"div",12),T.Ub(31,"ion-item",13),T.Ub(32,"ion-label",14),T.Dc(33),T.fc(34,"translate"),T.Tb(),T.Pb(35,"ion-input",15),T.fc(36,"translate"),T.Bc(37,U,2,1,"small",16),T.Tb(),T.Tb(),T.Ub(38,"div",12),T.Ub(39,"ion-item",13),T.Ub(40,"ion-label",14),T.Dc(41),T.fc(42,"translate"),T.Tb(),T.Pb(43,"ion-input",17),T.fc(44,"translate"),T.Bc(45,_,2,4,"small",16),T.Tb(),T.Tb(),T.Ub(46,"ion-row",18),T.Ub(47,"ion-col",19),T.Ub(48,"ion-text",20),T.Ub(49,"small"),T.Dc(50),T.fc(51,"translate"),T.Tb(),T.Tb(),T.Tb(),T.Ub(52,"ion-col",21),T.Ub(53,"ion-button",22),T.cc("click",function(){return n.presentModalPinLocation()}),T.Dc(54),T.fc(55,"translate"),T.Tb(),T.Tb(),T.Ub(56,"ion-col",23),T.Ub(57,"small"),T.Dc(58),T.Tb(),T.Tb(),T.Tb(),T.Ub(59,"div",12),T.Ub(60,"ion-item",13),T.Ub(61,"ion-label",14),T.Dc(62),T.fc(63,"translate"),T.Tb(),T.Pb(64,"ion-textarea",24),T.fc(65,"translate"),T.Ub(66,"ion-row",25),T.Ub(67,"ion-col",19),T.Bc(68,D,2,3,"small",16),T.Tb(),T.Ub(69,"ion-col",21),T.Ub(70,"small",26),T.Dc(71),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(72,"ion-row"),T.Ub(73,"ion-col",27),T.Ub(74,"div",12),T.Ub(75,"ion-item",28),T.Ub(76,"ion-label",14),T.Dc(77),T.fc(78,"translate"),T.Tb(),T.Ub(79,"ion-select",29),T.cc("ionChange",function(e){return n.onProvinceSelect(null==e||null==e.detail?null:e.detail.value)}),T.fc(80,"translate"),T.Bc(81,E,3,4,"ion-select-option",30),T.Tb(),T.Tb(),T.Bc(82,y,2,1,"small",16),T.Tb(),T.Tb(),T.Ub(83,"ion-col",31),T.Ub(84,"div",12),T.Ub(85,"ion-item",28),T.Ub(86,"ion-label",14),T.Dc(87),T.fc(88,"translate"),T.Tb(),T.Ub(89,"ion-select",32),T.cc("ionChange",function(e){return n.onCitySelect(null==e||null==e.detail?null:e.detail.value)}),T.fc(90,"translate"),T.Bc(91,S,3,4,"ion-select-option",30),T.Tb(),T.Tb(),T.Bc(92,O,2,1,"small",16),T.Tb(),T.Tb(),T.Tb(),T.Ub(93,"ion-row"),T.Ub(94,"ion-col",27),T.Ub(95,"div",12),T.Ub(96,"ion-item",28),T.Ub(97,"ion-label",14),T.Dc(98),T.fc(99,"translate"),T.Tb(),T.Ub(100,"ion-select",33),T.cc("ionChange",function(e){return n.onDistrictSelect(null==e||null==e.detail?null:e.detail.value)}),T.fc(101,"translate"),T.Bc(102,w,3,4,"ion-select-option",30),T.Tb(),T.Tb(),T.Bc(103,I,2,1,"small",16),T.Tb(),T.Tb(),T.Ub(104,"ion-col",31),T.Ub(105,"div",12),T.Ub(106,"ion-item",28),T.Ub(107,"ion-label",14),T.Dc(108),T.fc(109,"translate"),T.Tb(),T.Ub(110,"ion-select",34),T.fc(111,"translate"),T.Bc(112,k,3,4,"ion-select-option",30),T.Tb(),T.Tb(),T.Bc(113,L,2,1,"small",16),T.Tb(),T.Tb(),T.Tb(),T.Ub(114,"div",12),T.Ub(115,"ion-item",28),T.Ub(116,"ion-label",14),T.Dc(117),T.fc(118,"translate"),T.Tb(),T.Pb(119,"ion-input",35),T.fc(120,"translate"),T.Tb(),T.Bc(121,P,2,1,"small",16),T.Tb(),T.Ub(122,"div",36),T.Ub(123,"div",37),T.Pb(124,"ion-checkbox",38),T.Ub(125,"ion-text",39),T.cc("click",function(){return n.showTnc()}),T.Dc(126),T.fc(127,"translate"),T.Tb(),T.Tb(),T.Ub(128,"small"),T.Dc(129),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(130,"ion-footer",40),T.Ub(131,"ion-grid"),T.Ub(132,"ion-row"),T.Ub(133,"ion-col"),T.Ub(134,"ion-button",41),T.cc("click",function(){return n.register()}),T.Dc(135),T.fc(136,"translate"),T.Bc(137,R,1,0,"ion-spinner",42),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&e&&(T.Cb(5),T.Ec(T.gc(6,42,"REGISTER")),T.Cb(7),T.Fc("",T.gc(13,44,"STEP")," 1"),T.Cb(6),T.Fc("",T.gc(19,46,"STEP")," 2 "),T.Cb(5),T.Ec(T.gc(24,48,"DELIVERY_INFORMATION")),T.Cb(6),T.mc("formGroup",n.fg),T.Cb(4),T.Ec(T.gc(34,50,"RECEIVER_NAME")),T.Cb(2),T.nc("placeholder",T.gc(36,52,"RECEIVER_NAME_PLACEHOLDER")),T.Cb(2),T.mc("ngIf",n.fg.controls.receiver_name.dirty),T.Cb(4),T.Ec(T.gc(42,54,"PHONE_NUMBER")),T.Cb(2),T.nc("placeholder",T.gc(44,56,"PHONE_NUMBER_PLACEHOLDER")),T.Cb(2),T.mc("ngIf",n.fg.controls.phone.dirty),T.Cb(5),T.Ec(T.gc(51,58,"DELIVERY_ADDRESS")),T.Cb(4),T.Fc(" ",T.gc(55,60,"PIN_LOCATION")," "),T.Cb(4),T.Ec(n.fg.value.address),T.Cb(4),T.Ec(T.gc(63,62,"ADDRESS_DETAIL")),T.Cb(2),T.nc("placeholder",T.gc(65,64,"ADDRESS_DETAIL_PLACEHOLDER")),T.Cb(4),T.mc("ngIf",n.fg.controls.address_detail.dirty),T.Cb(3),T.Fc("",n.currentChar," / 100"),T.Cb(6),T.Ec(T.gc(78,66,"PROVINCE")),T.Cb(2),T.nc("placeholder",T.gc(80,68,"PROVINCE_PLACEHOLDER")),T.Cb(2),T.mc("ngForOf",n.provinceList),T.Cb(1),T.mc("ngIf",n.fg.controls.province_id.touched),T.Cb(5),T.Ec(T.gc(88,70,"CITY")),T.Cb(2),T.nc("placeholder",T.gc(90,72,"CITY_PLACEHOLDER")),T.Cb(2),T.mc("ngForOf",n.cityList),T.Cb(1),T.mc("ngIf",n.fg.controls.city_id.touched),T.Cb(6),T.Ec(T.gc(99,74,"DISTRICT")),T.Cb(2),T.nc("placeholder",T.gc(101,76,"DISTRICT_PLACEHOLDER")),T.Cb(2),T.mc("ngForOf",n.districtList),T.Cb(1),T.mc("ngIf",n.fg.controls.district_id.touched),T.Cb(5),T.Ec(T.gc(109,78,"SUB_DISTRICT")),T.Cb(2),T.nc("placeholder",T.gc(111,80,"SUB_DISTRICT_PLACEHOLDER")),T.Cb(2),T.mc("ngForOf",n.subDistrictList),T.Cb(1),T.mc("ngIf",n.fg.controls.sub_district_id.touched),T.Cb(4),T.Ec(T.gc(118,82,"ADDRESS_NAME")),T.Cb(2),T.nc("placeholder",T.gc(120,84,"ADDRESS_NAME_PLACEHOLDER")),T.Cb(2),T.mc("ngIf",n.fg.controls.address_name.dirty),T.Cb(5),T.Ec(T.gc(127,86,"TOS_AGREEMENT")),T.Cb(3),T.Ec(null==n.fg.controls.tos.errors||null==n.fg.controls.tos.errors.requiredTrue?null:n.fg.controls.tos.errors.requiredTrue.message),T.Cb(5),T.mc("disabled",n.fg.invalid||n.isOnFetch),T.Cb(1),T.Fc(" ",T.gc(136,88,"NEXT")," "),T.Cb(2),T.mc("ngIf",n.isOnFetch))},directives:[s.t,s.bb,s.i,s.e,s.f,s.ab,s.K,s.o,s.p,s.s,c.y,c.q,c.i,s.y,s.C,s.x,s.mb,c.p,c.g,i.n,s.X,s.h,s.Y,s.O,s.lb,i.m,s.m,s.c,s.r,s.P,s.T],pipes:[C.a,i.t],styles:[""]}),A),F=o("6GTT"),M=o("tk/3"),x=((N=function(){function n(t,r){e(this,n),this.gs=t,this.http=r}return t(n,[{key:"getFbData",value:function(e){var n=this;return new Promise(function(t,r){var o=n.http.get("https://graph.facebook.com/me?fields=name,email,picture.width(400).height(400)&access_token=".concat(e));n.gs.pushSubscription(o),o.subscribe(function(e){t(e)},function(e){r(e)})})}}]),n}()).\u0275fac=function(e){return new(e||N)(T.Yb(F.a),T.Yb(M.b))},N.\u0275prov=T.Kb({token:N,factory:N.\u0275fac,providedIn:"root"}),N),V=o("3WbM"),z=o("wd/R");function B(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.full_name.errors||null==t.fg.controls.full_name.errors.required?null:t.fg.controls.full_name.errors.required.message)}}function Y(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Gc(" ",null==t.fg.controls.email.errors||null==t.fg.controls.email.errors.required?null:t.fg.controls.email.errors.required.message," ",null==t.fg.controls.email.errors||null==t.fg.controls.email.errors.email?null:t.fg.controls.email.errors.email.message," ")}}function H(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ic("",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.required?null:t.fg.controls.phone.errors.required.message," ",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.numeric?null:t.fg.controls.phone.errors.numeric.message," ",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.minLength?null:t.fg.controls.phone.errors.minLength.message," ",null==t.fg.controls.phone.errors||null==t.fg.controls.phone.errors.maxLength?null:t.fg.controls.phone.errors.maxLength.message,"")}}function j(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.gender.errors||null==t.fg.controls.gender.errors.required?null:t.fg.controls.gender.errors.required.message)}}function G(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Ec(null==t.fg.controls.birth_date.errors||null==t.fg.controls.birth_date.errors.required?null:t.fg.controls.birth_date.errors.required.message)}}function X(e,n){if(1&e&&(T.Ub(0,"small",33),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Gc("",null==t.fg.controls.password.errors||null==t.fg.controls.password.errors.required?null:t.fg.controls.password.errors.required.message," ",null==t.fg.controls.password.errors||null==t.fg.controls.password.errors.minLength?null:t.fg.controls.password.errors.minLength.message,"")}}function J(e,n){if(1&e&&(T.Ub(0,"small"),T.Dc(1),T.Tb()),2&e){var t=T.ec();T.Cb(1),T.Gc("",null==t.fg.controls.confirm_password.errors||null==t.fg.controls.confirm_password.errors.required?null:t.fg.controls.confirm_password.errors.required.message," ",null==t.fg.controls.confirm_password.errors||null==t.fg.controls.confirm_password.errors.compare?null:t.fg.controls.confirm_password.errors.compare.message,"")}}function K(e,n){1&e&&T.Pb(0,"ion-spinner",34)}var W,$,Q,Z=[{path:"",component:(W=function(){function n(t,r,o,i,c,s,l,a,b){e(this,n),this.fb=t,this.router=r,this.validatorSrv=o,this.translateSrv=i,this.userSrv=c,this.toastSrv=s,this.gs=l,this.cache=a,this.thirdPartySrv=b,this.currDate=z(new Date).tz(this.gs.timezoneName).format("YYYY-MM-DD"),this.passwordIsShow=!1,this.confPasswordIsShow=!1,this.isOnFetch=!1,this.googleInfo=null,this.fbInfo=null,this.googleInfo=this.cache.googleUserInfo}return t(n,[{key:"ngOnInit",value:function(){this.initRegisterFormStepOne()}},{key:"ionViewDidEnter",value:function(){this.observeFetchState()}},{key:"observeFetchState",value:function(){var e=this;this.gs.observeOnFetch().subscribe(function(n){e.isOnFetch=n})}},{key:"ngOnDestroy",value:function(){}},{key:"initRegisterFormStepOne",value:function(){var e,n;this.validatorSrv.validatorErrorMessage(),this.fg=this.fb.group({full_name:[null===(e=this.googleInfo)||void 0===e?void 0:e.displayName,[b.c.required()]],email:[null===(n=this.googleInfo)||void 0===n?void 0:n.email,[b.c.required(),b.c.email()]],phone:[null,[b.c.required(),b.c.numeric(),b.c.minLength({value:7,message:"".concat(this.translateSrv.get("VALIDATOR_MIN")," 7")}),b.c.maxLength({value:15,message:"".concat(this.translateSrv.get("VALIDATOR_MAX")," 15")})]],gender:["m",[b.c.required()]],birth_date:[this.currDate,[b.c.required()]],password:[null,[b.c.required(),b.c.minLength({value:5,message:"".concat(this.translateSrv.get("VALIDATOR_MIN")," 5")})]],confirm_password:[null,[b.c.required(),b.c.compare({fieldName:"password"})]]}),this.cache.fbToken&&this.getFbAccountInfo()}},{key:"onDateSelect",value:function(e){var n=z(e).tz(this.gs.timezoneName).format("YYYY-MM-DD");this.fg.controls.birth_date.patchValue(n)}},{key:"next",value:function(){var e=this;this.fg.valid&&this.userSrv.checkEmailPhoneAvailability(this.fg.value.email,this.fg.value.phone).then(function(){e.router.navigate(["/register/step-two"],{queryParams:{prefix:JSON.stringify(e.fg.value)}})}).catch(function(){var n=e.fg.controls;n.phone.reset(),n.email.reset(),n.phone.markAsDirty(),n.email.markAsDirty(),e.toastSrv.show(e.translateSrv.get("PHONE_EMAIL_TAKEN"))})}},{key:"getFbAccountInfo",value:function(){var e=this;this.thirdPartySrv.getFbData(this.cache.fbToken).then(function(n){e.fg.controls.full_name.patchValue(null==n?void 0:n.name),e.fg.controls.email.patchValue(null==n?void 0:n.email)}).catch(function(n){e.gs.log("err",n)})}}]),n}(),W.\u0275fac=function(e){return new(e||W)(T.Ob(c.d),T.Ob(l.g),T.Ob(m.d),T.Ob(g.a),T.Ob(v.a),T.Ob(V.a),T.Ob(m.c),T.Ob(m.b),T.Ob(x))},W.\u0275cmp=T.Ib({type:W,selectors:[["app-register"]],decls:103,vars:75,consts:[[1,"ion-no-border"],["mode","ios"],["slot","start","mode","md"],["icon","chevron-back"],[1,"ion-padding-horizontal"],["size","12",1,"ion-padding"],["size","5.5",1,"ion-text-center","stepper"],["color","primary"],["size","1"],["size","5.5",1,"ion-text-center","stepper","stepper-inactive"],[1,"ion-padding-horizontal","h-100"],[1,"ion-justify-content-between"],["size","12",1,"ion-padding-horizontal"],[3,"formGroup"],[1,"form-group"],["lines","none",1,"form-group"],["position","stacked"],["type","text","formControlName","full_name",1,"default-theme",3,"placeholder"],[4,"ngIf"],["type","email","formControlName","email",1,"default-theme",2,"--placeholder-color","blue !important",3,"placeholder","disabled"],["type","tel","formControlName","phone",1,"default-theme",3,"placeholder"],[1,"radio-wrapper-inline"],["type","radio","name","gender","formControlName","gender",1,"radio-input",3,"value"],[1,"radio-label"],["displayFormat","D MMMM YYYY","pickerFormat","D MMMM YYYY","formControlName","birth_date",3,"max","ionChange"],["lines","none"],["formControlName","password",1,"default-theme",3,"placeholder","type"],["size","small","slot","end",3,"name","click"],["class","ion-padding-left",4,"ngIf"],["formControlName","confirm_password",1,"default-theme",3,"placeholder","type"],[1,"ion-no-border","ion-padding-horizontal"],["expand","block","shape","round","color","success",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],[1,"ion-padding-left"],["name","dots","color","dark"]],template:function(e,n){1&e&&(T.Ub(0,"ion-header",0),T.Ub(1,"ion-toolbar",1),T.Ub(2,"ion-buttons",2),T.Pb(3,"ion-back-button",3),T.Tb(),T.Ub(4,"ion-title"),T.Dc(5),T.fc(6,"translate"),T.Tb(),T.Tb(),T.Ub(7,"ion-row",4),T.Ub(8,"ion-col",5),T.Ub(9,"ion-row"),T.Ub(10,"ion-col",6),T.Ub(11,"small",7),T.Dc(12),T.fc(13,"translate"),T.Tb(),T.Tb(),T.Ub(14,"ion-col",8),T.Dc(15," \xa0 "),T.Tb(),T.Ub(16,"ion-col",9),T.Ub(17,"small"),T.Dc(18),T.fc(19,"translate"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(20,"ion-content"),T.Ub(21,"ion-grid",10),T.Ub(22,"ion-row",11),T.Ub(23,"ion-col",12),T.Ub(24,"span"),T.Ub(25,"b"),T.Dc(26),T.fc(27,"translate"),T.Tb(),T.Tb(),T.Tb(),T.Ub(28,"ion-col",12),T.Ub(29,"form",13),T.Ub(30,"div",14),T.Ub(31,"ion-item",15),T.Ub(32,"ion-label",16),T.Dc(33),T.fc(34,"translate"),T.Tb(),T.Pb(35,"ion-input",17),T.fc(36,"translate"),T.Tb(),T.Bc(37,B,2,1,"small",18),T.Tb(),T.Ub(38,"div",14),T.Ub(39,"ion-item",15),T.Ub(40,"ion-label",16),T.Dc(41),T.fc(42,"translate"),T.Tb(),T.Pb(43,"ion-input",19),T.fc(44,"translate"),T.Tb(),T.Bc(45,Y,2,2,"small",18),T.Tb(),T.Ub(46,"div",14),T.Ub(47,"ion-item",15),T.Ub(48,"ion-label",16),T.Dc(49),T.fc(50,"translate"),T.Tb(),T.Pb(51,"ion-input",20),T.fc(52,"translate"),T.Tb(),T.Bc(53,H,2,4,"small",18),T.Tb(),T.Ub(54,"div",14),T.Ub(55,"ion-item",15),T.Ub(56,"ion-label",16),T.Dc(57),T.fc(58,"translate"),T.Tb(),T.Ub(59,"fieldset",21),T.Ub(60,"div"),T.Pb(61,"input",22),T.Ub(62,"label",23),T.Dc(63),T.fc(64,"translate"),T.Tb(),T.Pb(65,"input",22),T.Ub(66,"label",23),T.Dc(67),T.fc(68,"translate"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Bc(69,j,2,1,"small",18),T.Tb(),T.Ub(70,"div",14),T.Ub(71,"ion-item",15),T.Ub(72,"ion-label",16),T.Dc(73),T.fc(74,"translate"),T.Tb(),T.Ub(75,"ion-datetime",24),T.cc("ionChange",function(e){return n.onDateSelect(e.detail.value)}),T.Tb(),T.Tb(),T.Bc(76,G,2,1,"small",18),T.Tb(),T.Ub(77,"div",14),T.Ub(78,"ion-item",25),T.Ub(79,"ion-label",16),T.Dc(80),T.fc(81,"translate"),T.Tb(),T.Pb(82,"ion-input",26),T.fc(83,"translate"),T.Ub(84,"ion-icon",27),T.cc("click",function(){return n.passwordIsShow=!n.passwordIsShow}),T.Tb(),T.Tb(),T.Bc(85,X,2,2,"small",28),T.Tb(),T.Ub(86,"div",14),T.Ub(87,"ion-item",15),T.Ub(88,"ion-label",16),T.Dc(89),T.fc(90,"translate"),T.Tb(),T.Pb(91,"ion-input",29),T.fc(92,"translate"),T.Ub(93,"ion-icon",27),T.cc("click",function(){return n.confPasswordIsShow=!n.confPasswordIsShow}),T.Tb(),T.Tb(),T.Bc(94,J,2,2,"small",18),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(95,"ion-footer",30),T.Ub(96,"ion-grid"),T.Ub(97,"ion-row"),T.Ub(98,"ion-col"),T.Ub(99,"ion-button",31),T.cc("click",function(){return n.next()}),T.Dc(100),T.fc(101,"translate"),T.Bc(102,K,1,0,"ion-spinner",32),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&e&&(T.Cb(5),T.Ec(T.gc(6,37,"REGISTER")),T.Cb(7),T.Fc("",T.gc(13,39,"STEP")," 1 "),T.Cb(6),T.Fc("",T.gc(19,41,"STEP")," 2"),T.Cb(8),T.Ec(T.gc(27,43,"PERSONAL_INFORMATION")),T.Cb(3),T.mc("formGroup",n.fg),T.Cb(4),T.Ec(T.gc(34,45,"NAME")),T.Cb(2),T.nc("placeholder",T.gc(36,47,"NAME_PLACEHOLDER")),T.Cb(2),T.mc("ngIf",n.fg.controls.full_name.dirty),T.Cb(4),T.Ec(T.gc(42,49,"EMAIL_ADDRESS")),T.Cb(2),T.nc("placeholder",T.gc(44,51,"YOUR_EMAIL_ADDRESS")),T.mc("disabled",n.googleInfo),T.Cb(2),T.mc("ngIf",n.fg.controls.email.dirty),T.Cb(4),T.Ec(T.gc(50,53,"PHONE_NUMBER")),T.Cb(2),T.nc("placeholder",T.gc(52,55,"PHONE_NUMBER_PLACEHOLDER")),T.Cb(2),T.mc("ngIf",n.fg.controls.phone.dirty),T.Cb(4),T.Ec(T.gc(58,57,"GENDER")),T.Cb(4),T.mc("value","m"),T.Cb(2),T.Ec(T.gc(64,59,"MALE")),T.Cb(2),T.mc("value","f"),T.Cb(2),T.Ec(T.gc(68,61,"FEMALE")),T.Cb(2),T.mc("ngIf",n.fg.controls.gender.dirty),T.Cb(4),T.Ec(T.gc(74,63,"DOB")),T.Cb(2),T.mc("max",n.currDate),T.Cb(1),T.mc("ngIf",n.fg.controls.birth_date.dirty),T.Cb(4),T.Ec(T.gc(81,65,"PASSWORD")),T.Cb(2),T.nc("placeholder",T.gc(83,67,"YOUR_PASSWORD")),T.mc("type",n.passwordIsShow?"text":"password"),T.Cb(2),T.mc("name",n.passwordIsShow?"eye-off-outline":"eye-outline"),T.Cb(1),T.mc("ngIf",n.fg.controls.password.dirty),T.Cb(4),T.Ec(T.gc(90,69,"VERIFY_PASSWORD")),T.Cb(2),T.nc("placeholder",T.gc(92,71,"VERIFY_PASSWORD_PLACEHOLDER")),T.mc("type",n.confPasswordIsShow?"text":"password"),T.Cb(2),T.mc("name",n.confPasswordIsShow?"eye-off-outline":"eye-outline"),T.Cb(1),T.mc("ngIf",n.fg.controls.confirm_password.dirty),T.Cb(5),T.mc("disabled",n.fg.invalid||n.isOnFetch),T.Cb(1),T.Fc(" ",T.gc(101,73,"NEXT")," "),T.Cb(2),T.mc("ngIf",n.isOnFetch))},directives:[s.t,s.bb,s.i,s.e,s.f,s.ab,s.K,s.o,s.p,s.s,c.y,c.q,c.i,s.y,s.C,s.x,s.mb,c.p,c.g,i.n,c.u,c.b,s.q,s.lb,s.u,s.r,s.h,s.T],pipes:[C.a],styles:["*[_ngcontent-%COMP%]{background:#fff!important}.stepper[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:700;color:#0f447a}.stepper-inactive[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:700;color:#e5e5e5}"]}),W)},{path:"step-two",component:q}],ee=(($=function n(){e(this,n)}).\u0275mod=T.Mb({type:$}),$.\u0275inj=T.Lb({factory:function(e){return new(e||$)},imports:[[l.j.forChild(Z)],l.j]}),$),ne=o("6NWb"),te=o("PCNd"),re=o("Hljq"),oe=o("D8hA"),ie=((Q=function n(){e(this,n)}).\u0275mod=T.Mb({type:Q}),Q.\u0275inj=T.Lb({factory:function(e){return new(e||Q)},imports:[[i.b,c.j,s.cb,ee,ne.b,c.v,te.a,re.a,oe.a]]}),Q)},l9uC:function(n,r,o){"use strict";o.d(r,"a",function(){return s});var i=o("fXoL"),c=o("TEn/"),s=function(){var n=function(){function n(t){e(this,n),this.modalCtrl=t}return t(n,[{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(){this.modalCtrl.dismiss()}}]),n}();return n.\u0275fac=function(e){return new(e||n)(i.Ob(c.eb))},n.\u0275cmp=i.Ib({type:n,selectors:[["app-modal-setting"]],inputs:{title:"title",content:"content"},decls:7,vars:3,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["name","chevron-back-outline","slot","start",1,"ion-padding-start",3,"click"],[1,"header-title"],[1,"ion-padding",3,"fullscreen","innerHtml"]],template:function(e,n){1&e&&(i.Ub(0,"ion-header",0),i.Ub(1,"ion-toolbar",1),i.Ub(2,"ion-buttons",2),i.Ub(3,"ion-icon",3),i.cc("click",function(){return n.dismiss()}),i.Tb(),i.Tb(),i.Ub(4,"ion-title",4),i.Dc(5),i.Tb(),i.Tb(),i.Tb(),i.Pb(6,"ion-content",5)),2&e&&(i.Cb(5),i.Ec(n.title),i.Cb(1),i.mc("fullscreen",!0)("innerHtml",n.content,i.wc))},directives:[c.t,c.bb,c.i,c.u,c.ab,c.p],styles:[""]}),n}()}}])}();