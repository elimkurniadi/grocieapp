!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"9OaD":function(n,o,i){"use strict";i.d(o,"a",function(){return d}),i.d(o,"b",function(){return b});var r=i("fXoL"),s=i("3Pt+"),c=i("ofXK");function a(t,n){if(1&t){var e=r.Vb();r.Ub(0,"input",3),r.cc("keydown",function(t){return r.vc(e),r.ec(2).onKeyDown(t)})("keyup",function(t){r.vc(e);var o=n.index;return r.ec(2).onKeyUp(t,o)}),r.Tb()}if(2&t){var o=n.$implicit,i=n.index,s=r.ec(2);r.Fb("otp-input ",s.config.inputClass,""),r.pc("id","otp_",i,"_",s.componentKey,""),r.mc("pattern",s.config.allowNumbersOnly?"\\d*":"")("type",s.inputType)("placeholder",(null==s.config?null:s.config.placeholder)||"")("disabledNumberOnly",!s.config.allowNumbersOnly)("ngStyle",s.config.inputStyles)("formControl",s.otpForm.controls[o])}}function u(t,n){if(1&t&&(r.Ub(0,"div",1),r.Bc(1,a,1,11,"input",2),r.fc(2,"keys"),r.Tb()),2&t){var e=r.ec();r.Fb("wrapper ",e.config.containerClass,""),r.oc("id","c_",e.componentKey,""),r.mc("ngStyle",e.config.containerStyles),r.Cb(1),r.mc("ngForOf",r.gc(2,6,null==e.otpForm?null:e.otpForm.controls))}}var l=function(){var n=function(){function n(){t(this,n)}return e(n,[{key:"transform",value:function(t){return Object.keys(t)}}]),n}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=r.Nb({name:"keys",type:n,pure:!0}),n}(),b=function(){var n=function(){function n(e){t(this,n),this.keysPipe=e,this.config={length:4},this.onInputChange=new r.o,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}return e(n,[{key:"ngOnInit",value:function(){this.otpForm=new s.h({});for(var t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new s.e);this.inputType=this.getInputType()}},{key:"ngAfterViewInit",value:function(){var t=this;if(!this.config.disableAutoFocus){var n=document.getElementById("c_".concat(this.componentKey));if(n){n.addEventListener("paste",function(n){return t.handlePaste(n)});var e=n.getElementsByClassName("otp-input")[0];e&&e.focus&&e.focus()}}}},{key:"getControlName",value:function(t){return"ctrl_".concat(t)}},{key:"ifLeftArrow",value:function(t){return this.ifKeyCode(t,37)}},{key:"ifRightArrow",value:function(t){return this.ifKeyCode(t,39)}},{key:"ifBackspaceOrDelete",value:function(t){return"Backspace"===t.key||"Delete"===t.key||this.ifKeyCode(t,8)||this.ifKeyCode(t,46)}},{key:"ifKeyCode",value:function(t,n){return(t.keyCode||t.charCode)==n}},{key:"onKeyDown",value:function(t){if(this.ifKeyCode(t,32))return!1}},{key:"onKeyUp",value:function(t,n){var e=this.appendKey("otp_".concat(n+1)),o=this.appendKey("otp_"+(n-1));if(this.ifRightArrow(t))this.setSelected(e);else{if(!this.ifLeftArrow(t))return this.ifBackspaceOrDelete(t)&&!t.target.value?(this.setSelected(o),void this.rebuildValue()):void(t.target.value&&(this.ifValidEntry(t)&&this.setSelected(e),this.rebuildValue()));this.setSelected(o)}}},{key:"appendKey",value:function(t){return"".concat(t,"_").concat(this.componentKey)}},{key:"setSelected",value:function(t){this.focusTo(t);var n=document.getElementById(t);n&&n.setSelectionRange&&setTimeout(function(){n.setSelectionRange(0,1)},0)}},{key:"ifValidEntry",value:function(t){var n=String.fromCharCode(t.keyCode);return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(n)||this.config.allowKeyCodes&&this.config.allowKeyCodes.includes(t.keyCode)||t.keyCode>=96&&t.keyCode<=105}},{key:"focusTo",value:function(t){var n=document.getElementById(t);n&&n.focus()}},{key:"setValue",value:function(t){var n=this;if(!this.config.allowNumbersOnly||!isNaN(t))if(this.otpForm.reset(),t){if(t=t.toString().replace(/\s/g,""),Array.from(t).forEach(function(t,e){n.otpForm.get(n.getControlName(e))&&n.otpForm.get(n.getControlName(e)).setValue(t)}),!this.config.disableAutoFocus){var e=document.getElementById("c_".concat(this.componentKey)),o=t.length<this.config.length?t.length:this.config.length-1,i=e.getElementsByClassName("otp-input")[o];i&&i.focus&&i.focus()}this.rebuildValue()}else this.rebuildValue()}},{key:"rebuildValue",value:function(){var t=this,n="";this.keysPipe.transform(this.otpForm.controls).forEach(function(e){t.otpForm.controls[e].value&&(n+=t.otpForm.controls[e].value)}),this.onInputChange.emit(n)}},{key:"getInputType",value:function(){return this.config.isPasswordInput?"password":this.config.allowNumbersOnly?"tel":"text"}},{key:"handlePaste",value:function(t){var n=t.clipboardData||window.clipboardData;if(n)var e=n.getData("Text");t.stopPropagation(),t.preventDefault(),e&&this.setValue(e)}}]),n}();return n.\u0275fac=function(t){return new(t||n)(r.Ob(l))},n.\u0275cmp=r.Ib({type:n,selectors:[["ng-otp-input"]],inputs:{config:"config"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["numberOnly","","maxlength","1","autocomplete","off",3,"pattern","type","placeholder","disabledNumberOnly","ngStyle","class","formControl","id","keydown","keyup",4,"ngFor","ngForOf"],["numberOnly","","maxlength","1","autocomplete","off",3,"pattern","type","placeholder","disabledNumberOnly","ngStyle","formControl","id","keydown","keyup"]],template:function(t,n){1&t&&r.Bc(0,u,3,8,"div",0),2&t&&r.mc("ngIf",null==n.otpForm?null:n.otpForm.controls)},directives:function(){return[c.n,c.o,c.m,s.b,f,s.k,s.t,s.p,s.f]},pipes:function(){return[l]},styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:1px solid #c5c5c5;text-align:center;font-size:32px}.wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width:767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width:420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),n}(),f=function(){var n=function(){function n(e,o){t(this,n),this._elRef=e,this._renderer=o}return e(n,[{key:"ngOnInit",value:function(){this.disabledNumberOnly||this._renderer.setAttribute(this._elRef.nativeElement,"onkeypress","return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 0")}}]),n}();return n.\u0275fac=function(t){return new(t||n)(r.Ob(r.m),r.Ob(r.G))},n.\u0275dir=r.Jb({type:n,selectors:[["","numberOnly",""]],inputs:{disabledNumberOnly:"disabledNumberOnly"}}),n}(),d=function(){var n=function n(){t(this,n)};return n.\u0275mod=r.Mb({type:n}),n.\u0275inj=r.Lb({factory:function(t){return new(t||n)},providers:[l],imports:[[c.b,s.j,s.v]]}),n}()},FIaY:function(n,o,i){"use strict";i.d(o,"a",function(){return x});var r,s,c=i("mrSG"),a=i("H98O"),u=i("ZF+8"),l=i("Cmua"),b=i("cdEG"),f=i("FJ7I"),d=i("3WbM"),p=i("wd/R"),h=i("LF58"),m=i("fXoL"),g=i("TEn/"),v=i("1rxE"),y=((r=function(){function n(e,o,i){t(this,n),this.modalCtrl=e,this.userSrv=o,this.toastSrv=i}return e(n,[{key:"ngOnInit",value:function(){}},{key:"requestVerification",value:function(){var t=this;this.userSrv.sendEmailVerification().then(function(){}).catch(function(n){t.toastSrv.show(n.error.error.message),t.dismiss()})}},{key:"dismiss",value:function(){this.modalCtrl.dismiss()}}]),n}()).\u0275fac=function(t){return new(t||r)(m.Ob(g.eb),m.Ob(h.m),m.Ob(u.e))},r.\u0275cmp=m.Ib({type:r,selectors:[["app-modal-email-verification"]],decls:29,vars:12,consts:[[1,"ion-no-border"],["mode","ios"],["slot","end","mode","md"],[3,"click"],["name","close-outline","size","large"],[1,"ion-padding-top","ion-padding-horizontal","h-100"],[1,"ion-align-items-center","ion-justify-content-center","h-100"],["size","12",1,"ion-text-center"],["color","primary"],["color","medium"],[1,"ion-no-border","ion-padding-horizontal"],["expand","block","shape","round","color","success",3,"click"]],template:function(t,n){1&t&&(m.Ub(0,"ion-header",0),m.Ub(1,"ion-toolbar",1),m.Ub(2,"ion-buttons",2),m.Ub(3,"ion-button",3),m.cc("click",function(){return n.dismiss()}),m.Pb(4,"ion-icon",4),m.Tb(),m.Tb(),m.Ub(5,"ion-title"),m.Dc(6),m.fc(7,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Ub(8,"ion-content"),m.Ub(9,"ion-grid",5),m.Ub(10,"ion-row",6),m.Ub(11,"ion-col",7),m.Ub(12,"ion-text",8),m.Ub(13,"span"),m.Ub(14,"b"),m.Dc(15),m.fc(16,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Pb(17,"br"),m.Ub(18,"ion-text",9),m.Ub(19,"small"),m.Dc(20),m.fc(21,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(22,"ion-footer",10),m.Ub(23,"ion-grid"),m.Ub(24,"ion-row"),m.Ub(25,"ion-col"),m.Ub(26,"ion-button",11),m.cc("click",function(){return n.dismiss()}),m.Dc(27),m.fc(28,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Cb(6),m.Ec(m.gc(7,4,"VERIFY_EMAIL")),m.Cb(9),m.Ec(m.gc(16,6,"EMAIL_VERIFICATION_SENT")),m.Cb(5),m.Ec(m.gc(21,8,"EMAIL_VERIFICATION_WORDING")),m.Cb(7),m.Fc(" ",m.gc(28,10,"BACK_HOME")," "))},directives:[g.t,g.bb,g.i,g.h,g.u,g.ab,g.p,g.s,g.K,g.o,g.X,g.r],pipes:[v.a],styles:[""]}),r),C=i("tyNb"),O=((s=function(){function n(e,o,i,r){t(this,n),this.modalCtrl=e,this.router=o,this.alertSrv=i,this.translateSrv=r}return e(n,[{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(){var t=this;this.router.navigateByUrl("/tabs/home",{replaceUrl:!0}).then(function(){t.modalCtrl.dismiss(),t.showAlertVerifyEmail()})}},{key:"showAlertVerifyEmail",value:function(){var t=this;this.alertSrv.presentAlert({header:"".concat(this.translateSrv.get("VERIFY_EMAIL_HEADER")),message:"".concat(this.translateSrv.get("VERIFY_EMAIL_BODY")),buttons:[{text:"".concat(this.translateSrv.get("SKIP")),role:"cancel"},{text:"".concat(this.translateSrv.get("VERIFY")),handler:function(){t.showModalEmailVerification()}}]})}},{key:"showModalEmailVerification",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:y});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}))}}]),n}()).\u0275fac=function(t){return new(t||s)(m.Ob(g.eb),m.Ob(C.g),m.Ob(l.a),m.Ob(a.a))},s.\u0275cmp=m.Ib({type:s,selectors:[["app-modal-success"]],decls:28,vars:9,consts:[[1,"ion-no-border"],["mode","ios"],["slot","end","mode","md"],[3,"click"],["name","close-outline","size","large"],[1,"ion-padding-top","ion-padding-horizontal","h-100"],[1,"ion-align-items-center","ion-justify-content-center","h-100"],["size","12",1,"ion-text-center"],["color","primary"],["color","medium"],[1,"ion-no-border","ion-padding-horizontal"],["expand","block","shape","round","color","success",3,"click"]],template:function(t,n){1&t&&(m.Ub(0,"ion-header",0),m.Ub(1,"ion-toolbar",1),m.Ub(2,"ion-buttons",2),m.Ub(3,"ion-button",3),m.cc("click",function(){return n.dismiss()}),m.Pb(4,"ion-icon",4),m.Tb(),m.Tb(),m.Ub(5,"ion-title"),m.Dc(6),m.fc(7,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Ub(8,"ion-content"),m.Ub(9,"ion-grid",5),m.Ub(10,"ion-row",6),m.Ub(11,"ion-col",7),m.Ub(12,"ion-text",8),m.Ub(13,"span"),m.Ub(14,"b"),m.Dc(15),m.fc(16,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Pb(17,"br"),m.Ub(18,"ion-text",9),m.Ub(19,"small"),m.Dc(20),m.fc(21,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(22,"ion-footer",10),m.Ub(23,"ion-grid"),m.Ub(24,"ion-row"),m.Ub(25,"ion-col"),m.Ub(26,"ion-button",11),m.cc("click",function(){return n.dismiss()}),m.Dc(27," Ok "),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Cb(6),m.Ec(m.gc(7,3,"VERIFY_PHONE_NUMBER")),m.Cb(9),m.Ec(m.gc(16,5,"PHONE_NUMBER_VERIFIED")),m.Cb(5),m.Ec(m.gc(21,7,"WELCOME_GROCIE")))},directives:[g.t,g.bb,g.i,g.h,g.u,g.ab,g.p,g.s,g.K,g.o,g.X,g.r],pipes:[v.a],styles:[""]}),s),w=i("9OaD"),k=i("ofXK");function T(t,n){1&t&&m.Qb(0)}function U(t,n){if(1&t&&(m.Ub(0,"small"),m.Dc(1),m.Tb()),2&t){var e=m.ec();m.Cb(1),m.Ec(e.formattedCountdown())}}function E(t,n){if(1&t){var e=m.Vb();m.Ub(0,"ion-text",16),m.cc("click",function(){return m.vc(e),m.ec().setBanOtp()}),m.Ub(1,"small"),m.Dc(2),m.fc(3,"translate"),m.Tb(),m.Tb()}2&t&&(m.Cb(2),m.Ec(m.gc(3,1,"RESEND_OTP")))}function I(t,n){1&t&&m.Pb(0,"ion-spinner",17)}var S,x=((S=function(){function n(e,o,i,r,s,c,a,u){t(this,n),this.modalCtrl=e,this.alertSrv=o,this.translateSrv=i,this.gs=r,this.otpSrv=s,this.userSrv=c,this.toastSrv=a,this.authSrv=u,this.otpConfig={allowNumbersOnly:!0,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"50px",height:"50px"}},this.otpValue=null,this.countdown=null,this.userData=null,this.isOnFetch=!1}return e(n,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.observeFetchState()}},{key:"observeFetchState",value:function(){var t=this;this.gs.observeOnFetch().subscribe(function(n){t.isOnFetch=n})}},{key:"ionViewWillEnter",value:function(){this.sendOtp(),this.setupCountdown(),this.fetchUserData()}},{key:"ionViewDidDismiss",value:function(){this.gs.unsubscribeSubscriptions()}},{key:"setupCountdown",value:function(){var t=this,n=this.otpSrv.banCountdown.asObservable();this.gs.pushSubscription(n),this.setBanOtp(),n.subscribe(function(n){t.countdown=0===n?0:n})}},{key:"setBanOtp",value:function(){this.sendOtp(),this.otpSrv.setBanResendOtp()}},{key:"formattedCountdown",value:function(){return p.utc(1e3*this.countdown).format("mm:ss")}},{key:"verifyOtp",value:function(){var t=this;this.authSrv.verifyPhone({phone:this.userData.phone,token:this.otpValue}).then(function(n){if(n)t.showSuccessOtpModal();else{var e=t.translateSrv.get("INVALID_OTP");t.toastSrv.show(e)}}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"onOtpChange",value:function(t){this.otpValue=t}},{key:"dismiss",value:function(){var t=this;this.alertSrv.presentAlert({message:"".concat(this.translateSrv.get("CLOSE_CONFIRM")),buttons:[{text:"Ok",handler:function(){t.modalCtrl.dismiss()}},{text:"".concat(this.translateSrv.get("CANCEL")),role:"cancel"}]})}},{key:"showSuccessOtpModal",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.otpSrv.banCountdown.complete(),t.next=3,this.modalCtrl.dismiss();case 3:return t.t0=this.modalCtrl,t.t1=O,t.t2=!0,t.next=8,this.modalCtrl.getTop();case 8:return t.t3=t.sent,t.t4={component:t.t1,swipeToClose:t.t2,presentingElement:t.t3},t.next=12,t.t0.create.call(t.t0,t.t4);case 12:return n=t.sent,t.next=15,n.present();case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}},t,this)}))}},{key:"fetchUserData",value:function(){var t=this;this.userSrv.getProfile().then(function(n){t.userData=n})}},{key:"sendOtp",value:function(){var t=this;this.userSrv.sendOtp().then(function(n){if(!n){var e=t.translateSrv.get("INVALID_OTP");t.toastSrv.show(e)}}).catch(function(n){t.toastSrv.show(n.error.error.message)})}}]),n}()).\u0275fac=function(t){return new(t||S)(m.Ob(g.eb),m.Ob(l.a),m.Ob(a.a),m.Ob(u.c),m.Ob(b.a),m.Ob(f.a),m.Ob(d.a),m.Ob(u.a))},S.\u0275cmp=m.Ib({type:S,selectors:[["app-modal-otp"]],decls:33,vars:15,consts:[[1,"ion-no-border"],["mode","ios"],["slot","end","mode","md"],[3,"click"],["name","close-outline","size","large"],[1,"ion-padding-top","ion-padding-horizontal","h-100"],["size","12",1,"ion-text-center"],[1,"ion-text-center","ion-margin-vertical"],["size","12"],[3,"config","onInputChange"],[4,"ngIf","ngIfThen","ngIfElse"],["countdownComp",""],["resendComp",""],[1,"ion-no-border","ion-padding-horizontal"],["expand","block","shape","round","color","success",3,"disabled","click"],["name","dots","color","dark",4,"ngIf"],["color","primary",3,"click"],["name","dots","color","dark"]],template:function(t,n){if(1&t&&(m.Ub(0,"ion-header",0),m.Ub(1,"ion-toolbar",1),m.Ub(2,"ion-buttons",2),m.Ub(3,"ion-button",3),m.cc("click",function(){return n.dismiss()}),m.Pb(4,"ion-icon",4),m.Tb(),m.Tb(),m.Ub(5,"ion-title"),m.Dc(6),m.fc(7,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Ub(8,"ion-content"),m.Ub(9,"ion-grid",5),m.Ub(10,"ion-row"),m.Ub(11,"ion-col",6),m.Ub(12,"small"),m.Dc(13),m.fc(14,"translate"),m.Tb(),m.Tb(),m.Tb(),m.Ub(15,"ion-row",7),m.Ub(16,"ion-col",8),m.Ub(17,"ng-otp-input",9),m.cc("onInputChange",function(t){return n.onOtpChange(t)}),m.Tb(),m.Tb(),m.Tb(),m.Ub(18,"ion-row"),m.Ub(19,"ion-col",6),m.Bc(20,T,1,0,"ng-container",10),m.Bc(21,U,2,1,"ng-template",null,11,m.Cc),m.Bc(23,E,4,3,"ng-template",null,12,m.Cc),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(25,"ion-footer",13),m.Ub(26,"ion-grid"),m.Ub(27,"ion-row"),m.Ub(28,"ion-col"),m.Ub(29,"ion-button",14),m.cc("click",function(){return n.verifyOtp()}),m.Dc(30),m.fc(31,"translate"),m.Bc(32,I,1,0,"ion-spinner",15),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t){var e=m.uc(22),o=m.uc(24);m.Cb(6),m.Ec(m.gc(7,9,"ENTER_OTP")),m.Cb(7),m.Fc("",m.gc(14,11,"OTP_WORDING")," "),m.Cb(4),m.mc("config",n.otpConfig),m.Cb(3),m.mc("ngIf",n.countdown>0)("ngIfThen",e)("ngIfElse",o),m.Cb(9),m.mc("disabled",4!==(null==n.otpValue?null:n.otpValue.length)||n.isOnFetch),m.Cb(1),m.Fc(" ",m.gc(31,13,"VERIFY")," "),m.Cb(2),m.mc("ngIf",n.isOnFetch)}},directives:[g.t,g.bb,g.i,g.h,g.u,g.ab,g.p,g.s,g.K,g.o,w.b,k.n,g.r,g.X,g.T],pipes:[v.a],styles:[""]}),S)},Hljq:function(n,e,o){"use strict";o.d(e,"a",function(){return d});var i,r,s=o("ofXK"),c=o("TEn/"),a=o("PCNd"),u=o("9OaD"),l=o("3Pt+"),b=o("fXoL"),f=((r=function n(){t(this,n)}).\u0275mod=b.Mb({type:r}),r.\u0275inj=b.Lb({factory:function(t){return new(t||r)},imports:[[s.b,c.cb.forRoot(),a.a]]}),r),d=((i=function n(){t(this,n)}).\u0275mod=b.Mb({type:i}),i.\u0275inj=b.Lb({factory:function(t){return new(t||i)},imports:[[s.b,c.cb.forRoot(),a.a,u.a,l.j,f]]}),i)}}])}();