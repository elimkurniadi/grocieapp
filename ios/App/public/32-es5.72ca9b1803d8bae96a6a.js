!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function e(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[32,37,38,39],{L1AV:function(t,o,i){"use strict";i.r(o),i.d(o,"StoreLocationPageModule",function(){return I});var c=i("ofXK"),r=i("3Pt+"),a=i("TEn/"),s=i("tyNb"),l=i("ZF+8"),u=i("LF58"),b=i("Bfh1"),h=i("fXoL");function f(n,t){1&n&&(h.Ub(0,"ion-item",2),h.Pb(1,"ion-skeleton-text",3),h.Tb())}var g,d=function(){return[1,2,3]},p=((g=function(){function t(){n(this,t)}return e(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(n){return new(n||g)},g.\u0275cmp=h.Ib({type:g,selectors:[["app-store-location-skeleton"]],decls:2,vars:2,consts:[[1,"ion-no-padding"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["animated",""]],template:function(n,t){1&n&&(h.Ub(0,"ion-list",0),h.Bc(1,f,2,0,"ion-item",1),h.Tb()),2&n&&(h.Cb(1),h.mc("ngForOf",h.qc(1,d)))},directives:[a.D,c.m,a.y,a.Q],styles:[""]}),g),v=i("1rxE");function m(n,t){1&n&&(h.Ub(0,"ion-col",13),h.Pb(1,"app-store-location-skeleton"),h.Tb())}function T(n,t){1&n&&(h.Ub(0,"ion-col",14),h.Ub(1,"ion-text"),h.Dc(2),h.fc(3,"translate"),h.Tb(),h.Tb()),2&n&&(h.Cb(2),h.Fc(" ",h.gc(3,1,"STORE_NOT_FOUND"),""))}function C(n,t){if(1&n&&(h.Ub(0,"ion-text",20),h.Dc(1),h.fc(2,"number"),h.Tb()),2&n){var e=h.ec().$implicit;h.Cb(1),h.Fc(" ",h.hc(2,1,e.distance,"1.0-0")," KM ")}}function w(n,t){if(1&n){var e=h.Vb();h.Ub(0,"ion-item",16),h.cc("click",function(){h.vc(e);var n=t.$implicit;return h.ec(2).selectBranch(n)}),h.Pb(1,"ion-icon",17),h.Ub(2,"ion-text",18),h.Dc(3),h.Tb(),h.Bc(4,C,3,4,"ion-text",19),h.Tb()}if(2&n){var o=t.$implicit;h.Cb(3),h.Fc(" ",o.name,""),h.Cb(1),h.mc("ngIf",o.distance)}}function O(n,t){if(1&n&&(h.Ub(0,"ion-col",5),h.Ub(1,"ion-list",5),h.Bc(2,w,5,2,"ion-item",15),h.Tb(),h.Tb()),2&n){var e=h.ec();h.Cb(2),h.mc("ngForOf",e.branches)}}var y,U,B,k=[{path:"",component:(y=function(){function t(e,o,i,c,r,a){n(this,t),this.branchSrv=e,this.toastSrv=o,this.authSrv=i,this.navCtrl=c,this.geolocation=r,this.gs=a,this.page={row:15,page:1}}return e(t,[{key:"ngOnInit",value:function(){var n=this;this.longitude=null,this.latitude=null,this.fetching=!0,this.geolocation.getCurrentPosition().then(function(t){t?(n.latitude=t.coords.latitude,n.longitude=t.coords.longitude,n.getBranch()):n.getBranch()})}},{key:"getBranch",value:function(){var n=this,t={};this.latitude&&this.longitude&&(t={latitude:this.latitude,longitude:this.longitude}),this.branchSrv.getList(this.page,t).then(function(t){var e=t.response.rows;n.branchCount=t.response.count,n.branches=n.branches&&n.branches.length&&n.branches.length<n.branchCount?n.branches.concat(e):e,n.fetching=!1}).catch(function(t){n.toastSrv.show(t.error.error.message),n.fetching=!1})}},{key:"searchBranch",value:function(n){var t=this;this.fetching=!0;var e=n.target.value;this.geolocation.getCurrentPosition().then(function(n){n?(t.latitude=n.coords.latitude,t.longitude=n.coords.longitude,t.getBranchWithFilter(e)):t.getBranchWithFilter(e)})}},{key:"getBranchWithFilter",value:function(n){var t=this,e={keyword:n};this.latitude&&this.longitude&&(e.latitude=this.latitude,e.longitude=this.longitude),console.log("filter",e),console.log("latitude",this.latitude),this.branchSrv.getListWithFilter(this.page,e).then(function(n){t.branches=n.response,t.fetching=!1}).catch(function(n){t.toastSrv.show(n.error.error.message),t.fetching=!1})}},{key:"selectBranch",value:function(n){var t=this;this.branchSrv.selectBranch(n.branch_id).then(function(n){t.authSrv.loginByToken(n),t.navCtrl.navigateRoot("/tabs/home")}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"loadMoreBranch",value:function(n){var t=this;setTimeout(function(){n.target.complete(),t.page.page+=1,t.page.page>=Math.ceil(t.branchCount/t.page.row)?n.target.disabled=!0:(t.fetching=!0,t.getBranch())},500)}}]),t}(),y.\u0275fac=function(n){return new(n||y)(h.Ob(u.c),h.Ob(l.e),h.Ob(l.a),h.Ob(a.fb),h.Ob(b.a),h.Ob(l.c))},y.\u0275cmp=h.Ib({type:y,selectors:[["app-store-location"]],decls:21,vars:9,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["defaultHref","/tabs/home","icon","chevron-back-outline"],[1,"ion-padding-top"],[1,"ion-no-padding"],[1,"ion-padding-start","store-title"],["mode","ios","debounce","500",1,"search-store",3,"ionChange"],["size","12","class","ion-text-center",4,"ngIf"],["size","12","class","ion-text-center ion-no-padding",4,"ngIf"],["class","ion-no-padding",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles"],["size","12",1,"ion-text-center"],["size","12",1,"ion-text-center","ion-no-padding"],["lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",3,"click"],["name","location","color","success",1,"store-text",2,"vertical-align","middle"],["color","success",1,"store-text"],["color","success","class","store-distance","slot","end",4,"ngIf"],["color","success","slot","end",1,"store-distance"]],template:function(n,t){1&n&&(h.Ub(0,"ion-header",0),h.Ub(1,"ion-toolbar",1),h.Ub(2,"ion-buttons",2),h.Pb(3,"ion-back-button",3),h.Tb(),h.Ub(4,"ion-title"),h.Dc(5),h.fc(6,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Ub(7,"ion-content"),h.Ub(8,"ion-grid",4),h.Ub(9,"ion-row",5),h.Ub(10,"ion-col",5),h.Ub(11,"ion-label",6),h.Dc(12),h.fc(13,"translate"),h.Tb(),h.Ub(14,"ion-searchbar",7),h.cc("ionChange",function(n){return t.searchBranch(n)}),h.Tb(),h.Tb(),h.Tb(),h.Ub(15,"ion-row",5),h.Bc(16,m,2,0,"ion-col",8),h.Bc(17,T,4,3,"ion-col",9),h.Bc(18,O,3,1,"ion-col",10),h.Tb(),h.Tb(),h.Ub(19,"ion-infinite-scroll",11),h.cc("ionInfinite",function(n){return t.loadMoreBranch(n)}),h.Pb(20,"ion-infinite-scroll-content",12),h.Tb(),h.Tb()),2&n&&(h.Cb(5),h.Ec(h.gc(6,5,"STORE_LOCATION")),h.Cb(7),h.Fc(" ",h.gc(13,7,"CHOOSE_STORE_LOCATION"),""),h.Cb(4),h.mc("ngIf",t.fetching),h.Cb(1),h.mc("ngIf",!t.fetching&&(!t.branches||t.branches&&!t.branches.length)),h.Cb(1),h.mc("ngIf",!t.fetching))},directives:[a.t,a.bb,a.i,a.e,a.f,a.ab,a.p,a.s,a.K,a.o,a.C,a.L,a.mb,c.n,a.v,a.w,p,a.X,a.D,c.m,a.y,a.u],pipes:[v.a,c.f],styles:[".store-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#353535}.store-text[_ngcontent-%COMP%]{margin-left:5px;font-size:14px;font-weight:600}.store-distance[_ngcontent-%COMP%]{font-size:12px;font-weight:600}"]}),y)}],x=((U=function t(){n(this,t)}).\u0275mod=h.Mb({type:U}),U.\u0275inj=h.Lb({factory:function(n){return new(n||U)},imports:[[s.j.forChild(k)],s.j]}),U),F=i("PCNd"),I=((B=function t(){n(this,t)}).\u0275mod=h.Mb({type:B}),B.\u0275inj=h.Lb({factory:function(n){return new(n||B)},imports:[[c.b,r.j,a.cb,x,F.a]]}),B)},PCNd:function(t,e,o){"use strict";o.d(e,"a",function(){return r});var i=o("ofXK"),c=o("fXoL"),r=function(){var t=function t(){n(this,t)};return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(n){return new(n||t)},imports:[[i.b]]}),t}()}}])}();