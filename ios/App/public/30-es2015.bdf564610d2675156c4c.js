(window.webpackJsonp=window.webpackJsonp||[]).push([[30,37,38,39],{PCNd:function(t,o,n){"use strict";n.d(o,"a",function(){return i});var e=n("ofXK"),c=n("fXoL");let i=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(o){return new(o||t)},imports:[[e.b]]}),t})()},dFHt:function(t,o,n){"use strict";n.r(o),n.d(o,"ProductPageModule",function(){return gt});var e=n("ofXK"),c=n("3Pt+"),i=n("TEn/"),r=n("tyNb"),s=n("mrSG"),a=n("OKhX"),l=n("FvCk"),d=n("H98O"),u=n("ZF+8"),b=n("LF58"),p=n("3WbM"),h=n("fXoL"),g=n("3zol"),f=n("1rxE");function m(t,o){1&t&&h.Pb(0,"img",45)}function v(t,o){if(1&t&&h.Pb(0,"img",46),2&t){const t=h.ec();h.mc("src",null==t.productData?null:t.productData.image_url,h.xc)}}function w(t,o){1&t&&(h.Ub(0,"div",47),h.Dc(1,"Out of stock"),h.Tb())}const T=function(t){return{color:t}};function C(t,o){if(1&t&&(h.Ub(0,"ion-row",48),h.Ub(1,"ion-col"),h.Ub(2,"span",49),h.Pb(3,"ion-icon",50),h.Ub(4,"ion-text",51),h.Dc(5),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&t){const t=h.ec();h.Cb(2),h.zc(t.productTagBg),h.Cb(1),h.mc("ngStyle",h.rc(5,T,null==t.productData||null==t.productData.product_tag?null:t.productData.product_tag.color)),h.Cb(1),h.mc("ngStyle",h.rc(7,T,null==t.productData||null==t.productData.product_tag?null:t.productData.product_tag.color)),h.Cb(1),h.Fc(" ",null==t.productData||null==t.productData.product_tag?null:t.productData.product_tag.name," ")}}function x(t,o){if(1&t&&(h.Ub(0,"ion-text",52),h.Dc(1),h.Pb(2,"br"),h.Tb()),2&t){const t=h.ec();h.Cb(1),h.Fc(" ",null==t.productData||null==t.productData.brand?null:t.productData.brand.name," ")}}function y(t,o){1&t&&(h.Ub(0,"ion-text",53),h.Dc(1),h.fc(2,"translate"),h.Tb()),2&t&&(h.Cb(1),h.Fc(" ",h.gc(2,1,"STOCK")," < 5 "))}function P(t,o){1&t&&h.Pb(0,"ion-spinner",54)}const U=function(){return["/product/search"]},_=function(t){return{disabled:t}};let O=(()=>{class t{constructor(t,o,n,e,c,i,r,s,a){this.translateSrv=t,this.toastSrv=o,this.productSrv=n,this.cartSrv=e,this.activatedRoute=c,this.navCtrl=i,this.modalCtrl=r,this.router=s,this.gs=a,this.isFavorite=!1,this.productData=null,this.productId=null,this.qty=0,this.maxQty=0,this.isOnFetch=!1,this.observeParam(),this.page={row:8,page:1}}ngOnInit(){}ionViewDidEnter(){this.observeFetchState()}observeFetchState(){this.gs.observeOnFetch().subscribe(t=>{this.isOnFetch=t})}scanQR(){this.router.navigate(["/qr","scan"])}observeParam(){this.activatedRoute.params.subscribe(t=>{this.productId=null==t?void 0:t.id,this.fetchProductDetail(this.productId)})}fetchProductDetail(t){this.productSrv.getProductDetail(t).then(t=>{this.productData=t,this.cartSrv.getCartMaxQty(t.product_id).then(t=>{this.maxQty=t.max_quantity,this.qty=t.max_quantity>0?1:0}),this.getRelatedProduct()})}goBack(){this.navCtrl.pop()}addItemToCart(){this.qty>0&&this.cartSrv.addToCart(this.productId,this.qty).then(t=>{this.presentModalSuccess()}).catch(t=>{this.gs.log("err",t)})}presentModalSuccess(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:a.a,cssClass:"my-custom-class"});return t.onDidDismiss().then(t=>{"cart"===(null==t?void 0:t.data)&&this.navCtrl.navigateRoot(["tabs/cart"])}),yield t.present()})}getRelatedProduct(){var t;this.productSrv.getRelated(null===(t=this.productData)||void 0===t?void 0:t.product_id,this.page).then(t=>{this.products=t.response.rows}).catch(t=>{this.toastSrv.show(t.error.error.message)})}updateLocalQuantity(t){t?this.qty<this.maxQty&&(this.qty+=1):this.qty>0&&(this.qty-=1)}addToFavorite(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:l.a,cssClass:"modal-add-to-favorite",componentProps:{productId:this.productId}});return t.onDidDismiss().then(()=>{}),yield t.present()})}get productTagBg(){var t,o,n,e,c,i;return"background: rgba("+this.gs.hexToRgb(null===(o=null===(t=this.productData)||void 0===t?void 0:t.product_tag)||void 0===o?void 0:o.color).r+","+this.gs.hexToRgb(null===(e=null===(n=this.productData)||void 0===n?void 0:n.product_tag)||void 0===e?void 0:e.color).g+","+this.gs.hexToRgb(null===(i=null===(c=this.productData)||void 0===c?void 0:c.product_tag)||void 0===i?void 0:i.color).b+", 0.2) !important"}}return t.\u0275fac=function(o){return new(o||t)(h.Ob(d.a),h.Ob(p.a),h.Ob(b.j),h.Ob(b.f),h.Ob(r.a),h.Ob(i.fb),h.Ob(i.eb),h.Ob(r.g),h.Ob(u.c))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-product-detail"]],decls:78,vars:54,consts:[[1,"ion-no-border","ion-margin-top",3,"translucent"],["mode","ios"],["slot","start"],[3,"click"],["name","chevron-back-outline","slot","icon-only","color","dark"],[1,"ion-no-padding"],["size","12",1,"ion-no-padding"],["mode","ios",1,"custom-search",3,"placeholder","routerLink"],[1,"ion-no-padding","ion-align-self-center","ion-text-center","scan-icon-container",3,"click"],["src","assets/images/scan.svg",1,"scan-icon"],[1,"ion-margin-top","ion-no-padding","h-100"],[3,"ngClass"],["size","12",1,"ion-no-padding","ion-text-center"],["src","assets/images/placeholder-product.svg","class","img-product",4,"ngIf"],["class","img-product","onerror","this.onerror=null;this.src='assets/images/placeholder-product.svg'",3,"src",4,"ngIf"],["class","out-of-stock",4,"ngIf"],[1,"ion-justify-content-between","ion-padding-horizontal"],["size","12"],["class","ion-padding-vertical",4,"ngIf"],[1,"product-name"],[1,"ion-align-items-center"],["size","6",1,"ion-no-padding"],["class","product-brand",4,"ngIf"],[1,"product-size"],["class","product-out-of-stock",4,"ngIf"],[2,"font-size","12px","--color","white","background-color","#f8a345","margin-right","8px"],[1,"product-price","price-linethrough"],["size","11"],[1,"product-final-price"],["size","1",1,"ion-no-padding","ion-text-right"],["color","primary","src","assets/images/add-favorite.svg",2,"font-size","28px",3,"click"],[1,"divider","ion-margin-vertical"],[1,"text-desc-label"],[1,"text-desc",3,"innerHTML"],[1,"divider"],["size","12",1,"ion-padding-start"],[3,"products"],["size","4",1,"ion-text-center"],["size","4"],["src","/assets/images/remove-material.svg","color","limegreen",2,"font-size","10px",3,"ngClass","click"],["size","4",2,"border","solid 2px #e2e2e2"],["src","/assets/images/add-material.svg",2,"font-size","10px",3,"click"],["size","8"],["shape","round","color","success","expand","full",3,"ngClass","click"],["name","dots","color","dark",4,"ngIf"],["src","assets/images/placeholder-product.svg",1,"img-product"],["onerror","this.onerror=null;this.src='assets/images/placeholder-product.svg'",1,"img-product",3,"src"],[1,"out-of-stock"],[1,"ion-padding-vertical"],[1,"tag-background"],["name","pricetag",1,"tag-text",3,"ngStyle"],[1,"tag-text",3,"ngStyle"],[1,"product-brand"],[1,"product-out-of-stock"],["name","dots","color","dark"]],template:function(t,o){1&t&&(h.Ub(0,"ion-header",0),h.Ub(1,"ion-toolbar",1),h.Ub(2,"ion-buttons",2),h.Ub(3,"ion-button",3),h.cc("click",function(){return o.goBack()}),h.Pb(4,"ion-icon",4),h.Tb(),h.Tb(),h.Ub(5,"ion-row",5),h.Ub(6,"ion-col",6),h.Pb(7,"ion-searchbar",7),h.fc(8,"translate"),h.Ub(9,"div",8),h.cc("click",function(t){return o.scanQR(),t.stopPropagation()}),h.Pb(10,"img",9),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(11,"ion-content"),h.Ub(12,"ion-grid",10),h.Ub(13,"ion-row",11),h.Ub(14,"ion-col",12),h.Bc(15,m,1,0,"img",13),h.Bc(16,v,1,1,"img",14),h.Tb(),h.Bc(17,w,2,0,"div",15),h.Tb(),h.Ub(18,"ion-row",16),h.Ub(19,"ion-col",17),h.Bc(20,C,6,9,"ion-row",18),h.Ub(21,"ion-row"),h.Ub(22,"ion-col",6),h.Ub(23,"span",19),h.Dc(24),h.fc(25,"titlecase"),h.Tb(),h.Tb(),h.Tb(),h.Ub(26,"ion-row",20),h.Ub(27,"ion-col",21),h.Bc(28,x,3,1,"ion-text",22),h.Ub(29,"span",23),h.Dc(30),h.Tb(),h.Pb(31,"br"),h.Bc(32,y,3,3,"ion-text",24),h.Tb(),h.Tb(),h.Ub(33,"ion-row"),h.Ub(34,"ion-col"),h.Ub(35,"ion-badge",25),h.Dc(36),h.fc(37,"number"),h.Tb(),h.Ub(38,"span",26),h.Dc(39),h.fc(40,"number"),h.Tb(),h.Tb(),h.Tb(),h.Ub(41,"ion-row",20),h.Ub(42,"ion-col",27),h.Ub(43,"span",28),h.Dc(44),h.fc(45,"number"),h.Tb(),h.Tb(),h.Ub(46,"ion-col",29),h.Ub(47,"ion-icon",30),h.cc("click",function(){return o.addToFavorite()}),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Pb(48,"div",31),h.Ub(49,"ion-row",16),h.Ub(50,"ion-col",17),h.Ub(51,"ion-text",32),h.Dc(52),h.fc(53,"translate"),h.Tb(),h.Pb(54,"p",33),h.Tb(),h.Tb(),h.Pb(55,"div",34),h.Ub(56,"ion-row"),h.Ub(57,"ion-col",35),h.Ub(58,"ion-text",32),h.Dc(59),h.fc(60,"translate"),h.Tb(),h.Tb(),h.Ub(61,"ion-col",17),h.Pb(62,"app-slide-product",36),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(63,"ion-footer"),h.Ub(64,"ion-row",20),h.Ub(65,"ion-col",37),h.Ub(66,"ion-row",20),h.Ub(67,"ion-col",38),h.Ub(68,"ion-icon",39),h.cc("click",function(){return o.updateLocalQuantity(!1)}),h.Tb(),h.Tb(),h.Ub(69,"ion-col",40),h.Dc(70),h.Tb(),h.Ub(71,"ion-col",38),h.Ub(72,"ion-icon",41),h.cc("click",function(){return o.updateLocalQuantity(!0)}),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(73,"ion-col",42),h.Ub(74,"ion-button",43),h.cc("click",function(){return o.addItemToCart()}),h.Dc(75),h.fc(76,"translate"),h.Bc(77,P,1,0,"ion-spinner",44),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&t&&(h.mc("translucent",!0),h.Cb(7),h.nc("placeholder",h.gc(8,27,"SEARCH")),h.mc("routerLink",h.qc(47,U)),h.Cb(6),h.mc("ngClass",h.rc(48,_,0==(null==o.productData?null:o.productData.stock))),h.Cb(2),h.mc("ngIf",!(null!=o.productData&&o.productData.image_url)),h.Cb(1),h.mc("ngIf",null==o.productData?null:o.productData.image_url),h.Cb(1),h.mc("ngIf",0==(null==o.productData?null:o.productData.stock)),h.Cb(3),h.mc("ngIf",null!==(null==o.productData||null==o.productData.product_tag?null:o.productData.product_tag.name)),h.Cb(4),h.Fc(" ",h.gc(25,29,null==o.productData?null:o.productData.name)," "),h.Cb(4),h.mc("ngIf",null==o.productData?null:o.productData.brand),h.Cb(2),h.Gc("Size: ",null==o.productData?null:o.productData.weight," ",null==o.productData||null==o.productData.unit?null:o.productData.unit.name,""),h.Cb(2),h.mc("ngIf",(null==o.productData?null:o.productData.stock)<5&&(null==o.productData?null:o.productData.stock)>0),h.Cb(2),h.Ac("visibility",null!=o.productData&&o.productData.secondary_price?"unset":"hidden"),h.Cb(2),h.Fc("",h.hc(37,31,((null==o.productData?null:o.productData.secondary_price)-(null==o.productData?null:o.productData.primary_price))/(null==o.productData?null:o.productData.secondary_price)*100,"1.0-0")," %"),h.Cb(3),h.Fc(" Rp ",h.hc(40,34,null==o.productData?null:o.productData.secondary_price,"1.0-0")," "),h.Cb(5),h.Fc("Rp ",h.ic(45,37,null==o.productData?null:o.productData.primary_price,"1.0-0","id")," "),h.Cb(8),h.Ec(h.gc(53,41,"DESCRIPTION")),h.Cb(2),h.mc("innerHTML",null==o.productData?null:o.productData.description,h.wc),h.Cb(5),h.Ec(h.gc(60,43,"RELATED_PRODUCT")),h.Cb(3),h.mc("products",o.products),h.Cb(6),h.mc("ngClass",h.rc(50,_,o.qty<1)),h.Cb(2),h.Ec(o.qty),h.Cb(4),h.mc("ngClass",h.rc(52,_,o.qty<1||0==(null==o.productData?null:o.productData.stock))),h.Cb(1),h.Fc(" ",h.gc(76,45,"ADD_TO_CART")," "),h.Cb(2),h.mc("ngIf",o.isOnFetch))},directives:[i.t,i.bb,i.i,i.h,i.u,i.K,i.o,i.L,i.mb,i.kb,r.h,i.p,i.s,e.l,e.n,i.g,i.X,g.a,i.r,e.o,i.T],pipes:[f.a,e.t,e.f],styles:[".img-product[_ngcontent-%COMP%]{max-height:200px;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}ion-header[_ngcontent-%COMP%]{border:unset!important}.text-desc[_ngcontent-%COMP%]{font-size:12px;line-height:1.2;color:#262626}.text-desc-label[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:1.17}.product-brand[_ngcontent-%COMP%], .text-desc-label[_ngcontent-%COMP%]{letter-spacing:normal;color:#262626}.product-brand[_ngcontent-%COMP%]{font-size:15px;font-weight:600;line-height:1.5}.product-name[_ngcontent-%COMP%]{font-size:21px;font-weight:700;line-height:1;letter-spacing:normal;color:#262626}.product-size[_ngcontent-%COMP%]{font-size:15px!important;font-weight:400;line-height:1.5;color:#262626}.product-final-price[_ngcontent-%COMP%], .product-size[_ngcontent-%COMP%]{width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-final-price[_ngcontent-%COMP%]{font-size:21px;font-weight:700;line-height:1.3;color:#9c3}.product-price[_ngcontent-%COMP%]{font-size:17px;width:95px;font-weight:700;line-height:2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:super;color:#f8a345}.product-out-of-stock[_ngcontent-%COMP%]{font-size:15px;font-weight:600;line-height:1.25;color:#d61414}.price-linethrough[_ngcontent-%COMP%]{text-decoration:line-through}.scan-icon-container[_ngcontent-%COMP%]{position:absolute;top:6px;height:25px;right:16px}ion-searchbar.custom-search[_ngcontent-%COMP%]{height:36px;padding:12px!important;margin-top:-1px}.disabled[_ngcontent-%COMP%]{opacity:.5}.disabled[_ngcontent-%COMP%] > .out-of-stock[_ngcontent-%COMP%]{position:absolute;font-size:15px;font-weight:600;border-radius:15px;background-color:rgba(38,38,38,.7);padding:10px;color:#000;left:0;right:0;top:100px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:auto;color:#fff;text-align:center;text-transform:uppercase}.tag-background[_ngcontent-%COMP%]{border-radius:4px;background:rgba(110,154,242,.2);padding:3px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-text[_ngcontent-%COMP%]{color:#6e9af2;font-size:11px}"]}),t})();var k=n("vczW"),D=n("axhS");function S(t,o){if(1&t&&h.Pb(0,"img",7),2&t){const t=h.ec();h.mc("src",null==t.category?null:t.category.icon_url,h.xc)}}function z(t,o){1&t&&h.Pb(0,"img",8)}let I=(()=>{class t{constructor(t,o){this.router=t,this.navCtrl=o}ngOnInit(){}goToProductByCategory(t){this.navCtrl.navigateForward(`/product/list?cat_id=${t}`)}}return t.\u0275fac=function(o){return new(o||t)(h.Ob(r.g),h.Ob(i.fb))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-card-subcategory"]],inputs:{category:"category"},decls:9,vars:3,consts:[[1,"ion-text-center",3,"click"],[1,"cat-content"],["size","8",1,"ion-align-items-center","ion-align-self-center","ion-text-left","height-ellipsis"],["color","success",1,"cat-name"],["size","4",1,"ion-text-right","ion-align-items-center","ion-align-self-center"],["class","cat-icon rounded","onerror","this.onerror=null;this.src='https://via.placeholder.com/50.png'",3,"src",4,"ngIf"],["src","https://via.placeholder.com/50.png","class","cat-icon rounded",4,"ngIf"],["onerror","this.onerror=null;this.src='https://via.placeholder.com/50.png'",1,"cat-icon","rounded",3,"src"],["src","https://via.placeholder.com/50.png",1,"cat-icon","rounded"]],template:function(t,o){1&t&&(h.Ub(0,"ion-card",0),h.cc("click",function(){return o.goToProductByCategory(null==o.category?null:o.category.category_id)}),h.Ub(1,"ion-card-content",1),h.Ub(2,"ion-row"),h.Ub(3,"ion-col",2),h.Ub(4,"ion-text",3),h.Dc(5),h.Tb(),h.Tb(),h.Ub(6,"ion-col",4),h.Bc(7,S,1,1,"img",5),h.Bc(8,z,1,0,"img",6),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&t&&(h.Cb(5),h.Ec(null==o.category?null:o.category.name),h.Cb(2),h.mc("ngIf",null==o.category?null:o.category.icon_url),h.Cb(1),h.mc("ngIf",!(null!=o.category&&o.category.icon_url)))},directives:[i.j,i.k,i.K,i.o,i.X,e.n],styles:[".cat-icon[_ngcontent-%COMP%]{width:32px;height:32px;-o-object-fit:cover;object-fit:cover;float:right}.cat-name[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.cat-content[_ngcontent-%COMP%]{padding:12px}.height-ellipsis[_ngcontent-%COMP%]{height:42px;color:var(--ion-color-success)}"]}),t})();var M=n("gq6x");let F=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=h.Ib({type:t,selectors:[["app-product-skeleton"]],decls:21,vars:0,consts:[[1,"ion-no-border","link",2,"margin-left","0px","margin-right","0px"],[1,"ion-no-padding","link"],[1,"product-thuion-thumbnail","full-width",2,"width","100%"],["animated",""],[1,"ion-no-padding","ion-text-left"],[1,"height-ellipsis"],["size","10"],["size","12"],[1,"product-final-price"]],template:function(t,o){1&t&&(h.Ub(0,"ion-card",0),h.Ub(1,"ion-card-header",1),h.Ub(2,"ion-thumbnail",2),h.Pb(3,"ion-skeleton-text",3),h.Tb(),h.Tb(),h.Ub(4,"ion-card-content",4),h.Ub(5,"ion-row"),h.Ub(6,"ion-col"),h.Pb(7,"ion-skeleton-text",3),h.Tb(),h.Tb(),h.Ub(8,"ion-row"),h.Ub(9,"ion-col",5),h.Pb(10,"ion-skeleton-text",3),h.Tb(),h.Tb(),h.Ub(11,"ion-row"),h.Ub(12,"ion-col",6),h.Pb(13,"ion-skeleton-text",3),h.Tb(),h.Tb(),h.Ub(14,"ion-row"),h.Ub(15,"ion-col"),h.Pb(16,"ion-skeleton-text",3),h.Tb(),h.Tb(),h.Ub(17,"ion-row"),h.Ub(18,"ion-col",7),h.Ub(19,"span",8),h.Pb(20,"ion-skeleton-text",3),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb())},directives:[i.j,i.l,i.Z,i.Q,i.k,i.K,i.o],styles:[".product-brand[_ngcontent-%COMP%]{font-size:12px;font-weight:600;line-height:2.17;letter-spacing:normal;color:#262626}.product-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:1.07;letter-spacing:normal;color:#454545}.product-size[_ngcontent-%COMP%]{font-size:12px;font-weight:400;line-height:1.5;color:#454545}.product-price[_ngcontent-%COMP%], .product-size[_ngcontent-%COMP%]{width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-price[_ngcontent-%COMP%]{font-size:11px;font-weight:700;line-height:3.4;vertical-align:super;color:#f8a345}.product-final-price[_ngcontent-%COMP%]{font-size:15px;font-weight:700;line-height:1.3;color:#9c3;width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-discount[_ngcontent-%COMP%]{font-size:10px;--color:#fff;background-color:#f8a345}.product-img[_ngcontent-%COMP%]{width:200px;height:80px;-o-object-fit:contain;object-fit:contain}.price-linethrough[_ngcontent-%COMP%]{text-decoration:line-through}.disabled[_ngcontent-%COMP%]{opacity:.6}.disabled[_ngcontent-%COMP%] > .out-of-stock[_ngcontent-%COMP%]{position:absolute;font-size:10px;font-weight:600;border-radius:15px;background-color:rgba(38,38,38,.7);padding:4px 1px;color:#000;left:0;right:0;top:30px;width:85%;margin:auto;color:#fff;text-align:center;text-transform:uppercase}.tag-background[_ngcontent-%COMP%]{border-radius:4px;background:rgba(110,154,242,.2);padding:3px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-text[_ngcontent-%COMP%]{color:#6e9af2;font-size:11px}.height-ellipsis[_ngcontent-%COMP%]{height:46px}@media only screen and (max-width:460px){.product-brand[_ngcontent-%COMP%]{font-size:10px}.product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;line-height:1.07;letter-spacing:normal;color:#454545}.product-size[_ngcontent-%COMP%]{font-weight:400;line-height:1.5;color:#454545}.product-price[_ngcontent-%COMP%], .product-size[_ngcontent-%COMP%]{font-size:10px;width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-price[_ngcontent-%COMP%]{font-weight:700;line-height:3.4;vertical-align:super;color:#f8a345}.product-final-price[_ngcontent-%COMP%]{font-size:13px;font-weight:700;line-height:1.3;color:#9c3;width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-discount[_ngcontent-%COMP%]{font-size:9px;--color:#fff;background-color:#f8a345}.tag-text[_ngcontent-%COMP%]{font-size:10px;font-weight:600}.height-ellipsis[_ngcontent-%COMP%]{height:43px}}"]}),t})();function B(t,o){if(1&t){const t=h.Vb();h.Ub(0,"ion-toolbar",16),h.Ub(1,"ion-buttons",17),h.Pb(2,"ion-back-button",18),h.Tb(),h.Ub(3,"ion-title"),h.Dc(4),h.fc(5,"translate"),h.Tb(),h.Ub(6,"ion-buttons",19),h.Ub(7,"ion-button",20),h.cc("click",function(){return h.vc(t),h.ec().searchProduct()}),h.Pb(8,"ion-icon",21),h.Tb(),h.Tb(),h.Tb()}2&t&&(h.Cb(4),h.Ec(h.gc(5,1,"SEARCH_RESULT")))}function R(t,o){if(1&t){const t=h.Vb();h.Ub(0,"ion-toolbar",16),h.Ub(1,"ion-buttons",22),h.Ub(2,"ion-button",20),h.cc("click",function(){return h.vc(t),h.ec().goBack()}),h.Pb(3,"ion-icon",23),h.Tb(),h.Tb(),h.Ub(4,"ion-title"),h.Dc(5),h.fc(6,"titlecase"),h.Tb(),h.Ub(7,"ion-buttons",19),h.Ub(8,"ion-button",20),h.cc("click",function(){return h.vc(t),h.ec().searchProduct()}),h.Pb(9,"ion-icon",21),h.Tb(),h.Tb(),h.Tb()}if(2&t){const t=h.ec();h.Cb(5),h.Ec(h.gc(6,1,t.title))}}function L(t,o){if(1&t&&(h.Ub(0,"ion-row",3),h.Ub(1,"ion-col",3),h.Pb(2,"img",24),h.Tb(),h.Tb()),2&t){const t=h.ec();h.Cb(2),h.mc("src",null==t.category?null:t.category.image_url,h.xc)}}function E(t,o){if(1&t&&(h.Ub(0,"ion-col",28),h.Pb(1,"app-card-subcategory",29),h.Tb()),2&t){const t=o.$implicit;h.Cb(1),h.mc("category",t)}}function j(t,o){if(1&t&&(h.Ub(0,"ion-slide"),h.Ub(1,"ion-grid"),h.Ub(2,"ion-row",3),h.Bc(3,E,2,1,"ion-col",27),h.Tb(),h.Tb(),h.Tb()),2&t){const t=o.$implicit;h.Cb(3),h.mc("ngForOf",t)}}function K(t,o){if(1&t&&(h.Ub(0,"ion-slides",25),h.Bc(1,j,4,1,"ion-slide",26),h.Tb()),2&t){const t=h.ec();h.Cb(1),h.mc("ngForOf",t.categoriesChunk)}}function q(t,o){if(1&t&&(h.Ub(0,"ion-row",3),h.Ub(1,"ion-col",3),h.Pb(2,"img",30),h.Tb(),h.Tb()),2&t){const t=h.ec();h.Cb(2),h.mc("src",t.brandImage,h.xc)}}function A(t,o){if(1&t&&(h.Ub(0,"ion-col",32),h.Pb(1,"app-card-product",33),h.Tb()),2&t){const t=o.$implicit;h.Cb(1),h.mc("product",t)}}function Q(t,o){if(1&t&&(h.Ub(0,"ion-row"),h.Bc(1,A,2,1,"ion-col",31),h.Tb()),2&t){const t=h.ec();h.Cb(1),h.mc("ngForOf",t.products)}}function H(t,o){1&t&&(h.Ub(0,"ion-row",34),h.Ub(1,"ion-col",35),h.Dc(2," Data Not Found "),h.Tb(),h.Tb())}function N(t,o){1&t&&(h.Ub(0,"ion-col",32),h.Pb(1,"app-product-skeleton"),h.Tb())}const V=function(){return[1,2,3,4]};function X(t,o){1&t&&(h.Ub(0,"ion-row",34),h.Bc(1,N,2,0,"ion-col",31),h.Tb()),2&t&&(h.Cb(1),h.mc("ngForOf",h.qc(1,V)))}let $=(()=>{class t{constructor(t,o,n,e,c,i,r,s,a){this.router=t,this.route=o,this.categorySrv=n,this.productSrv=e,this.toastSrv=c,this.modalCtrl=i,this.gs=r,this.navCtrl=s,this.zone=a,this.fetching=!1,this.route.queryParams.subscribe(t=>{this.zone.run(()=>{this.setKeyword(t),this.setCategoryId(t),this.setBrand(t),this.setFilterParam(t)})})}ngOnInit(){}searchProduct(){this.router.navigate(["/product","search"])}getCategory(){this.categorySrv.getDetail(this.categoryId).then(t=>{this.category=t.response,this.title=this.category.name}).catch(t=>{this.toastSrv.show(t.error.error.message)})}getProductList(t){const o=this.setOrdering(),n=this.setFilter();return"keyword"===t?this.productSrv.getListByKeyword(this.search,null,o,n):"category"===t?this.productSrv.getListByCategory(this.categoryId,null,o,n):this.productSrv.getListByBrand(this.brandId,null,o,n)}setOrdering(){let t=null;return this.order&&this.order.orderBy&&(t=this.order),t}setFilter(){let t=null;return this.filter&&this.filter.min_price&&(t=this.filter),t}assignProductList(){this.fetching=!0,this.getProductList(this.productType).then(t=>{this.products=t.response.rows,t.response.image_url&&(this.brandImage=t.response.image_url),this.fetching=!1}).catch(t=>{this.toastSrv.show(t.error.error.message),this.fetching=!1})}getSubcategory(t){this.categorySrv.getSubcategory(t).then(t=>{this.categoriesChunk=this.gs.chunk(t.response,3)}).catch(t=>{this.toastSrv.show(t.error.error.message)})}setKeyword(t){null!==t.search&&""!==t.search&&void 0!==t.search?(this.search=t.search,this.productType="keyword",this.assignProductList()):this.search=null}setCategoryId(t){null!==t.cat_id&&""!==t.cat_id&&void 0!==t.cat_id?(this.categoryId=t.cat_id,this.getSubcategory(this.categoryId),this.getCategory(),this.productType="category",this.assignProductList()):this.categoryId=null}setBrand(t){null!==t.brand_id&&""!==t.brand_id&&void 0!==t.brand_id?(this.brandId=t.brand_id,this.title=t.brand_name,this.productType="brand",this.assignProductList()):(this.brandId=null,this.title=null)}setFilterParam(t){const o={};null!==t.min_price&&""!==t.min_price&&(o.min_price=t.min_price),null!==t.max_price&&""!==t.max_price&&(o.max_price=t.max_price),this.filter=o}showFilter(){var t,o;return Object(s.a)(this,void 0,void 0,function*(){const n=yield this.modalCtrl.create({component:k.a,cssClass:"modal-filter-product",componentProps:{minPrice:null===(t=this.filter)||void 0===t?void 0:t.min_price,maxPrice:null===(o=this.filter)||void 0===o?void 0:o.max_price}});return n.onDidDismiss().then(t=>{const o=t.data;o&&(this.filter={min_price:o.minPrice,max_price:o.maxPrice},this.refreshProduct())}),yield n.present()})}showSort(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:D.a,cssClass:"modal-sort-product",componentProps:{option:this.sort}});return t.onDidDismiss().then(t=>{var o,n;const e=t.data;e&&(this.sort=e.value,this.order={orderBy:null===(o=e.order)||void 0===o?void 0:o.orderBy,orderType:null===(n=e.order)||void 0===n?void 0:n.orderType},this.refreshProduct())}),yield t.present()})}refreshProduct(){this.products=[],this.assignProductList()}goBack(){this.zone.run(()=>{this.navCtrl.back()})}}return t.\u0275fac=function(o){return new(o||t)(h.Ob(r.g),h.Ob(r.a),h.Ob(b.g),h.Ob(b.j),h.Ob(u.e),h.Ob(i.eb),h.Ob(u.c),h.Ob(i.fb),h.Ob(h.B))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-product-list"]],decls:26,vars:17,consts:[[1,"ion-no-border"],["mode","ios",4,"ngIf"],[3,"fullscreen"],[1,"ion-no-padding"],["class","ion-no-padding",4,"ngIf"],["pager","","class","ion-padding-bottom",4,"ngIf"],[4,"ngIf"],["class","padding-product",4,"ngIf"],["color","light",3,"translucent","mode"],[2,"background","white"],[1,"padding-footer"],["size","5.5",1,"ion-text-center"],["color","success",3,"click"],["name","funnel"],["size","1",1,"ion-text-center"],["color","success",1,"divider"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back","defaultHref","/product/search","icon","chevron-back-outline"],["slot","end"],[3,"click"],["name","search",1,"header-action-size"],["slot","start","mode","md"],["name","chevron-back-outline","slot","icon-only","color","dark"],["onerror","this.onerror=null;this.src='assets/images/placeholder-banner.png'",1,"full-width","img-header",3,"src"],["pager","",1,"ion-padding-bottom"],[4,"ngFor","ngForOf"],["class","ion-no-padding","size","4",4,"ngFor","ngForOf"],["size","4",1,"ion-no-padding"],[3,"category"],[1,"full-width","img-header",3,"src"],["class","ion-padding-horizontal","size","4",4,"ngFor","ngForOf"],["size","4",1,"ion-padding-horizontal"],[3,"product"],[1,"padding-product"],[1,"ion-text-center"]],template:function(t,o){1&t&&(h.Ub(0,"ion-header",0),h.Bc(1,B,9,3,"ion-toolbar",1),h.Bc(2,R,10,3,"ion-toolbar",1),h.Tb(),h.Ub(3,"ion-content",2),h.Ub(4,"ion-grid",3),h.Bc(5,L,3,1,"ion-row",4),h.Bc(6,K,2,1,"ion-slides",5),h.Bc(7,q,3,1,"ion-row",4),h.Bc(8,Q,2,1,"ion-row",6),h.Bc(9,H,3,0,"ion-row",7),h.Bc(10,X,2,2,"ion-row",7),h.Tb(),h.Tb(),h.Ub(11,"ion-footer",8),h.Ub(12,"ion-grid",9),h.Ub(13,"ion-row",10),h.Ub(14,"ion-col",11),h.Ub(15,"ion-text",12),h.cc("click",function(){return o.showSort()}),h.Pb(16,"ion-icon",13),h.Dc(17),h.fc(18,"translate"),h.Tb(),h.Tb(),h.Ub(19,"ion-col",14),h.Pb(20,"ion-text",15),h.Tb(),h.Ub(21,"ion-col",11),h.Ub(22,"ion-text",12),h.cc("click",function(){return o.showFilter()}),h.Pb(23,"ion-icon",13),h.Dc(24),h.fc(25,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&t&&(h.Cb(1),h.mc("ngIf",o.search),h.Cb(1),h.mc("ngIf",!o.search),h.Cb(1),h.mc("fullscreen",!0),h.Cb(2),h.mc("ngIf",!o.search&&o.category),h.Cb(1),h.mc("ngIf",o.category&&o.categoriesChunk&&o.categoriesChunk.length),h.Cb(1),h.mc("ngIf",o.brandImage),h.Cb(1),h.mc("ngIf",o.products&&o.products.length),h.Cb(1),h.mc("ngIf",(!o.products||o.products&&!o.products.length)&&!o.fetching),h.Cb(1),h.mc("ngIf",(!o.products||o.products&&!o.products.length)&&o.fetching),h.Cb(1),h.mc("translucent",!1)("mode","md"),h.Cb(6),h.Fc(" ",h.gc(18,13,"SORT")," "),h.Cb(7),h.Fc(" ",h.gc(25,15,"FILTER")," "))},directives:[i.t,e.n,i.p,i.s,i.r,i.K,i.o,i.X,i.u,i.bb,i.i,i.e,i.f,i.ab,i.h,i.S,e.m,i.R,I,M.a,F],pipes:[f.a,e.t],styles:[".img-header[_ngcontent-%COMP%]{width:100%;height:16vh;-o-object-fit:cover;object-fit:cover}.padding-product[_ngcontent-%COMP%]{margin:.5em}.padding-footer[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}ion-header[_ngcontent-%COMP%]{border:none}.custom-search[_ngcontent-%COMP%]{padding-left:9px}"]}),t})();n("TwVa");var J=n("2oRN");function G(t,o){if(1&t){const t=h.Vb();h.Ub(0,"ion-row",10),h.Ub(1,"ion-col",11),h.Pb(2,"ion-icon",12),h.Tb(),h.Ub(3,"ion-col",13),h.Ub(4,"ion-label",14),h.cc("click",function(){h.vc(t);const n=o.$implicit;return h.ec(2).setKeyword(n)}),h.Dc(5),h.Tb(),h.Tb(),h.Ub(6,"ion-col",15),h.Ub(7,"ion-icon",16),h.cc("click",function(){h.vc(t);const n=o.index;return h.ec(2).removeItem(n)}),h.Tb(),h.Tb(),h.Tb()}if(2&t){const t=o.$implicit;h.Cb(5),h.Fc(" ",t,"")}}function W(t,o){if(1&t){const t=h.Vb();h.Ub(0,"ion-row",3),h.Ub(1,"ion-col",4),h.Ub(2,"ion-text",5),h.Dc(3),h.fc(4,"translate"),h.Tb(),h.Tb(),h.Ub(5,"ion-col",6),h.Ub(6,"ion-text",7),h.cc("click",function(){return h.vc(t),h.ec().removeAllRecent()}),h.Dc(7),h.fc(8,"translate"),h.Tb(),h.Tb(),h.Ub(9,"ion-col",8),h.Bc(10,G,8,1,"ion-row",9),h.fc(11,"slice"),h.Tb(),h.Tb()}if(2&t){const t=h.ec();h.Cb(3),h.Fc(" ",h.gc(4,3,"RECENT_SEARCHES"),""),h.Cb(4),h.Ec(h.gc(8,5,"CLEAR_RECENT")),h.Cb(3),h.mc("ngForOf",h.ic(11,7,t.recentSearches,0,3))}}function Y(t,o){if(1&t){const t=h.Vb();h.Ub(0,"ion-chip",21),h.cc("click",function(){h.vc(t);const n=o.$implicit;return h.ec(2).goToProductByCategory(null==n?null:n.category_id)}),h.Ub(1,"ion-label",22),h.Dc(2),h.Tb(),h.Tb()}if(2&t){const t=o.$implicit;h.Cb(2),h.Ec(null==t?null:t.name)}}function Z(t,o){if(1&t&&(h.Ub(0,"ion-row",17),h.Ub(1,"ion-col",18),h.Ub(2,"ion-text",5),h.Dc(3),h.fc(4,"translate"),h.Tb(),h.Tb(),h.Ub(5,"ion-col",19),h.Bc(6,Y,3,1,"ion-chip",20),h.Tb(),h.Tb()),2&t){const t=h.ec();h.Cb(3),h.Fc(" ",h.gc(4,2,"SEARCH_BY_CATEGORY"),""),h.Cb(3),h.mc("ngForOf",t.categories)}}function tt(t,o){if(1&t&&(h.Ub(0,"ion-row",17),h.Ub(1,"ion-col",18),h.Ub(2,"ion-text",5),h.Dc(3),h.fc(4,"translate"),h.Tb(),h.Tb(),h.Ub(5,"ion-col",8),h.Pb(6,"app-slide-product",23),h.Tb(),h.Tb()),2&t){const t=h.ec();h.Cb(3),h.Fc(" ",h.gc(4,2,"POPULAR_SEARCHES"),""),h.Cb(3),h.mc("products",t.products)}}function ot(t,o){if(1&t&&(h.Ub(0,"ion-row"),h.Ub(1,"ion-col",18),h.Ub(2,"ion-text",5),h.Dc(3),h.fc(4,"translate"),h.Tb(),h.Tb(),h.Ub(5,"ion-col",8),h.Pb(6,"app-slide-brand",24),h.Tb(),h.Tb()),2&t){const t=h.ec();h.Cb(3),h.Fc(" ",h.gc(4,2,"FEATURED_BRAND"),""),h.Cb(3),h.mc("brands",t.brands)}}let nt=(()=>{class t{constructor(t,o,n,e,c,i){this.categorySrv=t,this.brandSrv=o,this.productSrv=n,this.toastSrv=e,this.cache=c,this.router=i,this.assignKeyword=new h.o,this.page={row:10,page:1}}ngOnInit(){this.getCategory(),this.getFeaturedBrand()}setKeyword(t){this.assignKeyword.emit(t)}getCategory(){this.categorySrv.getList().then(t=>{this.categories=t.response}).catch(t=>{this.toastSrv.show(t.error.error.message)})}goToProductByCategory(t){this.router.navigate(["/product","list"],{queryParams:{cat_id:t}})}getFeaturedBrand(){this.brandSrv.getFeaturedList().then(t=>{this.brands=t.response}).catch(t=>{this.toastSrv.show(t.error.error.message)})}removeItem(t){this.recentSearches.splice(t,1),this.cache.setRecentSearch(this.recentSearches)}removeAllRecent(){this.cache.removeRecentSearch(),this.recentSearches=[]}}return t.\u0275fac=function(o){return new(o||t)(h.Ob(b.g),h.Ob(b.d),h.Ob(b.j),h.Ob(u.e),h.Ob(u.b),h.Ob(r.g))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-product-search-without-keyword"]],inputs:{recentSearches:"recentSearches",products:"products"},outputs:{assignKeyword:"assignKeyword"},decls:4,vars:4,consts:[["class","ion-padding-vertical ion-align-items-center",4,"ngIf"],["class","ion-padding-bottom",4,"ngIf"],[4,"ngIf"],[1,"ion-padding-vertical","ion-align-items-center"],["size","7",1,"ion-padding-start","padding-category",2,"padding-top","0px"],[1,"search-title"],["size","5",1,"ion-padding-end","ion-text-right"],[1,"clear-recent-search",3,"click"],["size","12"],["class","padding-item-recent",4,"ngFor","ngForOf"],[1,"padding-item-recent"],["size","1",1,"ion-padding-start"],["name","time-outline","color","medium",1,"icon-recent-search"],["size","9"],["color","limegreen",1,"text-recent-search",3,"click"],["size","2",1,"ion-text-center"],["name","close-outline",1,"icon-recent-search",3,"click"],[1,"ion-padding-bottom"],["size","12",1,"ion-padding-horizontal"],["size","12",1,"padding-category"],["style","border: 1px solid #99cc33; background: white",3,"click",4,"ngFor","ngForOf"],[2,"border","1px solid #99cc33","background","white",3,"click"],["color","limegreen"],[3,"products"],[3,"brands"]],template:function(t,o){1&t&&(h.Bc(0,W,12,11,"ion-row",0),h.Bc(1,Z,7,4,"ion-row",1),h.Bc(2,tt,7,4,"ion-row",1),h.Bc(3,ot,7,4,"ion-row",2)),2&t&&(h.mc("ngIf",o.recentSearches&&o.recentSearches.length),h.Cb(1),h.mc("ngIf",o.categories&&o.categories.length),h.Cb(1),h.mc("ngIf",o.products&&o.products.length),h.Cb(1),h.mc("ngIf",o.brands&&o.brands.length))},directives:[e.n,i.K,i.o,i.X,e.m,i.u,i.C,i.n,g.a,J.a],pipes:[f.a,e.s],styles:[".padding-product[_ngcontent-%COMP%]{margin:.5em}.search-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.2;color:#353535}.padding-category[_ngcontent-%COMP%]{padding-top:12px;padding-left:12px;padding-right:12px}.icon-recent-search[_ngcontent-%COMP%]{font-size:13px;margin-right:10px;margin-top:2px;color:grey}.text-recent-search[_ngcontent-%COMP%]{font-size:13px;margin-left:5px}.clear-recent-search[_ngcontent-%COMP%]{font-size:11px;line-height:1.25;color:#cbcbcb;border:1px solid #cbcbcb;border-radius:12px;padding:4px 12px}.padding-item-recent[_ngcontent-%COMP%]{padding-top:12px}"]}),t})(),et=(()=>{class t{constructor(){this.redirectToList=new h.o}ngOnInit(){}goToProductList(){this.redirectToList.emit()}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=h.Ib({type:t,selectors:[["app-product-search-with-keyword"]],inputs:{keyword:"keyword",products:"products",brands:"brands"},outputs:{redirectToList:"redirectToList"},decls:18,vars:11,consts:[[1,"ion-padding-vertical"],["size","9",1,"ion-padding-start","ion-padding-bottom-small"],[1,"search-title"],["size","3",1,"ion-text-right","ion-padding-end"],[1,"section-see-all",3,"click"],["size","12"],[3,"products"],["size","12",1,"ion-padding-horizontal"],[3,"brands"]],template:function(t,o){1&t&&(h.Ub(0,"ion-row",0),h.Ub(1,"ion-col",1),h.Ub(2,"ion-text",2),h.Dc(3),h.fc(4,"translate"),h.Tb(),h.Tb(),h.Ub(5,"ion-col",3),h.Ub(6,"ion-text",4),h.cc("click",function(){return o.goToProductList()}),h.Dc(7),h.fc(8,"translate"),h.Tb(),h.Tb(),h.Ub(9,"ion-col",5),h.Pb(10,"app-slide-product",6),h.Tb(),h.Tb(),h.Ub(11,"ion-row"),h.Ub(12,"ion-col",7),h.Ub(13,"ion-text",2),h.Dc(14),h.fc(15,"translate"),h.Tb(),h.Tb(),h.Ub(16,"ion-col",5),h.Pb(17,"app-slide-brand",8),h.Tb(),h.Tb()),2&t&&(h.Cb(3),h.Fc(" ",h.gc(4,5,"SEARCH_RESULT"),""),h.Cb(4),h.Fc(" ",h.gc(8,7,"SEE_ALL")," "),h.Cb(3),h.mc("products",o.products),h.Cb(4),h.Fc(" ",h.gc(15,9,"RELATED_BRAND"),""),h.Cb(3),h.mc("brands",o.brands))},directives:[i.K,i.o,i.X,g.a,J.a],pipes:[f.a],styles:[".search-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.2;color:#353535}"]}),t})();const ct=["searchBar"];function it(t,o){if(1&t){const t=h.Vb();h.Ub(0,"app-product-search-without-keyword",18),h.cc("assignKeyword",function(o){return h.vc(t),h.ec().assignKeyword(o)}),h.Tb()}if(2&t){const t=h.ec();h.mc("recentSearches",t.recentSearches)("products",t.popularProducts)}}function rt(t,o){if(1&t){const t=h.Vb();h.Ub(0,"app-product-search-with-keyword",19),h.cc("redirectToList",function(){return h.vc(t),h.ec().goToProductList()}),h.Tb()}if(2&t){const t=h.ec();h.mc("keyword",t.keyword)("products",t.products)("brands",t.brands)}}let st=(()=>{class t{constructor(t,o,n,e,c,i){this.productSrv=t,this.brandSrv=o,this.toastSrv=n,this.cache=e,this.modalCtrl=c,this.router=i,this.recentSearches=[],this.page={row:10,page:1}}ngOnInit(){this.saveRecentSearch(),this.getPopularProduct()}ionViewDidEnter(){setTimeout(()=>{this.searchBar.setFocus()},150)}fetchData(){this.keyword&&""!==this.keyword&&null!==this.keyword&&(this.getProduct(),this.getBrand())}searchProduct(t){this.keyword=t.detail.value,this.fetchData()}assignKeyword(t){this.keyword=t,this.fetchData()}getProduct(){let t=null;this.filter&&this.filter.min_price&&(t=this.filter),this.productSrv.getListByKeyword(this.keyword,this.page,null,t).then(t=>{this.saveRecentSearch(),this.products=t.response.rows}).catch(t=>{this.toastSrv.show(t.error.error.message)})}getBrand(){this.brandSrv.getRelated(this.keyword,this.page).then(t=>{this.saveRecentSearch(),this.brands=t.response.rows}).catch(t=>{this.toastSrv.show(t.error.error.message)})}appendRecentSearch(){if(this.recentSearches.includes(this.keyword)){const t=this.recentSearches.findIndex(t=>t===this.keyword);this.recentSearches.splice(t,1)}this.recentSearches.push(this.keyword)}saveRecentSearch(){this.cache.getRecentSearch().then(t=>{t&&(this.recentSearches=t.reverse()),this.keyword&&""!==this.keyword&&null!==this.keyword&&this.appendRecentSearch(),this.cache.setRecentSearch(this.recentSearches)})}showFilter(){var t,o;return Object(s.a)(this,void 0,void 0,function*(){const n=yield this.modalCtrl.create({component:k.a,cssClass:"modal-filter-product",componentProps:{minPrice:null===(t=this.filter)||void 0===t?void 0:t.min_price,maxPrice:null===(o=this.filter)||void 0===o?void 0:o.max_price}});return n.onDidDismiss().then(t=>{const o=t.data;o&&(this.filter={min_price:o.minPrice,max_price:o.maxPrice},this.refreshProduct())}),yield n.present()})}refreshProduct(){this.getPopularProduct(),this.fetchData()}getPopularProduct(){let t=null;this.filter&&this.filter.min_price&&(t=this.filter),this.productSrv.getPopular(this.page,null,t).then(t=>{this.popularProducts=t.response.rows}).catch(t=>{this.toastSrv.show(t.error.error.message)})}goToProductList(){var t,o;const n={search:this.keyword,min_price:null===(t=this.filter)||void 0===t?void 0:t.min_price,max_price:null===(o=this.filter)||void 0===o?void 0:o.max_price};this.router.navigate(["/product","list"],{queryParams:n})}scanQR(){this.router.navigate(["/qr","scan"])}}return t.\u0275fac=function(o){return new(o||t)(h.Ob(b.j),h.Ob(b.d),h.Ob(u.e),h.Ob(u.b),h.Ob(i.eb),h.Ob(r.g))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-product-search"]],viewQuery:function(t,o){if(1&t&&h.Jc(ct,1),2&t){let t;h.tc(t=h.dc())&&(o.searchBar=t.first)}},decls:24,vars:10,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back","defaultHref","/tabs/home","icon","chevron-back-outline"],[1,"ion-justify-content-center","ion-align-items-center"],["size","10"],["mode","ios","debounce","1000",1,"custom-search",3,"value","ionChange"],["searchBar",""],[1,"ion-no-padding","ion-align-self-center","ion-text-center","scan-icon-container",3,"click"],["src","assets/images/scan.svg",1,"scan-icon"],["size","2"],[1,"ion-align-self-center",3,"click"],["name","funnel","slot","start","size","medium","color","primary",1,"filter-icon"],["color","primary",1,"header-action-size"],[3,"fullscreen"],[1,"ion-no-padding"],[3,"recentSearches","products","assignKeyword",4,"ngIf"],[3,"keyword","products","brands","redirectToList",4,"ngIf"],[3,"recentSearches","products","assignKeyword"],[3,"keyword","products","brands","redirectToList"]],template:function(t,o){1&t&&(h.Ub(0,"ion-header",0),h.Ub(1,"ion-toolbar",1),h.Ub(2,"ion-buttons",2),h.Pb(3,"ion-back-button",3),h.Tb(),h.Ub(4,"ion-title"),h.Dc(5),h.fc(6,"translate"),h.Tb(),h.Tb(),h.Ub(7,"ion-toolbar",1),h.Ub(8,"ion-row",4),h.Ub(9,"ion-col",5),h.Ub(10,"ion-searchbar",6,7),h.cc("ionChange",function(t){return o.searchProduct(t)}),h.Tb(),h.Ub(12,"div",8),h.cc("click",function(t){return o.scanQR(),t.stopPropagation()}),h.Pb(13,"img",9),h.Tb(),h.Tb(),h.Ub(14,"ion-col",10),h.Ub(15,"div",11),h.cc("click",function(){return o.showFilter()}),h.Pb(16,"ion-icon",12),h.Ub(17,"ion-text",13),h.Dc(18),h.fc(19,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(20,"ion-content",14),h.Ub(21,"ion-grid",15),h.Bc(22,it,1,2,"app-product-search-without-keyword",16),h.Bc(23,rt,1,3,"app-product-search-with-keyword",17),h.Tb(),h.Tb()),2&t&&(h.Cb(5),h.Ec(h.gc(6,6,"SEARCH")),h.Cb(5),h.nc("value",o.keyword),h.Cb(8),h.Fc(" ",h.gc(19,8,"FILTER")," "),h.Cb(2),h.mc("fullscreen",!0),h.Cb(2),h.mc("ngIf",!o.keyword),h.Cb(1),h.mc("ngIf",o.keyword))},directives:[i.t,i.bb,i.i,i.e,i.f,i.ab,i.K,i.o,i.L,i.mb,i.u,i.X,i.p,i.s,e.n,nt,et],pipes:[f.a],styles:[".header-action-size[_ngcontent-%COMP%]{font-size:12px!important;text-transform:capitalize}.filter-icon[_ngcontent-%COMP%]{font-size:16px!important}.custom-search[_ngcontent-%COMP%]{padding-left:9px}ion-header[_ngcontent-%COMP%]{border:none}"]}),t})();const at=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=h.Ib({type:t,selectors:[["app-product"]],decls:1,vars:0,template:function(t,o){1&t&&h.Pb(0,"ion-router-outlet")},directives:[i.J],styles:[""]}),t})(),children:[{path:"list",component:$},{path:"search",component:st},{path:"",redirectTo:"list",pathMatch:"full"},{path:"detail/:id",component:O}]}];let lt=(()=>{class t{}return t.\u0275mod=h.Mb({type:t}),t.\u0275inj=h.Lb({factory:function(o){return new(o||t)},imports:[[r.j.forChild(at)],r.j]}),t})();var dt=n("8/Qx"),ut=n("CNc/"),bt=n("8uOt"),pt=n("PCNd"),ht=n("Vgir");let gt=(()=>{class t{}return t.\u0275mod=h.Mb({type:t}),t.\u0275inj=h.Lb({factory:function(o){return new(o||t)},imports:[[e.b,c.j,i.cb,lt,dt.a,ut.a,bt.a,pt.a,ht.a]]}),t})()}}]);