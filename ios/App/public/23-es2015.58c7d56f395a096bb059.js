(window.webpackJsonp=window.webpackJsonp||[]).push([[23,37,38,39],{F2Ao:function(t,n,o){"use strict";o.r(n),o.d(n,"BundlingPageModule",function(){return U});var i=o("ofXK"),e=o("3Pt+"),r=o("TEn/"),c=o("tyNb"),s=o("mrSG"),d=o("vczW"),l=o("axhS"),a=o("ZF+8"),b=o("LF58"),u=o("fXoL"),h=o("gq6x"),p=o("1rxE");function g(t,n){if(1&t&&(u.Ub(0,"ion-card-header",8),u.Pb(1,"img",28),u.Tb()),2&t){const t=u.ec();u.Cb(1),u.mc("src",null==t.bundling?null:t.bundling.image_url,u.xc)}}function f(t,n){if(1&t&&(u.Ub(0,"ion-col",29),u.Pb(1,"app-card-product",30),u.Tb()),2&t){const t=n.$implicit;u.Cb(1),u.mc("product",t)}}let m=(()=>{class t{constructor(t,n,o,i,e,r){this.router=t,this.route=n,this.bundlingSrv=o,this.productSrv=i,this.toastSrv=e,this.modalCtrl=r,this.route.params.subscribe(t=>{null!==t.id&&(this.id=t.id)}),this.productPage={row:24,page:1}}ngOnInit(){this.id&&(this.getBundlingDetail(),this.getProduct())}searchProduct(){this.router.navigate(["/product","search"])}getBundlingDetail(){this.bundlingSrv.getDetail(this.id).then(t=>{this.bundling=t.response}).catch(t=>{this.toastSrv.show(t.error.error.message)})}getProduct(){let t=null,n=null;this.order&&this.order.orderBy&&(t=this.order),this.filter&&this.filter.min_price&&(n=this.filter),this.productSrv.getListByBundling(this.id,this.productPage,t,n).then(t=>{const n=t.response.rows;this.productCount=t.response.count,this.products&&this.products.length?this.products.concat(n):this.products=n}).catch(t=>{this.toastSrv.show(t.error.error.message)})}loadMoreProduct(t){setTimeout(()=>{t.target.complete(),this.productPage.page>=Math.ceil(this.productCount/this.productPage.row)?t.target.disabled=!0:(this.productPage.page+=1,this.getProduct())},600)}showFilter(){var t,n;return Object(s.a)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:d.a,cssClass:"modal-filter-product",componentProps:{minPrice:null===(t=this.filter)||void 0===t?void 0:t.min_price,maxPrice:null===(n=this.filter)||void 0===n?void 0:n.max_price}});return o.onDidDismiss().then(t=>{const n=t.data;n&&(this.filter={min_price:n.minPrice,max_price:n.maxPrice},this.refreshProduct())}),yield o.present()})}showSort(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:l.a,cssClass:"modal-sort-product",componentProps:{option:this.sort}});return t.onDidDismiss().then(t=>{var n,o;const i=t.data;i&&(this.sort=i.value,this.order={orderBy:null===(n=i.order)||void 0===n?void 0:n.orderBy,orderType:null===(o=i.order)||void 0===o?void 0:o.orderType},this.refreshProduct())}),yield t.present()})}refreshProduct(){this.productPage.page=1,this.products=[],this.getProduct()}}return t.\u0275fac=function(n){return new(n||t)(u.Ob(c.g),u.Ob(c.a),u.Ob(b.e),u.Ob(b.j),u.Ob(a.e),u.Ob(r.eb))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-bundling-detail"]],decls:40,vars:13,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back","defaultHref","/tabs/home","icon","chevron-back-outline"],[1,"header-title"],["slot","end"],[3,"click"],["name","search",1,"header-action-size"],[1,"ion-no-padding"],[1,"ion-no-border","ion-no-margin"],["class","ion-no-padding",4,"ngIf"],[1,"ion-no-padding","ion-text-left"],[1,"ion-padding-horizontal","ion-padding-top"],["size","12",1,"truncate"],[1,"bundling-title"],["size","12"],[1,"bundling-desc"],["size","4","class","ion-padding-horizontal",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles"],["color","light",3,"translucent","mode"],[2,"background","white"],[1,"ion-align-items-center"],["size","6",1,"ion-text-center",2,"border-right","1px solid #99cc33"],["color","success",3,"click"],["name","funnel"],["size","6",1,"ion-text-center",2,"border-left","1px solid #99cc33"],["name","filter"],[1,"img-banner",3,"src"],["size","4",1,"ion-padding-horizontal"],[3,"product"]],template:function(t,n){1&t&&(u.Ub(0,"ion-header",0),u.Ub(1,"ion-toolbar",1),u.Ub(2,"ion-buttons",2),u.Pb(3,"ion-back-button",3),u.Tb(),u.Ub(4,"ion-title",4),u.Dc(5),u.Tb(),u.Ub(6,"ion-buttons",5),u.Ub(7,"ion-button",6),u.cc("click",function(){return n.searchProduct()}),u.Pb(8,"ion-icon",7),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(9,"ion-content"),u.Ub(10,"ion-grid",8),u.Ub(11,"ion-row",8),u.Ub(12,"ion-col"),u.Ub(13,"ion-card",9),u.Bc(14,g,2,1,"ion-card-header",10),u.Ub(15,"ion-card-content",11),u.Ub(16,"ion-row",12),u.Ub(17,"ion-col",13),u.Ub(18,"ion-text",14),u.Dc(19),u.Tb(),u.Tb(),u.Ub(20,"ion-col",15),u.Ub(21,"ion-text",16),u.Dc(22),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(23,"ion-row"),u.Bc(24,f,2,1,"ion-col",17),u.Tb(),u.Tb(),u.Ub(25,"ion-infinite-scroll",18),u.cc("ionInfinite",function(t){return n.loadMoreProduct(t)}),u.Pb(26,"ion-infinite-scroll-content",19),u.Tb(),u.Tb(),u.Ub(27,"ion-footer",20),u.Ub(28,"ion-grid",21),u.Ub(29,"ion-row",22),u.Ub(30,"ion-col",23),u.Ub(31,"ion-text",24),u.cc("click",function(){return n.showSort()}),u.Pb(32,"ion-icon",25),u.Dc(33),u.fc(34,"translate"),u.Tb(),u.Tb(),u.Ub(35,"ion-col",26),u.Ub(36,"ion-text",24),u.cc("click",function(){return n.showFilter()}),u.Pb(37,"ion-icon",27),u.Dc(38),u.fc(39,"translate"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(5),u.Ec(null==n.bundling?null:n.bundling.name),u.Cb(9),u.mc("ngIf",null==n.bundling?null:n.bundling.image_url),u.Cb(5),u.Fc("",null==n.bundling?null:n.bundling.name," "),u.Cb(3),u.Fc(" ",null==n.bundling?null:n.bundling.description," "),u.Cb(2),u.mc("ngForOf",n.products),u.Cb(3),u.mc("translucent",!1)("mode","md"),u.Cb(6),u.Fc(" ",u.gc(34,9,"SORT")," "),u.Cb(5),u.Fc(" ",u.gc(39,11,"FILTER")," "))},directives:[r.t,r.bb,r.i,r.e,r.f,r.ab,r.h,r.u,r.p,r.s,r.K,r.o,r.j,i.n,r.k,r.X,i.m,r.v,r.w,r.r,r.l,h.a],pipes:[p.a],styles:[".img-header[_ngcontent-%COMP%]{width:100%;height:120px;border-radius:8px;-o-object-fit:cover;object-fit:cover}.bundling-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;line-height:1.19;letter-spacing:normal;color:#0f447a}.img-banner[_ngcontent-%COMP%]{width:100%;height:16vh;-o-object-fit:cover;object-fit:cover}ion-header[_ngcontent-%COMP%]{border:none}"]}),t})();const v=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=u.Ib({type:t,selectors:[["app-bundling"]],decls:1,vars:0,template:function(t,n){1&t&&u.Pb(0,"ion-router-outlet")},directives:[r.J],styles:[""]}),t})(),children:[{path:":id/detail",component:m}]}];let P=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(n){return new(n||t)},imports:[[c.j.forChild(v)],c.j]}),t})();var T=o("CNc/"),w=o("PCNd");let U=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(n){return new(n||t)},imports:[[i.b,e.j,r.cb,P,T.a,w.a]]}),t})()},PCNd:function(t,n,o){"use strict";o.d(n,"a",function(){return r});var i=o("ofXK"),e=o("fXoL");let r=(()=>{class t{}return t.\u0275mod=e.Mb({type:t}),t.\u0275inj=e.Lb({factory:function(n){return new(n||t)},imports:[[i.b]]}),t})()}}]);