!function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[30,37,38,39],{PCNd:function(t,n,o){"use strict";o.d(n,"a",function(){return c});var r=o("ofXK"),i=o("fXoL"),c=function(){var t=function t(){e(this,t)};return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(n){return new(n||t)},imports:[[r.b]]}),t}()},dFHt:function(t,o,r){"use strict";r.r(o),r.d(o,"ProductPageModule",function(){return _t});var i=r("ofXK"),c=r("3Pt+"),a=r("TEn/"),s=r("tyNb"),u=r("mrSG"),l=r("OKhX"),d=r("FvCk"),p=r("H98O"),b=r("ZF+8"),g=r("LF58"),h=r("3WbM"),f=r("fXoL"),m=r("3zol"),v=r("1rxE");function y(t,n){1&t&&f.Pb(0,"img",45)}function w(t,n){if(1&t&&f.Pb(0,"img",46),2&t){var e=f.ec();f.mc("src",null==e.productData?null:e.productData.image_url,f.xc)}}function T(t,n){1&t&&(f.Ub(0,"div",47),f.Dc(1,"Out of stock"),f.Tb())}var C=function(t){return{color:t}};function x(t,n){if(1&t&&(f.Ub(0,"ion-row",48),f.Ub(1,"ion-col"),f.Ub(2,"span",49),f.Pb(3,"ion-icon",50),f.Ub(4,"ion-text",51),f.Dc(5),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&t){var e=f.ec();f.Cb(2),f.zc(e.productTagBg),f.Cb(1),f.mc("ngStyle",f.rc(5,C,null==e.productData||null==e.productData.product_tag?null:e.productData.product_tag.color)),f.Cb(1),f.mc("ngStyle",f.rc(7,C,null==e.productData||null==e.productData.product_tag?null:e.productData.product_tag.color)),f.Cb(1),f.Fc(" ",null==e.productData||null==e.productData.product_tag?null:e.productData.product_tag.name," ")}}function k(t,n){if(1&t&&(f.Ub(0,"ion-text",52),f.Dc(1),f.Pb(2,"br"),f.Tb()),2&t){var e=f.ec();f.Cb(1),f.Fc(" ",null==e.productData||null==e.productData.brand?null:e.productData.brand.name," ")}}function P(t,n){1&t&&(f.Ub(0,"ion-text",53),f.Dc(1),f.fc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Fc(" ",f.gc(2,1,"STOCK")," < 5 "))}function U(t,n){1&t&&f.Pb(0,"ion-spinner",54)}var _,O=function(){return["/product/search"]},D=function(t){return{disabled:t}},S=((_=function(){function t(n,o,r,i,c,a,s,u,l){e(this,t),this.translateSrv=n,this.toastSrv=o,this.productSrv=r,this.cartSrv=i,this.activatedRoute=c,this.navCtrl=a,this.modalCtrl=s,this.router=u,this.gs=l,this.isFavorite=!1,this.productData=null,this.productId=null,this.qty=0,this.maxQty=0,this.isOnFetch=!1,this.observeParam(),this.page={row:8,page:1}}return n(t,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.observeFetchState()}},{key:"observeFetchState",value:function(){var t=this;this.gs.observeOnFetch().subscribe(function(n){t.isOnFetch=n})}},{key:"scanQR",value:function(){this.router.navigate(["/qr","scan"])}},{key:"observeParam",value:function(){var t=this;this.activatedRoute.params.subscribe(function(n){t.productId=null==n?void 0:n.id,t.fetchProductDetail(t.productId)})}},{key:"fetchProductDetail",value:function(t){var n=this;this.productSrv.getProductDetail(t).then(function(t){n.productData=t,n.cartSrv.getCartMaxQty(t.product_id).then(function(t){n.maxQty=t.max_quantity,n.qty=t.max_quantity>0?1:0}),n.getRelatedProduct()})}},{key:"goBack",value:function(){this.navCtrl.pop()}},{key:"addItemToCart",value:function(){var t=this;this.qty>0&&this.cartSrv.addToCart(this.productId,this.qty).then(function(n){t.presentModalSuccess()}).catch(function(n){t.gs.log("err",n)})}},{key:"presentModalSuccess",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:l.a,cssClass:"my-custom-class"});case 2:return(n=t.sent).onDidDismiss().then(function(t){"cart"===(null==t?void 0:t.data)&&e.navCtrl.navigateRoot(["tabs/cart"])}),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"getRelatedProduct",value:function(){var t,n=this;this.productSrv.getRelated(null===(t=this.productData)||void 0===t?void 0:t.product_id,this.page).then(function(t){n.products=t.response.rows}).catch(function(t){n.toastSrv.show(t.error.error.message)})}},{key:"updateLocalQuantity",value:function(t){t?this.qty<this.maxQty&&(this.qty+=1):this.qty>0&&(this.qty-=1)}},{key:"addToFavorite",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:d.a,cssClass:"modal-add-to-favorite",componentProps:{productId:this.productId}});case 2:return(n=t.sent).onDidDismiss().then(function(){}),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"productTagBg",get:function(){var t,n,e,o,r,i;return"background: rgba("+this.gs.hexToRgb(null===(n=null===(t=this.productData)||void 0===t?void 0:t.product_tag)||void 0===n?void 0:n.color).r+","+this.gs.hexToRgb(null===(o=null===(e=this.productData)||void 0===e?void 0:e.product_tag)||void 0===o?void 0:o.color).g+","+this.gs.hexToRgb(null===(i=null===(r=this.productData)||void 0===r?void 0:r.product_tag)||void 0===i?void 0:i.color).b+", 0.2) !important"}}]),t}()).\u0275fac=function(t){return new(t||_)(f.Ob(p.a),f.Ob(h.a),f.Ob(g.j),f.Ob(g.f),f.Ob(s.a),f.Ob(a.fb),f.Ob(a.eb),f.Ob(s.g),f.Ob(b.c))},_.\u0275cmp=f.Ib({type:_,selectors:[["app-product-detail"]],decls:78,vars:54,consts:[[1,"ion-no-border","ion-margin-top",3,"translucent"],["mode","ios"],["slot","start"],[3,"click"],["name","chevron-back-outline","slot","icon-only","color","dark"],[1,"ion-no-padding"],["size","12",1,"ion-no-padding"],["mode","ios",1,"custom-search",3,"placeholder","routerLink"],[1,"ion-no-padding","ion-align-self-center","ion-text-center","scan-icon-container",3,"click"],["src","assets/images/scan.svg",1,"scan-icon"],[1,"ion-margin-top","ion-no-padding","h-100"],[3,"ngClass"],["size","12",1,"ion-no-padding","ion-text-center"],["src","assets/images/placeholder-product.svg","class","img-product",4,"ngIf"],["class","img-product","onerror","this.onerror=null;this.src='assets/images/placeholder-product.svg'",3,"src",4,"ngIf"],["class","out-of-stock",4,"ngIf"],[1,"ion-justify-content-between","ion-padding-horizontal"],["size","12"],["class","ion-padding-vertical",4,"ngIf"],[1,"product-name"],[1,"ion-align-items-center"],["size","6",1,"ion-no-padding"],["class","product-brand",4,"ngIf"],[1,"product-size"],["class","product-out-of-stock",4,"ngIf"],[2,"font-size","12px","--color","white","background-color","#f8a345","margin-right","8px"],[1,"product-price","price-linethrough"],["size","11"],[1,"product-final-price"],["size","1",1,"ion-no-padding","ion-text-right"],["color","primary","src","assets/images/add-favorite.svg",2,"font-size","28px",3,"click"],[1,"divider","ion-margin-vertical"],[1,"text-desc-label"],[1,"text-desc",3,"innerHTML"],[1,"divider"],["size","12",1,"ion-padding-start"],[3,"products"],["size","4",1,"ion-text-center"],["size","4"],["src","/assets/images/remove-material.svg","color","limegreen",2,"font-size","10px",3,"ngClass","click"],["size","4",2,"border","solid 2px #e2e2e2"],["src","/assets/images/add-material.svg",2,"font-size","10px",3,"click"],["size","8"],["shape","round","color","success","expand","full",3,"ngClass","click"],["name","dots","color","dark",4,"ngIf"],["src","assets/images/placeholder-product.svg",1,"img-product"],["onerror","this.onerror=null;this.src='assets/images/placeholder-product.svg'",1,"img-product",3,"src"],[1,"out-of-stock"],[1,"ion-padding-vertical"],[1,"tag-background"],["name","pricetag",1,"tag-text",3,"ngStyle"],[1,"tag-text",3,"ngStyle"],[1,"product-brand"],[1,"product-out-of-stock"],["name","dots","color","dark"]],template:function(t,n){1&t&&(f.Ub(0,"ion-header",0),f.Ub(1,"ion-toolbar",1),f.Ub(2,"ion-buttons",2),f.Ub(3,"ion-button",3),f.cc("click",function(){return n.goBack()}),f.Pb(4,"ion-icon",4),f.Tb(),f.Tb(),f.Ub(5,"ion-row",5),f.Ub(6,"ion-col",6),f.Pb(7,"ion-searchbar",7),f.fc(8,"translate"),f.Ub(9,"div",8),f.cc("click",function(t){return n.scanQR(),t.stopPropagation()}),f.Pb(10,"img",9),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(11,"ion-content"),f.Ub(12,"ion-grid",10),f.Ub(13,"ion-row",11),f.Ub(14,"ion-col",12),f.Bc(15,y,1,0,"img",13),f.Bc(16,w,1,1,"img",14),f.Tb(),f.Bc(17,T,2,0,"div",15),f.Tb(),f.Ub(18,"ion-row",16),f.Ub(19,"ion-col",17),f.Bc(20,x,6,9,"ion-row",18),f.Ub(21,"ion-row"),f.Ub(22,"ion-col",6),f.Ub(23,"span",19),f.Dc(24),f.fc(25,"titlecase"),f.Tb(),f.Tb(),f.Tb(),f.Ub(26,"ion-row",20),f.Ub(27,"ion-col",21),f.Bc(28,k,3,1,"ion-text",22),f.Ub(29,"span",23),f.Dc(30),f.Tb(),f.Pb(31,"br"),f.Bc(32,P,3,3,"ion-text",24),f.Tb(),f.Tb(),f.Ub(33,"ion-row"),f.Ub(34,"ion-col"),f.Ub(35,"ion-badge",25),f.Dc(36),f.fc(37,"number"),f.Tb(),f.Ub(38,"span",26),f.Dc(39),f.fc(40,"number"),f.Tb(),f.Tb(),f.Tb(),f.Ub(41,"ion-row",20),f.Ub(42,"ion-col",27),f.Ub(43,"span",28),f.Dc(44),f.fc(45,"number"),f.Tb(),f.Tb(),f.Ub(46,"ion-col",29),f.Ub(47,"ion-icon",30),f.cc("click",function(){return n.addToFavorite()}),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Pb(48,"div",31),f.Ub(49,"ion-row",16),f.Ub(50,"ion-col",17),f.Ub(51,"ion-text",32),f.Dc(52),f.fc(53,"translate"),f.Tb(),f.Pb(54,"p",33),f.Tb(),f.Tb(),f.Pb(55,"div",34),f.Ub(56,"ion-row"),f.Ub(57,"ion-col",35),f.Ub(58,"ion-text",32),f.Dc(59),f.fc(60,"translate"),f.Tb(),f.Tb(),f.Ub(61,"ion-col",17),f.Pb(62,"app-slide-product",36),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(63,"ion-footer"),f.Ub(64,"ion-row",20),f.Ub(65,"ion-col",37),f.Ub(66,"ion-row",20),f.Ub(67,"ion-col",38),f.Ub(68,"ion-icon",39),f.cc("click",function(){return n.updateLocalQuantity(!1)}),f.Tb(),f.Tb(),f.Ub(69,"ion-col",40),f.Dc(70),f.Tb(),f.Ub(71,"ion-col",38),f.Ub(72,"ion-icon",41),f.cc("click",function(){return n.updateLocalQuantity(!0)}),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(73,"ion-col",42),f.Ub(74,"ion-button",43),f.cc("click",function(){return n.addItemToCart()}),f.Dc(75),f.fc(76,"translate"),f.Bc(77,U,1,0,"ion-spinner",44),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&t&&(f.mc("translucent",!0),f.Cb(7),f.nc("placeholder",f.gc(8,27,"SEARCH")),f.mc("routerLink",f.qc(47,O)),f.Cb(6),f.mc("ngClass",f.rc(48,D,0==(null==n.productData?null:n.productData.stock))),f.Cb(2),f.mc("ngIf",!(null!=n.productData&&n.productData.image_url)),f.Cb(1),f.mc("ngIf",null==n.productData?null:n.productData.image_url),f.Cb(1),f.mc("ngIf",0==(null==n.productData?null:n.productData.stock)),f.Cb(3),f.mc("ngIf",null!==(null==n.productData||null==n.productData.product_tag?null:n.productData.product_tag.name)),f.Cb(4),f.Fc(" ",f.gc(25,29,null==n.productData?null:n.productData.name)," "),f.Cb(4),f.mc("ngIf",null==n.productData?null:n.productData.brand),f.Cb(2),f.Gc("Size: ",null==n.productData?null:n.productData.weight," ",null==n.productData||null==n.productData.unit?null:n.productData.unit.name,""),f.Cb(2),f.mc("ngIf",(null==n.productData?null:n.productData.stock)<5&&(null==n.productData?null:n.productData.stock)>0),f.Cb(2),f.Ac("visibility",null!=n.productData&&n.productData.secondary_price?"unset":"hidden"),f.Cb(2),f.Fc("",f.hc(37,31,((null==n.productData?null:n.productData.secondary_price)-(null==n.productData?null:n.productData.primary_price))/(null==n.productData?null:n.productData.secondary_price)*100,"1.0-0")," %"),f.Cb(3),f.Fc(" Rp ",f.hc(40,34,null==n.productData?null:n.productData.secondary_price,"1.0-0")," "),f.Cb(5),f.Fc("Rp ",f.ic(45,37,null==n.productData?null:n.productData.primary_price,"1.0-0","id")," "),f.Cb(8),f.Ec(f.gc(53,41,"DESCRIPTION")),f.Cb(2),f.mc("innerHTML",null==n.productData?null:n.productData.description,f.wc),f.Cb(5),f.Ec(f.gc(60,43,"RELATED_PRODUCT")),f.Cb(3),f.mc("products",n.products),f.Cb(6),f.mc("ngClass",f.rc(50,D,n.qty<1)),f.Cb(2),f.Ec(n.qty),f.Cb(4),f.mc("ngClass",f.rc(52,D,n.qty<1||0==(null==n.productData?null:n.productData.stock))),f.Cb(1),f.Fc(" ",f.gc(76,45,"ADD_TO_CART")," "),f.Cb(2),f.mc("ngIf",n.isOnFetch))},directives:[a.t,a.bb,a.i,a.h,a.u,a.K,a.o,a.L,a.mb,a.kb,s.h,a.p,a.s,i.l,i.n,a.g,a.X,m.a,a.r,i.o,a.T],pipes:[v.a,i.t,i.f],styles:[".img-product[_ngcontent-%COMP%]{max-height:200px;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}ion-header[_ngcontent-%COMP%]{border:unset!important}.text-desc[_ngcontent-%COMP%]{font-size:12px;line-height:1.2;color:#262626}.text-desc-label[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:1.17}.product-brand[_ngcontent-%COMP%], .text-desc-label[_ngcontent-%COMP%]{letter-spacing:normal;color:#262626}.product-brand[_ngcontent-%COMP%]{font-size:15px;font-weight:600;line-height:1.5}.product-name[_ngcontent-%COMP%]{font-size:21px;font-weight:700;line-height:1;letter-spacing:normal;color:#262626}.product-size[_ngcontent-%COMP%]{font-size:15px!important;font-weight:400;line-height:1.5;color:#262626}.product-final-price[_ngcontent-%COMP%], .product-size[_ngcontent-%COMP%]{width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-final-price[_ngcontent-%COMP%]{font-size:21px;font-weight:700;line-height:1.3;color:#9c3}.product-price[_ngcontent-%COMP%]{font-size:17px;width:95px;font-weight:700;line-height:2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:super;color:#f8a345}.product-out-of-stock[_ngcontent-%COMP%]{font-size:15px;font-weight:600;line-height:1.25;color:#d61414}.price-linethrough[_ngcontent-%COMP%]{text-decoration:line-through}.scan-icon-container[_ngcontent-%COMP%]{position:absolute;top:6px;height:25px;right:16px}ion-searchbar.custom-search[_ngcontent-%COMP%]{height:36px;padding:12px!important;margin-top:-1px}.disabled[_ngcontent-%COMP%]{opacity:.5}.disabled[_ngcontent-%COMP%] > .out-of-stock[_ngcontent-%COMP%]{position:absolute;font-size:15px;font-weight:600;border-radius:15px;background-color:rgba(38,38,38,.7);padding:10px;color:#000;left:0;right:0;top:100px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:auto;color:#fff;text-align:center;text-transform:uppercase}.tag-background[_ngcontent-%COMP%]{border-radius:4px;background:rgba(110,154,242,.2);padding:3px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-text[_ngcontent-%COMP%]{color:#6e9af2;font-size:11px}"]}),_),z=r("vczW"),I=r("axhS");function M(t,n){if(1&t&&f.Pb(0,"img",7),2&t){var e=f.ec();f.mc("src",null==e.category?null:e.category.icon_url,f.xc)}}function F(t,n){1&t&&f.Pb(0,"img",8)}var R,B,L=((R=function(){function t(n,o){e(this,t),this.router=n,this.navCtrl=o}return n(t,[{key:"ngOnInit",value:function(){}},{key:"goToProductByCategory",value:function(t){this.navCtrl.navigateForward("/product/list?cat_id=".concat(t))}}]),t}()).\u0275fac=function(t){return new(t||R)(f.Ob(s.g),f.Ob(a.fb))},R.\u0275cmp=f.Ib({type:R,selectors:[["app-card-subcategory"]],inputs:{category:"category"},decls:9,vars:3,consts:[[1,"ion-text-center",3,"click"],[1,"cat-content"],["size","8",1,"ion-align-items-center","ion-align-self-center","ion-text-left","height-ellipsis"],["color","success",1,"cat-name"],["size","4",1,"ion-text-right","ion-align-items-center","ion-align-self-center"],["class","cat-icon rounded","onerror","this.onerror=null;this.src='https://via.placeholder.com/50.png'",3,"src",4,"ngIf"],["src","https://via.placeholder.com/50.png","class","cat-icon rounded",4,"ngIf"],["onerror","this.onerror=null;this.src='https://via.placeholder.com/50.png'",1,"cat-icon","rounded",3,"src"],["src","https://via.placeholder.com/50.png",1,"cat-icon","rounded"]],template:function(t,n){1&t&&(f.Ub(0,"ion-card",0),f.cc("click",function(){return n.goToProductByCategory(null==n.category?null:n.category.category_id)}),f.Ub(1,"ion-card-content",1),f.Ub(2,"ion-row"),f.Ub(3,"ion-col",2),f.Ub(4,"ion-text",3),f.Dc(5),f.Tb(),f.Tb(),f.Ub(6,"ion-col",4),f.Bc(7,M,1,1,"img",5),f.Bc(8,F,1,0,"img",6),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&t&&(f.Cb(5),f.Ec(null==n.category?null:n.category.name),f.Cb(2),f.mc("ngIf",null==n.category?null:n.category.icon_url),f.Cb(1),f.mc("ngIf",!(null!=n.category&&n.category.icon_url)))},directives:[a.j,a.k,a.K,a.o,a.X,i.n],styles:[".cat-icon[_ngcontent-%COMP%]{width:32px;height:32px;-o-object-fit:cover;object-fit:cover;float:right}.cat-name[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.cat-content[_ngcontent-%COMP%]{padding:12px}.height-ellipsis[_ngcontent-%COMP%]{height:42px;color:var(--ion-color-success)}"]}),R),E=r("gq6x"),j=((B=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||B)},B.\u0275cmp=f.Ib({type:B,selectors:[["app-product-skeleton"]],decls:21,vars:0,consts:[[1,"ion-no-border","link",2,"margin-left","0px","margin-right","0px"],[1,"ion-no-padding","link"],[1,"product-thuion-thumbnail","full-width",2,"width","100%"],["animated",""],[1,"ion-no-padding","ion-text-left"],[1,"height-ellipsis"],["size","10"],["size","12"],[1,"product-final-price"]],template:function(t,n){1&t&&(f.Ub(0,"ion-card",0),f.Ub(1,"ion-card-header",1),f.Ub(2,"ion-thumbnail",2),f.Pb(3,"ion-skeleton-text",3),f.Tb(),f.Tb(),f.Ub(4,"ion-card-content",4),f.Ub(5,"ion-row"),f.Ub(6,"ion-col"),f.Pb(7,"ion-skeleton-text",3),f.Tb(),f.Tb(),f.Ub(8,"ion-row"),f.Ub(9,"ion-col",5),f.Pb(10,"ion-skeleton-text",3),f.Tb(),f.Tb(),f.Ub(11,"ion-row"),f.Ub(12,"ion-col",6),f.Pb(13,"ion-skeleton-text",3),f.Tb(),f.Tb(),f.Ub(14,"ion-row"),f.Ub(15,"ion-col"),f.Pb(16,"ion-skeleton-text",3),f.Tb(),f.Tb(),f.Ub(17,"ion-row"),f.Ub(18,"ion-col",7),f.Ub(19,"span",8),f.Pb(20,"ion-skeleton-text",3),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb())},directives:[a.j,a.l,a.Z,a.Q,a.k,a.K,a.o],styles:[".product-brand[_ngcontent-%COMP%]{font-size:12px;font-weight:600;line-height:2.17;letter-spacing:normal;color:#262626}.product-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;line-height:1.07;letter-spacing:normal;color:#454545}.product-size[_ngcontent-%COMP%]{font-size:12px;font-weight:400;line-height:1.5;color:#454545}.product-price[_ngcontent-%COMP%], .product-size[_ngcontent-%COMP%]{width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-price[_ngcontent-%COMP%]{font-size:11px;font-weight:700;line-height:3.4;vertical-align:super;color:#f8a345}.product-final-price[_ngcontent-%COMP%]{font-size:15px;font-weight:700;line-height:1.3;color:#9c3;width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-discount[_ngcontent-%COMP%]{font-size:10px;--color:#fff;background-color:#f8a345}.product-img[_ngcontent-%COMP%]{width:200px;height:80px;-o-object-fit:contain;object-fit:contain}.price-linethrough[_ngcontent-%COMP%]{text-decoration:line-through}.disabled[_ngcontent-%COMP%]{opacity:.6}.disabled[_ngcontent-%COMP%] > .out-of-stock[_ngcontent-%COMP%]{position:absolute;font-size:10px;font-weight:600;border-radius:15px;background-color:rgba(38,38,38,.7);padding:4px 1px;color:#000;left:0;right:0;top:30px;width:85%;margin:auto;color:#fff;text-align:center;text-transform:uppercase}.tag-background[_ngcontent-%COMP%]{border-radius:4px;background:rgba(110,154,242,.2);padding:3px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-text[_ngcontent-%COMP%]{color:#6e9af2;font-size:11px}.height-ellipsis[_ngcontent-%COMP%]{height:46px}@media only screen and (max-width:460px){.product-brand[_ngcontent-%COMP%]{font-size:10px}.product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;line-height:1.07;letter-spacing:normal;color:#454545}.product-size[_ngcontent-%COMP%]{font-weight:400;line-height:1.5;color:#454545}.product-price[_ngcontent-%COMP%], .product-size[_ngcontent-%COMP%]{font-size:10px;width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-price[_ngcontent-%COMP%]{font-weight:700;line-height:3.4;vertical-align:super;color:#f8a345}.product-final-price[_ngcontent-%COMP%]{font-size:13px;font-weight:700;line-height:1.3;color:#9c3;width:95px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-discount[_ngcontent-%COMP%]{font-size:9px;--color:#fff;background-color:#f8a345}.tag-text[_ngcontent-%COMP%]{font-size:10px;font-weight:600}.height-ellipsis[_ngcontent-%COMP%]{height:43px}}"]}),B);function K(t,n){if(1&t){var e=f.Vb();f.Ub(0,"ion-toolbar",16),f.Ub(1,"ion-buttons",17),f.Pb(2,"ion-back-button",18),f.Tb(),f.Ub(3,"ion-title"),f.Dc(4),f.fc(5,"translate"),f.Tb(),f.Ub(6,"ion-buttons",19),f.Ub(7,"ion-button",20),f.cc("click",function(){return f.vc(e),f.ec().searchProduct()}),f.Pb(8,"ion-icon",21),f.Tb(),f.Tb(),f.Tb()}2&t&&(f.Cb(4),f.Ec(f.gc(5,1,"SEARCH_RESULT")))}function q(t,n){if(1&t){var e=f.Vb();f.Ub(0,"ion-toolbar",16),f.Ub(1,"ion-buttons",22),f.Ub(2,"ion-button",20),f.cc("click",function(){return f.vc(e),f.ec().goBack()}),f.Pb(3,"ion-icon",23),f.Tb(),f.Tb(),f.Ub(4,"ion-title"),f.Dc(5),f.fc(6,"titlecase"),f.Tb(),f.Ub(7,"ion-buttons",19),f.Ub(8,"ion-button",20),f.cc("click",function(){return f.vc(e),f.ec().searchProduct()}),f.Pb(9,"ion-icon",21),f.Tb(),f.Tb(),f.Tb()}if(2&t){var o=f.ec();f.Cb(5),f.Ec(f.gc(6,1,o.title))}}function A(t,n){if(1&t&&(f.Ub(0,"ion-row",3),f.Ub(1,"ion-col",3),f.Pb(2,"img",24),f.Tb(),f.Tb()),2&t){var e=f.ec();f.Cb(2),f.mc("src",null==e.category?null:e.category.image_url,f.xc)}}function Q(t,n){if(1&t&&(f.Ub(0,"ion-col",28),f.Pb(1,"app-card-subcategory",29),f.Tb()),2&t){var e=n.$implicit;f.Cb(1),f.mc("category",e)}}function H(t,n){if(1&t&&(f.Ub(0,"ion-slide"),f.Ub(1,"ion-grid"),f.Ub(2,"ion-row",3),f.Bc(3,Q,2,1,"ion-col",27),f.Tb(),f.Tb(),f.Tb()),2&t){var e=n.$implicit;f.Cb(3),f.mc("ngForOf",e)}}function N(t,n){if(1&t&&(f.Ub(0,"ion-slides",25),f.Bc(1,H,4,1,"ion-slide",26),f.Tb()),2&t){var e=f.ec();f.Cb(1),f.mc("ngForOf",e.categoriesChunk)}}function V(t,n){if(1&t&&(f.Ub(0,"ion-row",3),f.Ub(1,"ion-col",3),f.Pb(2,"img",30),f.Tb(),f.Tb()),2&t){var e=f.ec();f.Cb(2),f.mc("src",e.brandImage,f.xc)}}function X(t,n){if(1&t&&(f.Ub(0,"ion-col",32),f.Pb(1,"app-card-product",33),f.Tb()),2&t){var e=n.$implicit;f.Cb(1),f.mc("product",e)}}function $(t,n){if(1&t&&(f.Ub(0,"ion-row"),f.Bc(1,X,2,1,"ion-col",31),f.Tb()),2&t){var e=f.ec();f.Cb(1),f.mc("ngForOf",e.products)}}function J(t,n){1&t&&(f.Ub(0,"ion-row",34),f.Ub(1,"ion-col",35),f.Dc(2," Data Not Found "),f.Tb(),f.Tb())}function G(t,n){1&t&&(f.Ub(0,"ion-col",32),f.Pb(1,"app-product-skeleton"),f.Tb())}var W=function(){return[1,2,3,4]};function Y(t,n){1&t&&(f.Ub(0,"ion-row",34),f.Bc(1,G,2,0,"ion-col",31),f.Tb()),2&t&&(f.Cb(1),f.mc("ngForOf",f.qc(1,W)))}var Z,tt=((Z=function(){function t(n,o,r,i,c,a,s,u,l){var d=this;e(this,t),this.router=n,this.route=o,this.categorySrv=r,this.productSrv=i,this.toastSrv=c,this.modalCtrl=a,this.gs=s,this.navCtrl=u,this.zone=l,this.fetching=!1,this.route.queryParams.subscribe(function(t){d.zone.run(function(){d.setKeyword(t),d.setCategoryId(t),d.setBrand(t),d.setFilterParam(t)})})}return n(t,[{key:"ngOnInit",value:function(){}},{key:"searchProduct",value:function(){this.router.navigate(["/product","search"])}},{key:"getCategory",value:function(){var t=this;this.categorySrv.getDetail(this.categoryId).then(function(n){t.category=n.response,t.title=t.category.name}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"getProductList",value:function(t){var n=this.setOrdering(),e=this.setFilter();return"keyword"===t?this.productSrv.getListByKeyword(this.search,null,n,e):"category"===t?this.productSrv.getListByCategory(this.categoryId,null,n,e):this.productSrv.getListByBrand(this.brandId,null,n,e)}},{key:"setOrdering",value:function(){var t=null;return this.order&&this.order.orderBy&&(t=this.order),t}},{key:"setFilter",value:function(){var t=null;return this.filter&&this.filter.min_price&&(t=this.filter),t}},{key:"assignProductList",value:function(){var t=this;this.fetching=!0,this.getProductList(this.productType).then(function(n){t.products=n.response.rows,n.response.image_url&&(t.brandImage=n.response.image_url),t.fetching=!1}).catch(function(n){t.toastSrv.show(n.error.error.message),t.fetching=!1})}},{key:"getSubcategory",value:function(t){var n=this;this.categorySrv.getSubcategory(t).then(function(t){n.categoriesChunk=n.gs.chunk(t.response,3)}).catch(function(t){n.toastSrv.show(t.error.error.message)})}},{key:"setKeyword",value:function(t){null!==t.search&&""!==t.search&&void 0!==t.search?(this.search=t.search,this.productType="keyword",this.assignProductList()):this.search=null}},{key:"setCategoryId",value:function(t){null!==t.cat_id&&""!==t.cat_id&&void 0!==t.cat_id?(this.categoryId=t.cat_id,this.getSubcategory(this.categoryId),this.getCategory(),this.productType="category",this.assignProductList()):this.categoryId=null}},{key:"setBrand",value:function(t){null!==t.brand_id&&""!==t.brand_id&&void 0!==t.brand_id?(this.brandId=t.brand_id,this.title=t.brand_name,this.productType="brand",this.assignProductList()):(this.brandId=null,this.title=null)}},{key:"setFilterParam",value:function(t){var n={};null!==t.min_price&&""!==t.min_price&&(n.min_price=t.min_price),null!==t.max_price&&""!==t.max_price&&(n.max_price=t.max_price),this.filter=n}},{key:"showFilter",value:function(){var t,n;return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:z.a,cssClass:"modal-filter-product",componentProps:{minPrice:null===(t=this.filter)||void 0===t?void 0:t.min_price,maxPrice:null===(n=this.filter)||void 0===n?void 0:n.max_price}});case 2:return(o=e.sent).onDidDismiss().then(function(t){var n=t.data;n&&(r.filter={min_price:n.minPrice,max_price:n.maxPrice},r.refreshProduct())}),e.next=6,o.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"showSort",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:I.a,cssClass:"modal-sort-product",componentProps:{option:this.sort}});case 2:return(n=t.sent).onDidDismiss().then(function(t){var n,o,r=t.data;r&&(e.sort=r.value,e.order={orderBy:null===(n=r.order)||void 0===n?void 0:n.orderBy,orderType:null===(o=r.order)||void 0===o?void 0:o.orderType},e.refreshProduct())}),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"refreshProduct",value:function(){this.products=[],this.assignProductList()}},{key:"goBack",value:function(){var t=this;this.zone.run(function(){t.navCtrl.back()})}}]),t}()).\u0275fac=function(t){return new(t||Z)(f.Ob(s.g),f.Ob(s.a),f.Ob(g.g),f.Ob(g.j),f.Ob(b.e),f.Ob(a.eb),f.Ob(b.c),f.Ob(a.fb),f.Ob(f.B))},Z.\u0275cmp=f.Ib({type:Z,selectors:[["app-product-list"]],decls:26,vars:17,consts:[[1,"ion-no-border"],["mode","ios",4,"ngIf"],[3,"fullscreen"],[1,"ion-no-padding"],["class","ion-no-padding",4,"ngIf"],["pager","","class","ion-padding-bottom",4,"ngIf"],[4,"ngIf"],["class","padding-product",4,"ngIf"],["color","light",3,"translucent","mode"],[2,"background","white"],[1,"padding-footer"],["size","5.5",1,"ion-text-center"],["color","success",3,"click"],["name","funnel"],["size","1",1,"ion-text-center"],["color","success",1,"divider"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back","defaultHref","/product/search","icon","chevron-back-outline"],["slot","end"],[3,"click"],["name","search",1,"header-action-size"],["slot","start","mode","md"],["name","chevron-back-outline","slot","icon-only","color","dark"],["onerror","this.onerror=null;this.src='assets/images/placeholder-banner.png'",1,"full-width","img-header",3,"src"],["pager","",1,"ion-padding-bottom"],[4,"ngFor","ngForOf"],["class","ion-no-padding","size","4",4,"ngFor","ngForOf"],["size","4",1,"ion-no-padding"],[3,"category"],[1,"full-width","img-header",3,"src"],["class","ion-padding-horizontal","size","4",4,"ngFor","ngForOf"],["size","4",1,"ion-padding-horizontal"],[3,"product"],[1,"padding-product"],[1,"ion-text-center"]],template:function(t,n){1&t&&(f.Ub(0,"ion-header",0),f.Bc(1,K,9,3,"ion-toolbar",1),f.Bc(2,q,10,3,"ion-toolbar",1),f.Tb(),f.Ub(3,"ion-content",2),f.Ub(4,"ion-grid",3),f.Bc(5,A,3,1,"ion-row",4),f.Bc(6,N,2,1,"ion-slides",5),f.Bc(7,V,3,1,"ion-row",4),f.Bc(8,$,2,1,"ion-row",6),f.Bc(9,J,3,0,"ion-row",7),f.Bc(10,Y,2,2,"ion-row",7),f.Tb(),f.Tb(),f.Ub(11,"ion-footer",8),f.Ub(12,"ion-grid",9),f.Ub(13,"ion-row",10),f.Ub(14,"ion-col",11),f.Ub(15,"ion-text",12),f.cc("click",function(){return n.showSort()}),f.Pb(16,"ion-icon",13),f.Dc(17),f.fc(18,"translate"),f.Tb(),f.Tb(),f.Ub(19,"ion-col",14),f.Pb(20,"ion-text",15),f.Tb(),f.Ub(21,"ion-col",11),f.Ub(22,"ion-text",12),f.cc("click",function(){return n.showFilter()}),f.Pb(23,"ion-icon",13),f.Dc(24),f.fc(25,"translate"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&t&&(f.Cb(1),f.mc("ngIf",n.search),f.Cb(1),f.mc("ngIf",!n.search),f.Cb(1),f.mc("fullscreen",!0),f.Cb(2),f.mc("ngIf",!n.search&&n.category),f.Cb(1),f.mc("ngIf",n.category&&n.categoriesChunk&&n.categoriesChunk.length),f.Cb(1),f.mc("ngIf",n.brandImage),f.Cb(1),f.mc("ngIf",n.products&&n.products.length),f.Cb(1),f.mc("ngIf",(!n.products||n.products&&!n.products.length)&&!n.fetching),f.Cb(1),f.mc("ngIf",(!n.products||n.products&&!n.products.length)&&n.fetching),f.Cb(1),f.mc("translucent",!1)("mode","md"),f.Cb(6),f.Fc(" ",f.gc(18,13,"SORT")," "),f.Cb(7),f.Fc(" ",f.gc(25,15,"FILTER")," "))},directives:[a.t,i.n,a.p,a.s,a.r,a.K,a.o,a.X,a.u,a.bb,a.i,a.e,a.f,a.ab,a.h,a.S,i.m,a.R,L,E.a,j],pipes:[v.a,i.t],styles:[".img-header[_ngcontent-%COMP%]{width:100%;height:16vh;-o-object-fit:cover;object-fit:cover}.padding-product[_ngcontent-%COMP%]{margin:.5em}.padding-footer[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}ion-header[_ngcontent-%COMP%]{border:none}.custom-search[_ngcontent-%COMP%]{padding-left:9px}"]}),Z);r("TwVa");var nt=r("2oRN");function et(t,n){if(1&t){var e=f.Vb();f.Ub(0,"ion-row",10),f.Ub(1,"ion-col",11),f.Pb(2,"ion-icon",12),f.Tb(),f.Ub(3,"ion-col",13),f.Ub(4,"ion-label",14),f.cc("click",function(){f.vc(e);var t=n.$implicit;return f.ec(2).setKeyword(t)}),f.Dc(5),f.Tb(),f.Tb(),f.Ub(6,"ion-col",15),f.Ub(7,"ion-icon",16),f.cc("click",function(){f.vc(e);var t=n.index;return f.ec(2).removeItem(t)}),f.Tb(),f.Tb(),f.Tb()}if(2&t){var o=n.$implicit;f.Cb(5),f.Fc(" ",o,"")}}function ot(t,n){if(1&t){var e=f.Vb();f.Ub(0,"ion-row",3),f.Ub(1,"ion-col",4),f.Ub(2,"ion-text",5),f.Dc(3),f.fc(4,"translate"),f.Tb(),f.Tb(),f.Ub(5,"ion-col",6),f.Ub(6,"ion-text",7),f.cc("click",function(){return f.vc(e),f.ec().removeAllRecent()}),f.Dc(7),f.fc(8,"translate"),f.Tb(),f.Tb(),f.Ub(9,"ion-col",8),f.Bc(10,et,8,1,"ion-row",9),f.fc(11,"slice"),f.Tb(),f.Tb()}if(2&t){var o=f.ec();f.Cb(3),f.Fc(" ",f.gc(4,3,"RECENT_SEARCHES"),""),f.Cb(4),f.Ec(f.gc(8,5,"CLEAR_RECENT")),f.Cb(3),f.mc("ngForOf",f.ic(11,7,o.recentSearches,0,3))}}function rt(t,n){if(1&t){var e=f.Vb();f.Ub(0,"ion-chip",21),f.cc("click",function(){f.vc(e);var t=n.$implicit;return f.ec(2).goToProductByCategory(null==t?null:t.category_id)}),f.Ub(1,"ion-label",22),f.Dc(2),f.Tb(),f.Tb()}if(2&t){var o=n.$implicit;f.Cb(2),f.Ec(null==o?null:o.name)}}function it(t,n){if(1&t&&(f.Ub(0,"ion-row",17),f.Ub(1,"ion-col",18),f.Ub(2,"ion-text",5),f.Dc(3),f.fc(4,"translate"),f.Tb(),f.Tb(),f.Ub(5,"ion-col",19),f.Bc(6,rt,3,1,"ion-chip",20),f.Tb(),f.Tb()),2&t){var e=f.ec();f.Cb(3),f.Fc(" ",f.gc(4,2,"SEARCH_BY_CATEGORY"),""),f.Cb(3),f.mc("ngForOf",e.categories)}}function ct(t,n){if(1&t&&(f.Ub(0,"ion-row",17),f.Ub(1,"ion-col",18),f.Ub(2,"ion-text",5),f.Dc(3),f.fc(4,"translate"),f.Tb(),f.Tb(),f.Ub(5,"ion-col",8),f.Pb(6,"app-slide-product",23),f.Tb(),f.Tb()),2&t){var e=f.ec();f.Cb(3),f.Fc(" ",f.gc(4,2,"POPULAR_SEARCHES"),""),f.Cb(3),f.mc("products",e.products)}}function at(t,n){if(1&t&&(f.Ub(0,"ion-row"),f.Ub(1,"ion-col",18),f.Ub(2,"ion-text",5),f.Dc(3),f.fc(4,"translate"),f.Tb(),f.Tb(),f.Ub(5,"ion-col",8),f.Pb(6,"app-slide-brand",24),f.Tb(),f.Tb()),2&t){var e=f.ec();f.Cb(3),f.Fc(" ",f.gc(4,2,"FEATURED_BRAND"),""),f.Cb(3),f.mc("brands",e.brands)}}var st,ut,lt=((ut=function(){function t(n,o,r,i,c,a){e(this,t),this.categorySrv=n,this.brandSrv=o,this.productSrv=r,this.toastSrv=i,this.cache=c,this.router=a,this.assignKeyword=new f.o,this.page={row:10,page:1}}return n(t,[{key:"ngOnInit",value:function(){this.getCategory(),this.getFeaturedBrand()}},{key:"setKeyword",value:function(t){this.assignKeyword.emit(t)}},{key:"getCategory",value:function(){var t=this;this.categorySrv.getList().then(function(n){t.categories=n.response}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"goToProductByCategory",value:function(t){this.router.navigate(["/product","list"],{queryParams:{cat_id:t}})}},{key:"getFeaturedBrand",value:function(){var t=this;this.brandSrv.getFeaturedList().then(function(n){t.brands=n.response}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"removeItem",value:function(t){this.recentSearches.splice(t,1),this.cache.setRecentSearch(this.recentSearches)}},{key:"removeAllRecent",value:function(){this.cache.removeRecentSearch(),this.recentSearches=[]}}]),t}()).\u0275fac=function(t){return new(t||ut)(f.Ob(g.g),f.Ob(g.d),f.Ob(g.j),f.Ob(b.e),f.Ob(b.b),f.Ob(s.g))},ut.\u0275cmp=f.Ib({type:ut,selectors:[["app-product-search-without-keyword"]],inputs:{recentSearches:"recentSearches",products:"products"},outputs:{assignKeyword:"assignKeyword"},decls:4,vars:4,consts:[["class","ion-padding-vertical ion-align-items-center",4,"ngIf"],["class","ion-padding-bottom",4,"ngIf"],[4,"ngIf"],[1,"ion-padding-vertical","ion-align-items-center"],["size","7",1,"ion-padding-start","padding-category",2,"padding-top","0px"],[1,"search-title"],["size","5",1,"ion-padding-end","ion-text-right"],[1,"clear-recent-search",3,"click"],["size","12"],["class","padding-item-recent",4,"ngFor","ngForOf"],[1,"padding-item-recent"],["size","1",1,"ion-padding-start"],["name","time-outline","color","medium",1,"icon-recent-search"],["size","9"],["color","limegreen",1,"text-recent-search",3,"click"],["size","2",1,"ion-text-center"],["name","close-outline",1,"icon-recent-search",3,"click"],[1,"ion-padding-bottom"],["size","12",1,"ion-padding-horizontal"],["size","12",1,"padding-category"],["style","border: 1px solid #99cc33; background: white",3,"click",4,"ngFor","ngForOf"],[2,"border","1px solid #99cc33","background","white",3,"click"],["color","limegreen"],[3,"products"],[3,"brands"]],template:function(t,n){1&t&&(f.Bc(0,ot,12,11,"ion-row",0),f.Bc(1,it,7,4,"ion-row",1),f.Bc(2,ct,7,4,"ion-row",1),f.Bc(3,at,7,4,"ion-row",2)),2&t&&(f.mc("ngIf",n.recentSearches&&n.recentSearches.length),f.Cb(1),f.mc("ngIf",n.categories&&n.categories.length),f.Cb(1),f.mc("ngIf",n.products&&n.products.length),f.Cb(1),f.mc("ngIf",n.brands&&n.brands.length))},directives:[i.n,a.K,a.o,a.X,i.m,a.u,a.C,a.n,m.a,nt.a],pipes:[v.a,i.s],styles:[".padding-product[_ngcontent-%COMP%]{margin:.5em}.search-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.2;color:#353535}.padding-category[_ngcontent-%COMP%]{padding-top:12px;padding-left:12px;padding-right:12px}.icon-recent-search[_ngcontent-%COMP%]{font-size:13px;margin-right:10px;margin-top:2px;color:grey}.text-recent-search[_ngcontent-%COMP%]{font-size:13px;margin-left:5px}.clear-recent-search[_ngcontent-%COMP%]{font-size:11px;line-height:1.25;color:#cbcbcb;border:1px solid #cbcbcb;border-radius:12px;padding:4px 12px}.padding-item-recent[_ngcontent-%COMP%]{padding-top:12px}"]}),ut),dt=((st=function(){function t(){e(this,t),this.redirectToList=new f.o}return n(t,[{key:"ngOnInit",value:function(){}},{key:"goToProductList",value:function(){this.redirectToList.emit()}}]),t}()).\u0275fac=function(t){return new(t||st)},st.\u0275cmp=f.Ib({type:st,selectors:[["app-product-search-with-keyword"]],inputs:{keyword:"keyword",products:"products",brands:"brands"},outputs:{redirectToList:"redirectToList"},decls:18,vars:11,consts:[[1,"ion-padding-vertical"],["size","9",1,"ion-padding-start","ion-padding-bottom-small"],[1,"search-title"],["size","3",1,"ion-text-right","ion-padding-end"],[1,"section-see-all",3,"click"],["size","12"],[3,"products"],["size","12",1,"ion-padding-horizontal"],[3,"brands"]],template:function(t,n){1&t&&(f.Ub(0,"ion-row",0),f.Ub(1,"ion-col",1),f.Ub(2,"ion-text",2),f.Dc(3),f.fc(4,"translate"),f.Tb(),f.Tb(),f.Ub(5,"ion-col",3),f.Ub(6,"ion-text",4),f.cc("click",function(){return n.goToProductList()}),f.Dc(7),f.fc(8,"translate"),f.Tb(),f.Tb(),f.Ub(9,"ion-col",5),f.Pb(10,"app-slide-product",6),f.Tb(),f.Tb(),f.Ub(11,"ion-row"),f.Ub(12,"ion-col",7),f.Ub(13,"ion-text",2),f.Dc(14),f.fc(15,"translate"),f.Tb(),f.Tb(),f.Ub(16,"ion-col",5),f.Pb(17,"app-slide-brand",8),f.Tb(),f.Tb()),2&t&&(f.Cb(3),f.Fc(" ",f.gc(4,5,"SEARCH_RESULT"),""),f.Cb(4),f.Fc(" ",f.gc(8,7,"SEE_ALL")," "),f.Cb(3),f.mc("products",n.products),f.Cb(4),f.Fc(" ",f.gc(15,9,"RELATED_BRAND"),""),f.Cb(3),f.mc("brands",n.brands))},directives:[a.K,a.o,a.X,m.a,nt.a],pipes:[v.a],styles:[".search-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.2;color:#353535}"]}),st),pt=["searchBar"];function bt(t,n){if(1&t){var e=f.Vb();f.Ub(0,"app-product-search-without-keyword",18),f.cc("assignKeyword",function(t){return f.vc(e),f.ec().assignKeyword(t)}),f.Tb()}if(2&t){var o=f.ec();f.mc("recentSearches",o.recentSearches)("products",o.popularProducts)}}function gt(t,n){if(1&t){var e=f.Vb();f.Ub(0,"app-product-search-with-keyword",19),f.cc("redirectToList",function(){return f.vc(e),f.ec().goToProductList()}),f.Tb()}if(2&t){var o=f.ec();f.mc("keyword",o.keyword)("products",o.products)("brands",o.brands)}}var ht,ft,mt,vt,yt=((ht=function(){function t(n,o,r,i,c,a){e(this,t),this.productSrv=n,this.brandSrv=o,this.toastSrv=r,this.cache=i,this.modalCtrl=c,this.router=a,this.recentSearches=[],this.page={row:10,page:1}}return n(t,[{key:"ngOnInit",value:function(){this.saveRecentSearch(),this.getPopularProduct()}},{key:"ionViewDidEnter",value:function(){var t=this;setTimeout(function(){t.searchBar.setFocus()},150)}},{key:"fetchData",value:function(){this.keyword&&""!==this.keyword&&null!==this.keyword&&(this.getProduct(),this.getBrand())}},{key:"searchProduct",value:function(t){this.keyword=t.detail.value,this.fetchData()}},{key:"assignKeyword",value:function(t){this.keyword=t,this.fetchData()}},{key:"getProduct",value:function(){var t=this,n=null;this.filter&&this.filter.min_price&&(n=this.filter),this.productSrv.getListByKeyword(this.keyword,this.page,null,n).then(function(n){t.saveRecentSearch(),t.products=n.response.rows}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"getBrand",value:function(){var t=this;this.brandSrv.getRelated(this.keyword,this.page).then(function(n){t.saveRecentSearch(),t.brands=n.response.rows}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"appendRecentSearch",value:function(){var t=this;if(this.recentSearches.includes(this.keyword)){var n=this.recentSearches.findIndex(function(n){return n===t.keyword});this.recentSearches.splice(n,1)}this.recentSearches.push(this.keyword)}},{key:"saveRecentSearch",value:function(){var t=this;this.cache.getRecentSearch().then(function(n){n&&(t.recentSearches=n.reverse()),t.keyword&&""!==t.keyword&&null!==t.keyword&&t.appendRecentSearch(),t.cache.setRecentSearch(t.recentSearches)})}},{key:"showFilter",value:function(){var t,n;return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:z.a,cssClass:"modal-filter-product",componentProps:{minPrice:null===(t=this.filter)||void 0===t?void 0:t.min_price,maxPrice:null===(n=this.filter)||void 0===n?void 0:n.max_price}});case 2:return(o=e.sent).onDidDismiss().then(function(t){var n=t.data;n&&(r.filter={min_price:n.minPrice,max_price:n.maxPrice},r.refreshProduct())}),e.next=6,o.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"refreshProduct",value:function(){this.getPopularProduct(),this.fetchData()}},{key:"getPopularProduct",value:function(){var t=this,n=null;this.filter&&this.filter.min_price&&(n=this.filter),this.productSrv.getPopular(this.page,null,n).then(function(n){t.popularProducts=n.response.rows}).catch(function(n){t.toastSrv.show(n.error.error.message)})}},{key:"goToProductList",value:function(){var t,n,e={search:this.keyword,min_price:null===(t=this.filter)||void 0===t?void 0:t.min_price,max_price:null===(n=this.filter)||void 0===n?void 0:n.max_price};this.router.navigate(["/product","list"],{queryParams:e})}},{key:"scanQR",value:function(){this.router.navigate(["/qr","scan"])}}]),t}()).\u0275fac=function(t){return new(t||ht)(f.Ob(g.j),f.Ob(g.d),f.Ob(b.e),f.Ob(b.b),f.Ob(a.eb),f.Ob(s.g))},ht.\u0275cmp=f.Ib({type:ht,selectors:[["app-product-search"]],viewQuery:function(t,n){var e;1&t&&f.Jc(pt,1),2&t&&f.tc(e=f.dc())&&(n.searchBar=e.first)},decls:24,vars:10,consts:[[1,"ion-no-border"],["mode","ios"],["mode","md",1,"ion-text-center"],["icon","chevron-back","defaultHref","/tabs/home","icon","chevron-back-outline"],[1,"ion-justify-content-center","ion-align-items-center"],["size","10"],["mode","ios","debounce","1000",1,"custom-search",3,"value","ionChange"],["searchBar",""],[1,"ion-no-padding","ion-align-self-center","ion-text-center","scan-icon-container",3,"click"],["src","assets/images/scan.svg",1,"scan-icon"],["size","2"],[1,"ion-align-self-center",3,"click"],["name","funnel","slot","start","size","medium","color","primary",1,"filter-icon"],["color","primary",1,"header-action-size"],[3,"fullscreen"],[1,"ion-no-padding"],[3,"recentSearches","products","assignKeyword",4,"ngIf"],[3,"keyword","products","brands","redirectToList",4,"ngIf"],[3,"recentSearches","products","assignKeyword"],[3,"keyword","products","brands","redirectToList"]],template:function(t,n){1&t&&(f.Ub(0,"ion-header",0),f.Ub(1,"ion-toolbar",1),f.Ub(2,"ion-buttons",2),f.Pb(3,"ion-back-button",3),f.Tb(),f.Ub(4,"ion-title"),f.Dc(5),f.fc(6,"translate"),f.Tb(),f.Tb(),f.Ub(7,"ion-toolbar",1),f.Ub(8,"ion-row",4),f.Ub(9,"ion-col",5),f.Ub(10,"ion-searchbar",6,7),f.cc("ionChange",function(t){return n.searchProduct(t)}),f.Tb(),f.Ub(12,"div",8),f.cc("click",function(t){return n.scanQR(),t.stopPropagation()}),f.Pb(13,"img",9),f.Tb(),f.Tb(),f.Ub(14,"ion-col",10),f.Ub(15,"div",11),f.cc("click",function(){return n.showFilter()}),f.Pb(16,"ion-icon",12),f.Ub(17,"ion-text",13),f.Dc(18),f.fc(19,"translate"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(20,"ion-content",14),f.Ub(21,"ion-grid",15),f.Bc(22,bt,1,2,"app-product-search-without-keyword",16),f.Bc(23,gt,1,3,"app-product-search-with-keyword",17),f.Tb(),f.Tb()),2&t&&(f.Cb(5),f.Ec(f.gc(6,6,"SEARCH")),f.Cb(5),f.nc("value",n.keyword),f.Cb(8),f.Fc(" ",f.gc(19,8,"FILTER")," "),f.Cb(2),f.mc("fullscreen",!0),f.Cb(2),f.mc("ngIf",!n.keyword),f.Cb(1),f.mc("ngIf",n.keyword))},directives:[a.t,a.bb,a.i,a.e,a.f,a.ab,a.K,a.o,a.L,a.mb,a.u,a.X,a.p,a.s,i.n,lt,dt],pipes:[v.a],styles:[".header-action-size[_ngcontent-%COMP%]{font-size:12px!important;text-transform:capitalize}.filter-icon[_ngcontent-%COMP%]{font-size:16px!important}.custom-search[_ngcontent-%COMP%]{padding-left:9px}ion-header[_ngcontent-%COMP%]{border:none}"]}),ht),wt=[{path:"",component:(ft=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}(),ft.\u0275fac=function(t){return new(t||ft)},ft.\u0275cmp=f.Ib({type:ft,selectors:[["app-product"]],decls:1,vars:0,template:function(t,n){1&t&&f.Pb(0,"ion-router-outlet")},directives:[a.J],styles:[""]}),ft),children:[{path:"list",component:tt},{path:"search",component:yt},{path:"",redirectTo:"list",pathMatch:"full"},{path:"detail/:id",component:S}]}],Tt=((mt=function t(){e(this,t)}).\u0275mod=f.Mb({type:mt}),mt.\u0275inj=f.Lb({factory:function(t){return new(t||mt)},imports:[[s.j.forChild(wt)],s.j]}),mt),Ct=r("8/Qx"),xt=r("CNc/"),kt=r("8uOt"),Pt=r("PCNd"),Ut=r("Vgir"),_t=((vt=function t(){e(this,t)}).\u0275mod=f.Mb({type:vt}),vt.\u0275inj=f.Lb({factory:function(t){return new(t||vt)},imports:[[i.b,c.j,a.cb,Tt,Ct.a,xt.a,kt.a,Pt.a,Ut.a]]}),vt)}}])}();